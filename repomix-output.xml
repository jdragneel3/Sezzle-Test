This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.dockerignore
.github/workflows/ci.yml
.gitlab-ci.yml
calculator-backend/.gitignore
calculator-backend/backend_prompt.md
calculator-backend/build.gradle.kts
calculator-backend/gradle.properties
calculator-backend/gradle/wrapper/gradle-wrapper.jar
calculator-backend/gradle/wrapper/gradle-wrapper.properties
calculator-backend/gradlew
calculator-backend/gradlew.bat
calculator-backend/openapi.properties
calculator-backend/README.md
calculator-backend/settings.gradle.kts
calculator-backend/src/main/kotlin/com/calculator/Application.kt
calculator-backend/src/main/kotlin/com/calculator/config/AppConfig.kt
calculator-backend/src/main/kotlin/com/calculator/config/ErrorResponseTransformFilter.kt
calculator-backend/src/main/kotlin/com/calculator/config/MdcFilter.kt
calculator-backend/src/main/kotlin/com/calculator/config/RateLimitConfig.kt
calculator-backend/src/main/kotlin/com/calculator/config/RateLimiter.kt
calculator-backend/src/main/kotlin/com/calculator/config/RateLimitFilter.kt
calculator-backend/src/main/kotlin/com/calculator/config/SecurityHeadersFilter.kt
calculator-backend/src/main/kotlin/com/calculator/controller/CalculatorController.kt
calculator-backend/src/main/kotlin/com/calculator/exception/CalculatorException.kt
calculator-backend/src/main/kotlin/com/calculator/exception/DivisionByZeroException.kt
calculator-backend/src/main/kotlin/com/calculator/exception/GlobalExceptionHandler.kt
calculator-backend/src/main/kotlin/com/calculator/exception/InvalidOperandException.kt
calculator-backend/src/main/kotlin/com/calculator/exception/OverflowException.kt
calculator-backend/src/main/kotlin/com/calculator/exception/ValidationException.kt
calculator-backend/src/main/kotlin/com/calculator/model/request/BinaryOperationRequest.kt
calculator-backend/src/main/kotlin/com/calculator/model/request/UnaryOperationRequest.kt
calculator-backend/src/main/kotlin/com/calculator/model/response/CalculationResponse.kt
calculator-backend/src/main/kotlin/com/calculator/model/response/ErrorResponse.kt
calculator-backend/src/main/kotlin/com/calculator/service/CalculatorService.kt
calculator-backend/src/main/kotlin/com/calculator/service/HealthService.kt
calculator-backend/src/main/kotlin/com/calculator/service/impl/CalculatorServiceImpl.kt
calculator-backend/src/main/resources/application.yml
calculator-backend/src/main/resources/logback.xml
calculator-backend/src/test/kotlin/com/calculator/config/MdcFilterTest.kt
calculator-backend/src/test/kotlin/com/calculator/config/RateLimiterTest.kt
calculator-backend/src/test/kotlin/com/calculator/config/RateLimitFilterTest.kt
calculator-backend/src/test/kotlin/com/calculator/controller/CalculatorControllerTest.kt
calculator-backend/src/test/kotlin/com/calculator/exception/ExceptionTest.kt
calculator-backend/src/test/kotlin/com/calculator/service/CalculatorServiceTest.kt
calculator-backend/src/test/resources/application-ratelimit.yml
calculator-backend/src/test/resources/application-test.yml
calculator-frontend/.env.example
calculator-frontend/.gitignore
calculator-frontend/coverage/base.css
calculator-frontend/coverage/block-navigation.js
calculator-frontend/coverage/coverage-final.json
calculator-frontend/coverage/favicon.png
calculator-frontend/coverage/index.html
calculator-frontend/coverage/prettify.css
calculator-frontend/coverage/prettify.js
calculator-frontend/coverage/sort-arrow-sprite.png
calculator-frontend/coverage/sorter.js
calculator-frontend/coverage/src/App.tsx.html
calculator-frontend/coverage/src/components/Calculator/Button.tsx.html
calculator-frontend/coverage/src/components/Calculator/Calculator.tsx.html
calculator-frontend/coverage/src/components/Calculator/Display.tsx.html
calculator-frontend/coverage/src/components/Calculator/index.html
calculator-frontend/coverage/src/components/Calculator/Keypad.tsx.html
calculator-frontend/coverage/src/components/ErrorBoundary/ErrorBoundary.tsx.html
calculator-frontend/coverage/src/components/ErrorBoundary/index.html
calculator-frontend/coverage/src/components/Loading/index.html
calculator-frontend/coverage/src/components/Loading/Spinner.tsx.html
calculator-frontend/coverage/src/hooks/index.html
calculator-frontend/coverage/src/hooks/useApi.ts.html
calculator-frontend/coverage/src/hooks/useCalculator.ts.html
calculator-frontend/coverage/src/index.html
calculator-frontend/coverage/src/services/calculatorApi.ts.html
calculator-frontend/coverage/src/services/index.html
calculator-frontend/coverage/src/utils/errorMessages.ts.html
calculator-frontend/coverage/src/utils/formatNumber.ts.html
calculator-frontend/coverage/src/utils/index.html
calculator-frontend/coverage/src/utils/validation.ts.html
calculator-frontend/e2e/calculator.spec.ts
calculator-frontend/eslint.config.js
calculator-frontend/front_prompt.md
calculator-frontend/index.html
calculator-frontend/package.json
calculator-frontend/playwright.config.ts
calculator-frontend/postcss.config.js
calculator-frontend/public/vite.svg
calculator-frontend/README.md
calculator-frontend/src/App.css
calculator-frontend/src/App.test.tsx
calculator-frontend/src/App.tsx
calculator-frontend/src/assets/react.svg
calculator-frontend/src/components/Calculator/Button.test.tsx
calculator-frontend/src/components/Calculator/Button.tsx
calculator-frontend/src/components/Calculator/Calculator.test.tsx
calculator-frontend/src/components/Calculator/Calculator.tsx
calculator-frontend/src/components/Calculator/Display.test.tsx
calculator-frontend/src/components/Calculator/Display.tsx
calculator-frontend/src/components/Calculator/Keypad.test.tsx
calculator-frontend/src/components/Calculator/Keypad.tsx
calculator-frontend/src/components/ErrorBoundary/ErrorBoundary.test.tsx
calculator-frontend/src/components/ErrorBoundary/ErrorBoundary.tsx
calculator-frontend/src/components/Loading/Spinner.test.tsx
calculator-frontend/src/components/Loading/Spinner.tsx
calculator-frontend/src/hooks/useApi.test.ts
calculator-frontend/src/hooks/useApi.ts
calculator-frontend/src/hooks/useCalculator.test.ts
calculator-frontend/src/hooks/useCalculator.ts
calculator-frontend/src/index.css
calculator-frontend/src/main.tsx
calculator-frontend/src/services/calculatorApi.test.ts
calculator-frontend/src/services/calculatorApi.ts
calculator-frontend/src/test/setup.ts
calculator-frontend/src/types/api.types.ts
calculator-frontend/src/types/calculator.types.ts
calculator-frontend/src/utils/errorMessages.test.ts
calculator-frontend/src/utils/errorMessages.ts
calculator-frontend/src/utils/formatNumber.test.ts
calculator-frontend/src/utils/formatNumber.ts
calculator-frontend/src/utils/validation.test.ts
calculator-frontend/src/utils/validation.ts
calculator-frontend/tailwind.config.js
calculator-frontend/test-results/.last-run.json
calculator-frontend/tsconfig.app.json
calculator-frontend/tsconfig.json
calculator-frontend/tsconfig.node.json
calculator-frontend/vite.config.ts
Dockerfile
improvements_prompt.md
README.md
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".dockerignore">
# Git
.git
.gitignore

# Backend
calculator-backend/.gradle
calculator-backend/build

# Frontend
calculator-frontend/node_modules
calculator-frontend/dist

# IDE / OS
.idea
.vscode
*.iml
.DS_Store

# Docs (opcional)
README.md
*.md
</file>

<file path=".github/workflows/ci.yml">
name: CI

on:
  push:
    branches: [main, master, develop]
  pull_request:
    branches: [main, master, develop]

jobs:
  backend:
    name: Backend (Kotlin)
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: "17"
          distribution: "temurin"
          cache: gradle

      - name: Grant execute permission for Gradle wrapper
        run: chmod +x calculator-backend/gradlew

      - name: Run backend tests
        working-directory: calculator-backend
        run: ./gradlew test jacocoTestReport

      - name: Upload JaCoCo report
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: backend-jacoco
          path: calculator-backend/build/reports/jacoco/
          retention-days: 7

  frontend:
    name: Frontend (React)
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          cache: "npm"
          cache-dependency-path: calculator-frontend/package-lock.json

      - name: Install dependencies
        run: npm ci --prefix calculator-frontend

      - name: Run frontend tests
        working-directory: calculator-frontend
        run: npm run test -- --run

      - name: Lint frontend
        run: npm run lint --prefix calculator-frontend
</file>

<file path=".gitlab-ci.yml">
stages:
  - test

variables:
  GRADLE_OPTS: "-Dorg.gradle.daemon=false"

backend:test:
  stage: test
  image: eclipse-temurin:17
  cache:
    key: backend-gradle
    paths:
      - calculator-backend/.gradle/
  script:
    - cd calculator-backend
    - chmod +x gradlew
    - ./gradlew test jacocoTestReport
  artifacts:
    when: always
    reports:
      junit: calculator-backend/build/test-results/test/**/TEST-*.xml
    paths:
      - calculator-backend/build/reports/jacoco/
    expire_in: 7 days

frontend:test:
  stage: test
  image: node:20
  cache:
    key: frontend-npm
    paths:
      - calculator-frontend/node_modules/
  script:
    - cd calculator-frontend
    - npm ci
    - npx vitest run
    - npm run lint
  artifacts:
    when: on_failure
    paths:
      - calculator-frontend/
    expire_in: 1 day
</file>

<file path="calculator-backend/.gitignore">
# Gradle
.gradle/
build/

# IDE
.idea/
*.iml
*.ipr
*.iws
out/

# OS
.DS_Store
Thumbs.db
</file>

<file path="calculator-backend/backend_prompt.md">
PROJECT CONTEXT
Full-stack calculator application with separated architecture: React (TypeScript) frontend and Kotlin/Micronaut microservice backend. The backend exposes a REST API for basic and advanced arithmetic operations, consumed by the frontend.
ROLE AND RESPONSIBILITY
You are acting as: Backend Developer (Kotlin/Micronaut)
Technical stack:

Kotlin 1.9+
Micronaut Framework 4.x
Gradle (Kotlin DSL)
JUnit 5 + Mockito for testing
SLF4J + Logback for structured logging

PRIMARY OBJECTIVE
Build a REST API microservice in Micronaut that exposes specific endpoints for calculator operations (addition, subtraction, multiplication, division, exponentiation, square root, percentage), with advanced input validation, robust error handling with custom error codes, structured logging, and unit test coverage.
TECHNICAL SPECIFICATIONS
Required Endpoints
POST /api/v1/add         - Addition of two numbers
POST /api/v1/subtract    - Subtraction of two numbers
POST /api/v1/multiply    - Multiplication of two numbers
POST /api/v1/divide      - Division of two numbers
POST /api/v1/power       - Exponentiation (base^exponent)
POST /api/v1/sqrt        - Square root of a number
POST /api/v1/percentage  - Percentage calculation (value, percentage)
GET  /api/v1/health      - Health check endpoint
Request/Response Contracts
Binary Operations Request (add, subtract, multiply, divide, power, percentage):
kotlindata class BinaryOperationRequest(
    @field:NotNull
    val operand1: Double,
    
    @field:NotNull
    val operand2: Double
)
Unary Operation Request (sqrt):
kotlindata class UnaryOperationRequest(
    @field:NotNull
    val operand: Double
)
Success Response:
kotlindata class CalculationResponse(
    val result: Double,
    val operation: String,
    val timestamp: Instant
)
Error Response:
kotlindata class ErrorResponse(
    val errorCode: String,
    val message: String,
    val details: String?,
    val timestamp: Instant
)
```

#### Custom Error Codes
- `CALC_001`: Division by zero
- `CALC_002`: Invalid operand (NaN, Infinity)
- `CALC_003`: Negative number for square root
- `CALC_004`: Numerical overflow/underflow
- `CALC_005`: Invalid percentage value (< 0 or > 100)
- `CALC_006`: Validation error (missing/null operands)

#### Input Validation Rules
1. **All operations**: Reject `NaN`, `Infinity`, `-Infinity`
2. **Division**: Second operand cannot be 0
3. **Square root**: Operand must be >= 0
4. **Percentage**: Second operand must be between 0 and 100
5. **Overflow detection**: Check if result exceeds `Double.MAX_VALUE` or goes below `Double.MIN_VALUE`

#### Structured Logging Requirements
Use SLF4J with MDC (Mapped Diagnostic Context) for:
- **INFO**: Successful operation completion with operation type and execution time
- **WARN**: Edge cases (very large numbers, near-zero divisions)
- **ERROR**: Validation failures and calculation errors with error codes
- Include request ID in MDC for traceability

Example log format:
```
[requestId=abc123] INFO  - Operation=ADD completed successfully in 2ms, result=15.5
[requestId=abc123] ERROR - Operation=DIVIDE failed, errorCode=CALC_001, reason=Division by zero
```

### ARCHITECTURE AND CODE ORGANIZATION

#### Project Structure
```
calculator-backend/
├── src/main/kotlin/com/calculator/
│   ├── controller/
│   │   └── CalculatorController.kt
│   ├── service/
│   │   ├── CalculatorService.kt
│   │   └── impl/CalculatorServiceImpl.kt
│   ├── model/
│   │   ├── request/
│   │   │   ├── BinaryOperationRequest.kt
│   │   │   └── UnaryOperationRequest.kt
│   │   └── response/
│   │       ├── CalculationResponse.kt
│   │       └── ErrorResponse.kt
│   ├── exception/
│   │   ├── CalculatorException.kt
│   │   ├── DivisionByZeroException.kt
│   │   ├── InvalidOperandException.kt
│   │   └── GlobalExceptionHandler.kt
│   └── config/
│       └── LoggingConfig.kt
├── src/main/resources/
│   ├── application.yml
│   └── logback.xml
├── src/test/kotlin/com/calculator/
│   ├── controller/
│   │   └── CalculatorControllerTest.kt
│   └── service/
│       └── CalculatorServiceTest.kt
├── build.gradle.kts
└── README.md
Design Patterns to Apply

Controller-Service pattern: Thin controllers, business logic in service layer
Dependency Injection: Use Micronaut's @Inject and @Singleton
Exception Hierarchy: Custom exceptions extending base CalculatorException
Global Exception Handler: @Error annotated methods in controller advice

ACCEPTANCE CRITERIA

✅ All 7 endpoints respond correctly to valid requests
✅ Division by zero returns HTTP 400 with error code CALC_001
✅ Square root of negative number returns HTTP 400 with error code CALC_003
✅ Invalid input (null, NaN, Infinity) returns HTTP 400 with error code CALC_002
✅ All operations log structured entries with request ID
✅ Unit tests achieve minimum 80% code coverage
✅ Service layer is fully mocked in controller tests
✅ Health endpoint returns HTTP 200 with service status
✅ CORS enabled for React frontend (port 3000)
✅ README includes API examples with curl commands

CRITICAL TEST CASES
Service Layer Tests (CalculatorServiceTest.kt)
kotlin// Happy Path
@Test fun `addition of positive numbers returns correct result`
@Test fun `subtraction returns correct result`
@Test fun `multiplication returns correct result`
@Test fun `division returns correct result`
@Test fun `power calculation returns correct result`
@Test fun `square root returns correct result`
@Test fun `percentage calculation returns correct result`

// Edge Cases
@Test fun `addition of very large numbers detects overflow`
@Test fun `division by very small number (close to zero) works`
@Test fun `square root of zero returns zero`
@Test fun `power of zero returns one`

// Error Cases
@Test fun `division by zero throws DivisionByZeroException`
@Test fun `square root of negative throws InvalidOperandException`
@Test fun `NaN operand throws InvalidOperandException`
@Test fun `Infinity operand throws InvalidOperandException`
@Test fun `percentage over 100 throws InvalidOperandException`
Controller Layer Tests (CalculatorControllerTest.kt)
kotlin@Test fun `POST add with valid input returns 200 and correct result`
@Test fun `POST divide with zero divisor returns 400 with CALC_001`
@Test fun `POST sqrt with negative returns 400 with CALC_003`
@Test fun `POST with null operand returns 400 with CALC_006`
@Test fun `GET health returns 200 with UP status`
Use @MockBean to mock CalculatorService in controller tests.
IMPLEMENTATION STEPS
Step 1: Project Setup

Initialize Micronaut project with Gradle Kotlin DSL
Add dependencies: micronaut-validation, logback-classic, junit-jupiter, mockito-kotlin
Configure application.yml with server port 8080, CORS settings
Configure logback.xml with JSON format for structured logs

Step 2: Core Business Logic

Implement CalculatorService interface with all 7 operation methods
Implement CalculatorServiceImpl with validation logic
Create custom exception hierarchy
Add input validation for each operation type

Step 3: REST Controllers

Create CalculatorController with @Controller("/api/v1")
Implement all 7 POST endpoints with @Body annotations
Implement health check endpoint
Create GlobalExceptionHandler with @Error methods for custom exceptions

Step 4: Logging Integration

Add SLF4J logger to service implementation
Implement MDC filter for request ID generation
Log INFO on successful operations with execution time
Log ERROR on failures with error codes

Step 5: Testing

Write service layer unit tests (15+ test cases)
Write controller integration tests with mocked service (10+ test cases)
Run tests and generate coverage report with JaCoCo
Ensure minimum 80% coverage

Step 6: Documentation

Create comprehensive README with:

Setup instructions (prerequisites, build, run)
API documentation with curl examples for each endpoint
Error code reference table
Design decisions rationale


Add OpenAPI/Swagger annotations (optional but recommended)
Include Docker instructions if containerization is added

CONFIGURATION EXAMPLES
application.yml:
yamlmicronaut:
  application:
    name: calculator-service
  server:
    port: 8080
    cors:
      enabled: true
      configurations:
        web:
          allowed-origins:
            - http://localhost:3000
          allowed-methods:
            - POST
            - GET
            - OPTIONS

logger:
  levels:
    com.calculator: INFO
build.gradle.kts (key dependencies):
kotlindependencies {
    implementation("io.micronaut:micronaut-validation")
    implementation("io.micronaut:micronaut-jackson-databind")
    implementation("ch.qos.logback:logback-classic")
    
    testImplementation("io.micronaut.test:micronaut-test-junit5")
    testImplementation("org.mockito.kotlin:mockito-kotlin:5.1.0")
    testImplementation("org.junit.jupiter:junit-jupiter")
}
DELIVERABLES CHECKLIST

 Fully functional Micronaut microservice with 7 calculator endpoints
 Global exception handler with custom error codes
 Structured logging with MDC and request IDs
 Service layer with business logic and validation
 Unit tests with 80%+ coverage (JaCoCo report)
 README with setup, API examples, and design rationale
 Health check endpoint for monitoring
 CORS configuration for React frontend integration
 Gradle build working with ./gradlew build

SUCCESS VALIDATION
Run these commands to verify completion:
bash# Build and test
./gradlew clean build

# Check test coverage (should show 80%+)
./gradlew jacocoTestReport
open build/reports/jacoco/test/html/index.html

# Run the service
./gradlew run

# Test endpoints
curl -X POST http://localhost:8080/api/v1/add \
  -H "Content-Type: application/json" \
  -d '{"operand1": 10, "operand2": 5}'

# Should return: {"result":15.0,"operation":"ADD","timestamp":"..."}

curl -X POST http://localhost:8080/api/v1/divide \
  -H "Content-Type: application/json" \
  -d '{"operand1": 10, "operand2": 0}'

# Should return 400: {"errorCode":"CALC_001","message":"Division by zero",...}
</file>

<file path="calculator-backend/gradle.properties">
micronautVersion=4.3.5
kotlinVersion=1.9.24
</file>

<file path="calculator-backend/gradle/wrapper/gradle-wrapper.properties">
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.5-bin.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
</file>

<file path="calculator-backend/gradlew">
#!/bin/sh

#
# Copyright © 2015-2021 the original authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

##############################################################################
#
#   Gradle start up script for POSIX generated by Gradle.
#
#   Important for running:
#
#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is
#       noncompliant, but you have some other compliant shell such as ksh or
#       bash, then to run this script, type that shell name before the whole
#       command line, like:
#
#           ksh Gradle
#
#       Busybox and similar reduced shells will NOT work, because this script
#       requires all of these POSIX shell features:
#         * functions;
#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,
#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;
#         * compound commands having a testable exit status, especially «case»;
#         * various built-in commands including «command», «set», and «ulimit».
#
#   Important for patching:
#
#   (2) This script targets any POSIX shell, so it avoids extensions provided
#       by Bash, Ksh, etc; in particular arrays are avoided.
#
#       The "traditional" practice of packing multiple parameters into a
#       space-separated string is a well documented source of bugs and security
#       problems, so this is (mostly) avoided, by progressively accumulating
#       options in "$@", and eventually passing that to Java.
#
#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,
#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;
#       see the in-line comments for details.
#
#       There are tweaks for specific operating systems such as AIX, CygWin,
#       Darwin, MinGW, and NonStop.
#
#   (3) This script is generated from the Groovy template
#       https://github.com/gradle/gradle/blob/HEAD/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt
#       within the Gradle project.
#
#       You can find Gradle at https://github.com/gradle/gradle/.
#
##############################################################################

# Attempt to set APP_HOME

# Resolve links: $0 may be a link
app_path=$0

# Need this for daisy-chained symlinks.
while
    APP_HOME=${app_path%"${app_path##*/}"}  # leaves a trailing /; empty if no leading path
    [ -h "$app_path" ]
do
    ls=$( ls -ld "$app_path" )
    link=${ls#*' -> '}
    case $link in             #(
      /*)   app_path=$link ;; #(
      *)    app_path=$APP_HOME$link ;;
    esac
done

# This is normally unused
# shellcheck disable=SC2034
APP_BASE_NAME=${0##*/}
# Discard cd standard output in case $CDPATH is set (https://github.com/gradle/gradle/issues/25036)
APP_HOME=$( cd "${APP_HOME:-./}" > /dev/null && pwd -P ) || exit

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD=maximum

warn () {
    echo "$*"
} >&2

die () {
    echo
    echo "$*"
    echo
    exit 1
} >&2

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
nonstop=false
case "$( uname )" in                #(
  CYGWIN* )         cygwin=true  ;; #(
  Darwin* )         darwin=true  ;; #(
  MSYS* | MINGW* )  msys=true    ;; #(
  NONSTOP* )        nonstop=true ;;
esac

CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar


# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD=$JAVA_HOME/jre/sh/java
    else
        JAVACMD=$JAVA_HOME/bin/java
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD=java
    if ! command -v java >/dev/null 2>&1
    then
        die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
fi

# Increase the maximum file descriptors if we can.
if ! "$cygwin" && ! "$darwin" && ! "$nonstop" ; then
    case $MAX_FD in #(
      max*)
        # In POSIX sh, ulimit -H is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        MAX_FD=$( ulimit -H -n ) ||
            warn "Could not query maximum file descriptor limit"
    esac
    case $MAX_FD in  #(
      '' | soft) :;; #(
      *)
        # In POSIX sh, ulimit -n is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        ulimit -n "$MAX_FD" ||
            warn "Could not set maximum file descriptor limit to $MAX_FD"
    esac
fi

# Collect all arguments for the java command, stacking in reverse order:
#   * args from the command line
#   * the main class name
#   * -classpath
#   * -D...appname settings
#   * --module-path (only if needed)
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.

# For Cygwin or MSYS, switch paths to Windows format before running java
if "$cygwin" || "$msys" ; then
    APP_HOME=$( cygpath --path --mixed "$APP_HOME" )
    CLASSPATH=$( cygpath --path --mixed "$CLASSPATH" )

    JAVACMD=$( cygpath --unix "$JAVACMD" )

    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    for arg do
        if
            case $arg in                                #(
              -*)   false ;;                            # don't mess with options #(
              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath
                    [ -e "$t" ] ;;                      #(
              *)    false ;;
            esac
        then
            arg=$( cygpath --path --ignore --mixed "$arg" )
        fi
        # Roll the args list around exactly as many times as the number of
        # args, so each arg winds up back in the position where it started, but
        # possibly modified.
        #
        # NB: a `for` loop captures its iteration list before it begins, so
        # changing the positional parameters here affects neither the number of
        # iterations, nor the values presented in `arg`.
        shift                   # remove old arg
        set -- "$@" "$arg"      # push replacement arg
    done
fi


# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Collect all arguments for the java command:
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, JAVA_OPTS, and optsEnvironmentVar are not allowed to contain shell fragments,
#     and any embedded shellness will be escaped.
#   * For example: A user cannot expect ${Hostname} to be expanded, as it is an environment variable and will be
#     treated as '${Hostname}' itself on the command line.

set -- \
        "-Dorg.gradle.appname=$APP_BASE_NAME" \
        -classpath "$CLASSPATH" \
        org.gradle.wrapper.GradleWrapperMain \
        "$@"

# Stop when "xargs" is not available.
if ! command -v xargs >/dev/null 2>&1
then
    die "xargs is not available"
fi

# Use "xargs" to parse quoted args.
#
# With -n1 it outputs one arg per line, with the quotes and backslashes removed.
#
# In Bash we could simply go:
#
#   readarray ARGS < <( xargs -n1 <<<"$var" ) &&
#   set -- "${ARGS[@]}" "$@"
#
# but POSIX shell has neither arrays nor command substitution, so instead we
# post-process each arg (as a line of input to sed) to backslash-escape any
# character that might be a shell metacharacter, then use eval to reverse
# that process (while maintaining the separation between arguments), and wrap
# the whole thing up as a single "set" statement.
#
# This will of course break if any of these variables contains a newline or
# an unmatched quote.
#

eval "set -- $(
        printf '%s\n' "$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS" |
        xargs -n1 |
        sed ' s~[^-[:alnum:]+,./:=@_]~\\&~g; ' |
        tr '\n' ' '
    )" '"$@"'

exec "$JAVACMD" "$@"
</file>

<file path="calculator-backend/openapi.properties">
micronaut.openapi.views.spec=swagger-ui.enabled=true,swagger-ui.theme=flattop
</file>

<file path="calculator-backend/settings.gradle.kts">
rootProject.name = "calculator-backend"
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/Application.kt">
package com.calculator

import io.micronaut.runtime.Micronaut.run
import io.swagger.v3.oas.annotations.OpenAPIDefinition
import io.swagger.v3.oas.annotations.info.Info

@OpenAPIDefinition(
    info = Info(
        title = "Calculator API",
        version = "1.0",
        description = "REST API for calculator operations: addition, subtraction, multiplication, division, power, square root, and percentage"
    )
)
class Application

fun main(args: Array<String>) {
    run(Application::class.java, *args)
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/config/AppConfig.kt">
package com.calculator.config

import io.micronaut.context.annotation.ConfigurationProperties

/**
 * Application metadata used by health endpoint.
 * Version is injected at build time via Gradle processResources.
 */
@ConfigurationProperties("app")
class AppConfig {
    var version: String = "unknown"
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/config/ErrorResponseTransformFilter.kt">
package com.calculator.config

import com.calculator.model.response.ErrorResponse
import com.fasterxml.jackson.databind.ObjectMapper
import com.fasterxml.jackson.module.kotlin.jacksonObjectMapper
import io.micronaut.http.HttpRequest
import io.micronaut.http.HttpStatus
import io.micronaut.http.MutableHttpResponse
import io.micronaut.core.order.Ordered
import io.micronaut.http.annotation.Filter
import io.micronaut.http.filter.HttpServerFilter
import io.micronaut.http.filter.ServerFilterChain
import org.reactivestreams.Publisher
import reactor.core.publisher.Flux
import java.time.Instant

/**
 * Transforms default Micronaut error responses (_embedded format) to our ErrorResponse format
 * when the error is due to invalid operand types (e.g., string "a" instead of number).
 */
@Filter("/api/**")
class ErrorResponseTransformFilter(
    private val objectMapper: ObjectMapper = jacksonObjectMapper()
) : HttpServerFilter, Ordered {

    override fun getOrder(): Int = Ordered.LOWEST_PRECEDENCE

    override fun doFilter(
        request: HttpRequest<*>,
        chain: ServerFilterChain
    ): Publisher<MutableHttpResponse<*>> {
        return Flux.from(chain.proceed(request))
            .map { response ->
                if (response.status == HttpStatus.BAD_REQUEST && response.body.isPresent) {
                    val body = response.body.get()
                    val bodyStr = when (body) {
                        is String -> body
                        else -> objectMapper.writeValueAsString(body)
                    }
                    if (bodyStr.contains("_embedded") && bodyStr.contains("errors") ||
                (bodyStr.contains("Failed to convert") && bodyStr.contains("argument"))
            ) {
                        transformToErrorResponse(bodyStr, response)
                    } else {
                        response
                    }
                } else {
                    response
                }
            }
    }

    private fun transformToErrorResponse(
        bodyStr: String,
        response: MutableHttpResponse<*>
    ): MutableHttpResponse<ErrorResponse> {
        val (errorCode, message, details) = extractFromEmbedded(bodyStr)
        val errorResponse = ErrorResponse(
            errorCode = errorCode,
            message = message,
            details = details,
            timestamp = Instant.now()
        )
        @Suppress("UNCHECKED_CAST")
        return response.body(errorResponse) as MutableHttpResponse<ErrorResponse>
    }

    private fun extractFromEmbedded(bodyStr: String): Triple<String, String, String?> {
        return try {
            val node = objectMapper.readTree(bodyStr)
            val errors = node.get("_embedded")?.get("errors")
            val firstError = errors?.get(0)
            val msg = firstError?.get("message")?.asText()
                ?: node.get("message")?.asText()
                ?: bodyStr
            val (errorCode, message) = when {
                bodyStr.contains("Double") || bodyStr.contains("deserialize") ||
                    msg.contains("Double") || msg.contains("Failed to convert") ->
                    "CALC_002" to "Invalid operand type"
                else ->
                    "CALC_006" to "Invalid request body"
            }
            Triple(errorCode, message, msg)
        } catch (e: Exception) {
            Triple("CALC_006", "Invalid request body", bodyStr)
        }
    }
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/config/RateLimitConfig.kt">
package com.calculator.config

import io.micronaut.context.annotation.ConfigurationProperties
import jakarta.validation.constraints.Max
import jakarta.validation.constraints.Min
import jakarta.validation.constraints.Positive

/**
 * Configuration for rate limiting at application level.
 * Protects against DoS, API abuse, and excessive resource consumption.
 */
@ConfigurationProperties("ratelimit")
class RateLimitConfig {

    var enabled: Boolean = true

    @setparam:Positive
    @setparam:Max(10000)
    var limit: Int = 100

    /** Window duration in seconds (e.g., 60 = per minute) */
    @setparam:Positive
    @setparam:Min(1)
    @setparam:Max(3600)
    var windowSeconds: Int = 60

    /** Paths to exclude from rate limiting (ant-style, e.g. /api/v1/health) */
    var excludePaths: List<String> = listOf("/api/v1/health")
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/config/RateLimiter.kt">
package com.calculator.config

import jakarta.inject.Singleton
import java.util.concurrent.ConcurrentHashMap

/**
 * In-memory rate limiter using fixed-window counters per bucket (e.g., IP).
 * Thread-safe; suitable for single-instance deployments.
 * For multi-instance, consider Redis-based rate limiting.
 */
@Singleton
class RateLimiter(private val config: RateLimitConfig) {

    private data class Window(val startMillis: Long, val count: Int)

    private val windows = ConcurrentHashMap<String, Window>()
    private val windowDurationMillis = config.windowSeconds * 1000L

    /**
     * Attempts to consume one request for the given bucket key (e.g., client IP).
     * @return true if allowed, false if rate limit exceeded
     */
    fun tryConsume(bucketKey: String): Boolean {
        if (!config.enabled) return true
        val now = System.currentTimeMillis()
        val allowed = BooleanArray(1) { true }
        windows.compute(bucketKey) { _, existing ->
            when {
                existing == null || now - existing.startMillis >= windowDurationMillis ->
                    Window(now, 1)
                existing.count >= config.limit -> {
                    allowed[0] = false
                    existing
                }
                else ->
                    Window(existing.startMillis, existing.count + 1)
            }
        }
        return allowed[0]
    }
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/config/RateLimitFilter.kt">
package com.calculator.config

import com.calculator.model.response.ErrorResponse
import io.micronaut.core.order.Ordered
import io.micronaut.http.HttpRequest
import io.micronaut.http.HttpResponse
import io.micronaut.http.HttpStatus
import io.micronaut.http.MutableHttpResponse
import io.micronaut.http.annotation.Filter
import io.micronaut.http.filter.HttpServerFilter
import io.micronaut.http.filter.ServerFilterChain
import org.reactivestreams.Publisher
import reactor.core.publisher.Flux
import java.time.Instant

/**
 * Rate limiting filter using Micronaut's HttpServerFilter.
 * Limits requests per client IP to protect against DoS and API abuse.
 * Returns 429 Too Many Requests with RATE_001 when limit exceeded.
 */
@Filter("/api/**")
class RateLimitFilter(
    private val rateLimiter: RateLimiter,
    private val config: RateLimitConfig
) : HttpServerFilter, Ordered {

    override fun getOrder(): Int = Ordered.HIGHEST_PRECEDENCE

    override fun doFilter(
        request: HttpRequest<*>,
        chain: ServerFilterChain
    ): Publisher<MutableHttpResponse<*>> {
        if (!config.enabled) {
            return chain.proceed(request)
        }
        val path = request.path ?: ""
        if (config.excludePaths.any { excludePath ->
            path == excludePath || (excludePath.endsWith("/**") && path.startsWith(excludePath.removeSuffix("/**")))
        }) {
            return chain.proceed(request)
        }
        val clientIp = resolveClientIp(request)
        if (!rateLimiter.tryConsume(clientIp)) {
            val errorResponse = ErrorResponse(
                errorCode = "RATE_001",
                message = "Rate limit exceeded",
                details = "Too many requests. Please try again later.",
                timestamp = Instant.now()
            )
            val response = HttpResponse.status<ErrorResponse>(HttpStatus.TOO_MANY_REQUESTS).body(errorResponse)
            @Suppress("UNCHECKED_CAST")
            return Flux.just(response as MutableHttpResponse<*>)
        }
        return chain.proceed(request)
    }

    private fun resolveClientIp(request: HttpRequest<*>): String {
        request.headers.get("X-Forwarded-For")?.split(",")?.firstOrNull()?.trim()?.let { return it }
        request.headers.get("X-Real-IP")?.trim()?.let { return it }
        val addr = request.remoteAddress
        return addr.hostString ?: addr.address?.hostAddress ?: addr.toString()
    }
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/config/SecurityHeadersFilter.kt">
package com.calculator.config

import io.micronaut.http.HttpRequest
import io.micronaut.http.MutableHttpResponse
import io.micronaut.http.annotation.Filter
import io.micronaut.http.filter.HttpServerFilter
import io.micronaut.http.filter.ServerFilterChain
import org.reactivestreams.Publisher
import reactor.core.publisher.Flux

/**
 * Adds standard HTTP security headers to all responses.
 * In Docker, Nginx also adds these; this covers standalone Micronaut (e.g. dev).
 */
@Filter("/api/**", "/swagger/**", "/swagger-ui/**")
class SecurityHeadersFilter : HttpServerFilter {

    override fun doFilter(
        request: HttpRequest<*>,
        chain: ServerFilterChain
    ): Publisher<MutableHttpResponse<*>> {
        return Flux.from(chain.proceed(request))
            .map { response ->
                response.headers
                    .add("X-Content-Type-Options", "nosniff")
                    .add("X-Frame-Options", "DENY")
                val path = request.path
                val csp = if (path.startsWith("/swagger-ui") || path.startsWith("/swagger")) {
                    "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self';"
                } else {
                    "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self';"
                }
                response.headers.add("Content-Security-Policy", csp)
                if (request.isSecure || request.headers.get("X-Forwarded-Proto") == "https") {
                    response.headers.add(
                        "Strict-Transport-Security",
                        "max-age=31536000; includeSubDomains"
                    )
                }
                response
            }
    }
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/exception/CalculatorException.kt">
package com.calculator.exception

open class CalculatorException(
    val errorCode: String,
    override val message: String,
    val details: String? = null
) : RuntimeException(message)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/exception/DivisionByZeroException.kt">
package com.calculator.exception

class DivisionByZeroException(
    message: String = "Division by zero",
    details: String? = null
) : CalculatorException("CALC_001", message, details)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/exception/GlobalExceptionHandler.kt">
package com.calculator.exception

import com.calculator.model.response.ErrorResponse
import io.micronaut.context.annotation.Requires
import io.micronaut.http.HttpRequest
import io.micronaut.http.HttpResponse
import io.micronaut.http.HttpStatus
import io.micronaut.http.annotation.Produces
import io.micronaut.http.server.exceptions.ExceptionHandler
import jakarta.inject.Singleton
import jakarta.validation.ConstraintViolationException
import java.time.Instant

@Produces
@Singleton
@Requires(classes = [CalculatorException::class, ExceptionHandler::class])
class CalculatorExceptionHandler : ExceptionHandler<CalculatorException, HttpResponse<ErrorResponse>> {

    override fun handle(request: HttpRequest<*>, exception: CalculatorException): HttpResponse<ErrorResponse> {
        val errorResponse = ErrorResponse(
            errorCode = exception.errorCode,
            message = exception.message,
            details = exception.details,
            timestamp = Instant.now()
        )
        return HttpResponse.status<ErrorResponse>(HttpStatus.BAD_REQUEST).body(errorResponse)
    }
}

@Produces
@Singleton
@Requires(classes = [ConstraintViolationException::class, ExceptionHandler::class])
@io.micronaut.context.annotation.Replaces(io.micronaut.validation.exceptions.ConstraintExceptionHandler::class)
class ConstraintViolationExceptionHandler :
    ExceptionHandler<ConstraintViolationException, HttpResponse<ErrorResponse>> {

    override fun handle(
        request: HttpRequest<*>,
        exception: ConstraintViolationException
    ): HttpResponse<ErrorResponse> {
        val details = exception.constraintViolations.joinToString { it.message }
        val errorResponse = ErrorResponse(
            errorCode = "CALC_006",
            message = "Validation error",
            details = details,
            timestamp = Instant.now()
        )
        return HttpResponse.status<ErrorResponse>(HttpStatus.BAD_REQUEST).body(errorResponse)
    }
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/exception/InvalidOperandException.kt">
package com.calculator.exception

class InvalidOperandException(
    errorCode: String,
    message: String,
    details: String? = null
) : CalculatorException(errorCode, message, details)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/exception/OverflowException.kt">
package com.calculator.exception

class OverflowException(
    message: String = "Numerical overflow or underflow",
    details: String? = null
) : CalculatorException("CALC_004", message, details)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/exception/ValidationException.kt">
package com.calculator.exception

class ValidationException(
    message: String = "Validation error",
    details: String? = null
) : CalculatorException("CALC_006", message, details)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/model/request/BinaryOperationRequest.kt">
package com.calculator.model.request

import io.micronaut.core.annotation.Introspected
import jakarta.validation.constraints.NotNull

@Introspected
data class BinaryOperationRequest(
    @field:NotNull(message = "operand1 is required")
    val operand1: Double?,

    @field:NotNull(message = "operand2 is required")
    val operand2: Double?
)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/model/request/UnaryOperationRequest.kt">
package com.calculator.model.request

import io.micronaut.core.annotation.Introspected
import jakarta.validation.constraints.NotNull

@Introspected
data class UnaryOperationRequest(
    @field:NotNull(message = "operand is required")
    val operand: Double?
)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/model/response/ErrorResponse.kt">
package com.calculator.model.response

import io.micronaut.core.annotation.Introspected
import java.time.Instant

@Introspected
data class ErrorResponse(
    val errorCode: String,
    val message: String,
    val details: String?,
    val timestamp: Instant
)
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/service/CalculatorService.kt">
package com.calculator.service

interface CalculatorService {
    fun add(operand1: Double, operand2: Double): Double
    fun subtract(operand1: Double, operand2: Double): Double
    fun multiply(operand1: Double, operand2: Double): Double
    fun divide(operand1: Double, operand2: Double): Double
    fun power(base: Double, exponent: Double): Double
    fun sqrt(operand: Double): Double
    fun percentage(value: Double, percentage: Double): Double
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/service/HealthService.kt">
package com.calculator.service

import com.calculator.config.AppConfig
import jakarta.inject.Singleton
import java.lang.management.ManagementFactory
import java.lang.management.MemoryMXBean
import java.lang.management.RuntimeMXBean
import java.lang.management.ThreadMXBean

/**
 * Provides detailed health information for monitoring and orchestration.
 * Includes JVM metrics (memory, threads) and application version.
 */
@Singleton
class HealthService(private val appConfig: AppConfig) {

    fun getHealth(): Map<String, Any> {
        val jvm = buildJvmInfo()
        return mapOf(
            "status" to "UP",
            "version" to appConfig.version,
            "jvm" to jvm
        )
    }

    private fun buildJvmInfo(): Map<String, Any> {
        val memory: MemoryMXBean = ManagementFactory.getMemoryMXBean()
        val heap = memory.heapMemoryUsage
        val nonHeap = memory.nonHeapMemoryUsage
        val runtime: RuntimeMXBean = ManagementFactory.getRuntimeMXBean()
        val threads: ThreadMXBean = ManagementFactory.getThreadMXBean()

        return mapOf(
            "memory" to mapOf(
                "heap" to mapOf(
                    "used" to heap.used,
                    "max" to (heap.max.takeIf { it >= 0 } ?: -1),
                    "committed" to heap.committed
                ),
                "nonHeap" to mapOf(
                    "used" to nonHeap.used,
                    "committed" to nonHeap.committed
                )
            ),
            "threads" to mapOf(
                "count" to threads.threadCount,
                "daemon" to threads.daemonThreadCount,
                "peak" to threads.peakThreadCount
            ),
            "uptimeSeconds" to (runtime.uptime / 1000)
        )
    }
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/service/impl/CalculatorServiceImpl.kt">
package com.calculator.service.impl

import com.calculator.exception.DivisionByZeroException
import com.calculator.exception.InvalidOperandException
import com.calculator.exception.OverflowException
import com.calculator.service.CalculatorService
import jakarta.inject.Singleton
import org.slf4j.LoggerFactory
import org.slf4j.MDC
import kotlin.math.abs
import kotlin.math.pow

@Singleton
class CalculatorServiceImpl : CalculatorService {

    private val log = LoggerFactory.getLogger(CalculatorServiceImpl::class.java)

    override fun add(operand1: Double, operand2: Double): Double {
        validateOperands(operand1, operand2, "ADD")
        val result = operand1 + operand2
        checkOverflow(result, "ADD")
        logSuccess("ADD", result)
        return result
    }

    override fun subtract(operand1: Double, operand2: Double): Double {
        validateOperands(operand1, operand2, "SUBTRACT")
        val result = operand1 - operand2
        checkOverflow(result, "SUBTRACT")
        logSuccess("SUBTRACT", result)
        return result
    }

    override fun multiply(operand1: Double, operand2: Double): Double {
        validateOperands(operand1, operand2, "MULTIPLY")
        val result = operand1 * operand2
        checkOverflow(result, "MULTIPLY")
        logSuccess("MULTIPLY", result)
        return result
    }

    override fun divide(operand1: Double, operand2: Double): Double {
        validateOperands(operand1, operand2, "DIVIDE")
        validateForDivision(operand2)
        val result = operand1 / operand2
        checkOverflow(result, "DIVIDE")
        logSuccess("DIVIDE", result)
        return result
    }

    override fun power(base: Double, exponent: Double): Double {
        validateOperands(base, exponent, "POWER")
        val result = base.pow(exponent)
        checkOverflow(result, "POWER")
        logSuccess("POWER", result)
        return result
    }

    override fun sqrt(operand: Double): Double {
        validateOperands(operand, operand, "SQRT")
        validateForSqrt(operand)
        val result = kotlin.math.sqrt(operand)
        checkOverflow(result, "SQRT")
        logSuccess("SQRT", result)
        return result
    }

    override fun percentage(value: Double, percentage: Double): Double {
        validateOperands(value, percentage, "PERCENTAGE")
        validatePercentage(percentage)
        val result = (value * percentage) / 100.0
        checkOverflow(result, "PERCENTAGE")
        logSuccess("PERCENTAGE", result)
        return result
    }

    private fun validateOperands(op1: Double, op2: Double, operation: String) {
        if (op1.isNaN() || op2.isNaN()) {
            logError(operation, "CALC_002", "Invalid operand: NaN")
            throw InvalidOperandException("CALC_002", "Invalid operand (NaN)", "Operands cannot be NaN")
        }
        if (op1.isInfinite() || op2.isInfinite()) {
            logError(operation, "CALC_002", "Invalid operand: Infinity")
            throw InvalidOperandException("CALC_002", "Invalid operand (Infinity)", "Operands cannot be Infinity")
        }
    }

    private fun validateForDivision(divisor: Double) {
        if (divisor == 0.0) {
            logError("DIVIDE", "CALC_001", "Division by zero")
            throw DivisionByZeroException("Division by zero", "Second operand cannot be zero")
        }
    }

    private fun validateForSqrt(operand: Double) {
        if (operand < 0) {
            logError("SQRT", "CALC_003", "Negative number for square root")
            throw InvalidOperandException(
                "CALC_003",
                "Negative number for square root",
                "Operand must be >= 0"
            )
        }
    }

    private fun validatePercentage(percentage: Double) {
        if (percentage < 0 || percentage > 100) {
            logError("PERCENTAGE", "CALC_005", "Invalid percentage value")
            throw InvalidOperandException(
                "CALC_005",
                "Invalid percentage value",
                "Percentage must be between 0 and 100"
            )
        }
    }

    private fun checkOverflow(result: Double, operation: String) {
        if (result.isNaN() || result.isInfinite()) {
            logError(operation, "CALC_004", "Numerical overflow/underflow")
            throw OverflowException("Numerical overflow or underflow", "Result exceeds Double limits")
        }
        if (abs(result) > Double.MAX_VALUE) {
            logError(operation, "CALC_004", "Numerical overflow")
            throw OverflowException("Numerical overflow or underflow", "Result exceeds Double.MAX_VALUE")
        }
    }

    private fun logSuccess(operation: String, result: Double) {
        val requestId = MDC.get("requestId") ?: "unknown"
        log.info("[requestId={}] Operation={} completed successfully, result={}", requestId, operation, result)
    }

    private fun logError(operation: String, errorCode: String, reason: String) {
        val requestId = MDC.get("requestId") ?: "unknown"
        log.error("[requestId={}] Operation={} failed, errorCode={}, reason={}", requestId, operation, errorCode, reason)
    }
}
</file>

<file path="calculator-backend/src/main/resources/logback.xml">
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] [requestId=%X{requestId}] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <logger name="com.calculator" level="INFO"/>

    <root level="INFO">
        <appender-ref ref="STDOUT"/>
    </root>
</configuration>
</file>

<file path="calculator-backend/src/test/kotlin/com/calculator/config/MdcFilterTest.kt">
package com.calculator.config

import com.calculator.model.request.BinaryOperationRequest
import io.micronaut.http.HttpRequest
import io.micronaut.http.HttpStatus
import io.micronaut.http.client.HttpClient
import io.micronaut.runtime.server.EmbeddedServer
import io.micronaut.test.extensions.junit5.annotation.MicronautTest
import org.junit.jupiter.api.AfterEach
import org.junit.jupiter.api.Assertions.assertEquals
import org.junit.jupiter.api.BeforeEach
import org.junit.jupiter.api.Test

@MicronautTest
class MdcFilterTest(
    private val embeddedServer: EmbeddedServer
) {

    private lateinit var client: HttpClient

    @BeforeEach
    fun setup() {
        client = HttpClient.create(embeddedServer.url)
    }

    @AfterEach
    fun tearDown() {
        client.close()
    }

    @Test
    fun `accepts valid X-Request-ID and processes request`() {
        val request = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(1.0, 2.0))
            .header("X-Request-ID", "req-abc123_xyz")
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
    }

    @Test
    fun `rejects X-Request-ID with spaces and processes request`() {
        val request = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(1.0, 2.0))
            .header("X-Request-ID", "id with spaces")
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
    }

    @Test
    fun `rejects X-Request-ID with special characters`() {
        val request = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(1.0, 2.0))
            .header("X-Request-ID", "id|with|pipes")
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
    }
}
</file>

<file path="calculator-backend/src/test/kotlin/com/calculator/config/RateLimiterTest.kt">
package com.calculator.config

import org.junit.jupiter.api.Assertions.assertFalse
import org.junit.jupiter.api.Assertions.assertTrue
import org.junit.jupiter.api.Test

class RateLimiterTest {

    @Test
    fun `rejects request when limit exceeded`() {
        val config = RateLimitConfig().apply {
            enabled = true
            limit = 2
            windowSeconds = 60
        }
        val limiter = RateLimiter(config)
        assertTrue(limiter.tryConsume("ip1"))
        assertTrue(limiter.tryConsume("ip1"))
        assertFalse(limiter.tryConsume("ip1"))
    }

    @Test
    fun `allows when disabled`() {
        val config = RateLimitConfig().apply {
            enabled = false
            limit = 1
            windowSeconds = 60
        }
        val limiter = RateLimiter(config)
        repeat(5) {
            assertTrue(limiter.tryConsume("ip1"))
        }
    }
}
</file>

<file path="calculator-backend/src/test/kotlin/com/calculator/config/RateLimitFilterTest.kt">
package com.calculator.config

import com.calculator.model.request.BinaryOperationRequest
import com.calculator.model.response.ErrorResponse
import io.micronaut.http.HttpRequest
import io.micronaut.http.HttpStatus
import io.micronaut.http.client.HttpClient
import io.micronaut.http.client.exceptions.HttpClientResponseException
import io.micronaut.runtime.server.EmbeddedServer
import io.micronaut.test.extensions.junit5.annotation.MicronautTest
import org.junit.jupiter.api.AfterEach
import org.junit.jupiter.api.Assertions.assertEquals
import org.junit.jupiter.api.Assertions.assertNotNull
import org.junit.jupiter.api.BeforeEach
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertThrows

/**
 * Integration test for rate limit filter.
 * Rate limit logic is covered by [RateLimiterTest].
 */
@MicronautTest
class RateLimitFilterTest(
    private val embeddedServer: EmbeddedServer
) {

    private lateinit var client: HttpClient

    @BeforeEach
    fun setup() {
        client = HttpClient.create(embeddedServer.url)
    }

    @AfterEach
    fun tearDown() {
        client.close()
    }

    @Test
    fun `health endpoint is excluded from rate limiting`() {
        repeat(5) {
            val response = client.toBlocking().exchange("/api/v1/health", Map::class.java)
            assertEquals(HttpStatus.OK, response.status)
        }
    }
}

@MicronautTest(environments = ["ratelimit"])
class RateLimitFilterWithLimitTest(
    private val embeddedServer: EmbeddedServer
) {

    private lateinit var client: HttpClient

    @BeforeEach
    fun setup() {
        client = HttpClient.create(embeddedServer.url)
    }

    @AfterEach
    fun tearDown() {
        client.close()
    }

    @Test
    fun `returns 429 with RATE_001 when rate limit exceeded`() {
        val request = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(1.0, 2.0))
        val first = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, first.status)
        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.TOO_MANY_REQUESTS, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("RATE_001", body.errorCode)
        assertEquals("Rate limit exceeded", body.message)
        assertNotNull(body.details)
    }

    @Test
    fun `rate limit is per IP - different X-Forwarded-For gets separate quota`() {
        val req1 = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(1.0, 2.0))
            .header("X-Forwarded-For", "192.168.1.1")
        val req2 = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(3.0, 4.0))
            .header("X-Forwarded-For", "192.168.1.2")
        val r1 = client.toBlocking().exchange(req1, Map::class.java)
        val r2 = client.toBlocking().exchange(req2, Map::class.java)
        assertEquals(HttpStatus.OK, r1.status)
        assertEquals(HttpStatus.OK, r2.status)
    }
}
</file>

<file path="calculator-backend/src/test/kotlin/com/calculator/exception/ExceptionTest.kt">
package com.calculator.exception

import org.junit.jupiter.api.Assertions.assertEquals
import org.junit.jupiter.api.Test

class ExceptionTest {

    @Test
    fun `CalculatorException has correct properties`() {
        val ex = CalculatorException("CALC_001", "Test message", "details")
        assertEquals("CALC_001", ex.errorCode)
        assertEquals("Test message", ex.message)
        assertEquals("details", ex.details)
    }

    @Test
    fun `CalculatorException with null details`() {
        val ex = CalculatorException("CALC_002", "Msg")
        assertEquals("CALC_002", ex.errorCode)
        assertEquals(null, ex.details)
    }

    @Test
    fun `ValidationException has CALC_006`() {
        val ex = ValidationException("Custom validation", "field error")
        assertEquals("CALC_006", ex.errorCode)
        assertEquals("Custom validation", ex.message)
        assertEquals("field error", ex.details)
    }

    @Test
    fun `ValidationException default constructor`() {
        val ex = ValidationException()
        assertEquals("CALC_006", ex.errorCode)
        assertEquals("Validation error", ex.message)
    }

    @Test
    fun `DivisionByZeroException has CALC_001`() {
        val ex = DivisionByZeroException("Division by zero", "operand2 is 0")
        assertEquals("CALC_001", ex.errorCode)
        assertEquals("Division by zero", ex.message)
    }

    @Test
    fun `OverflowException has CALC_004`() {
        val ex = OverflowException("Overflow", "result too large")
        assertEquals("CALC_004", ex.errorCode)
    }

    @Test
    fun `InvalidOperandException has custom errorCode`() {
        val ex = InvalidOperandException("CALC_002", "Invalid operand", "NaN")
        assertEquals("CALC_002", ex.errorCode)
        assertEquals("Invalid operand", ex.message)
        assertEquals("NaN", ex.details)
    }
}
</file>

<file path="calculator-backend/src/test/kotlin/com/calculator/service/CalculatorServiceTest.kt">
package com.calculator.service

import com.calculator.exception.DivisionByZeroException
import com.calculator.service.impl.CalculatorServiceImpl
import com.calculator.exception.InvalidOperandException
import com.calculator.exception.OverflowException
import org.junit.jupiter.api.Assertions.assertEquals
import org.junit.jupiter.api.Assertions.assertThrows
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertDoesNotThrow

class CalculatorServiceTest {

    private val calculatorService: CalculatorService = CalculatorServiceImpl()

    // Happy Path
    @Test
    fun `addition of positive numbers returns correct result`() {
        assertEquals(15.0, calculatorService.add(10.0, 5.0))
    }

    @Test
    fun `subtraction returns correct result`() {
        assertEquals(5.0, calculatorService.subtract(10.0, 5.0))
    }

    @Test
    fun `multiplication returns correct result`() {
        assertEquals(50.0, calculatorService.multiply(10.0, 5.0))
    }

    @Test
    fun `division returns correct result`() {
        assertEquals(2.0, calculatorService.divide(10.0, 5.0))
    }

    @Test
    fun `power calculation returns correct result`() {
        assertEquals(8.0, calculatorService.power(2.0, 3.0))
    }

    @Test
    fun `square root returns correct result`() {
        assertEquals(5.0, calculatorService.sqrt(25.0))
    }

    @Test
    fun `percentage calculation returns correct result`() {
        assertEquals(25.0, calculatorService.percentage(100.0, 25.0))
    }

    // Edge Cases
    @Test
    fun `addition of very large numbers detects overflow`() {
        assertThrows(OverflowException::class.java) {
            calculatorService.add(Double.MAX_VALUE, Double.MAX_VALUE)
        }
    }

    @Test
    fun `division by very small number close to zero works`() {
        assertDoesNotThrow {
            val result = calculatorService.divide(1.0, 1e-10)
            assertEquals(1e10, result, 1e5)
        }
    }

    @Test
    fun `square root of zero returns zero`() {
        assertEquals(0.0, calculatorService.sqrt(0.0))
    }

    @Test
    fun `power of zero returns one`() {
        assertEquals(1.0, calculatorService.power(5.0, 0.0))
    }

    @Test
    fun `addition with negative numbers`() {
        assertEquals(-5.0, calculatorService.add(-10.0, 5.0))
    }

    // Error Cases
    @Test
    fun `division by zero throws DivisionByZeroException`() {
        val exception = assertThrows(DivisionByZeroException::class.java) {
            calculatorService.divide(10.0, 0.0)
        }
        assertEquals("CALC_001", exception.errorCode)
    }

    @Test
    fun `square root of negative throws InvalidOperandException`() {
        val exception = assertThrows(InvalidOperandException::class.java) {
            calculatorService.sqrt(-1.0)
        }
        assertEquals("CALC_003", exception.errorCode)
    }

    @Test
    fun `NaN operand throws InvalidOperandException`() {
        assertThrows(InvalidOperandException::class.java) {
            calculatorService.add(Double.NaN, 5.0)
        }
        assertThrows(InvalidOperandException::class.java) {
            calculatorService.add(5.0, Double.NaN)
        }
    }

    @Test
    fun `Infinity operand throws InvalidOperandException`() {
        assertThrows(InvalidOperandException::class.java) {
            calculatorService.add(Double.POSITIVE_INFINITY, 5.0)
        }
        assertThrows(InvalidOperandException::class.java) {
            calculatorService.add(5.0, Double.NEGATIVE_INFINITY)
        }
    }

    @Test
    fun `percentage over 100 throws InvalidOperandException`() {
        val exception = assertThrows(InvalidOperandException::class.java) {
            calculatorService.percentage(100.0, 101.0)
        }
        assertEquals("CALC_005", exception.errorCode)
    }

    @Test
    fun `percentage under 0 throws InvalidOperandException`() {
        val exception = assertThrows(InvalidOperandException::class.java) {
            calculatorService.percentage(100.0, -1.0)
        }
        assertEquals("CALC_005", exception.errorCode)
    }

    @Test
    fun `percentage at boundary 0 works`() {
        assertEquals(0.0, calculatorService.percentage(100.0, 0.0))
    }

    @Test
    fun `percentage at boundary 100 works`() {
        assertEquals(100.0, calculatorService.percentage(100.0, 100.0))
    }
}
</file>

<file path="calculator-backend/src/test/resources/application-ratelimit.yml">
# Used when testing with environment "ratelimit" for low-limit scenarios
ratelimit:
  enabled: true
  limit: 1
  window-seconds: 60

micronaut:
  server:
    port: -1
  http:
    client:
      exception-on-error-status: false
</file>

<file path="calculator-frontend/.env.example">
VITE_API_URL=http://localhost:8080/api/v1
VITE_API_DOCS_URL=http://localhost:8080/calculator-api-1.0
</file>

<file path="calculator-frontend/.gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="calculator-frontend/coverage/base.css">
body, html {
  margin:0; padding: 0;
  height: 100%;
}
body {
    font-family: Helvetica Neue, Helvetica, Arial;
    font-size: 14px;
    color:#333;
}
.small { font-size: 12px; }
*, *:after, *:before {
  -webkit-box-sizing:border-box;
     -moz-box-sizing:border-box;
          box-sizing:border-box;
  }
h1 { font-size: 20px; margin: 0;}
h2 { font-size: 14px; }
pre {
    font: 12px/1.4 Consolas, "Liberation Mono", Menlo, Courier, monospace;
    margin: 0;
    padding: 0;
    -moz-tab-size: 2;
    -o-tab-size:  2;
    tab-size: 2;
}
a { color:#0074D9; text-decoration:none; }
a:hover { text-decoration:underline; }
.strong { font-weight: bold; }
.space-top1 { padding: 10px 0 0 0; }
.pad2y { padding: 20px 0; }
.pad1y { padding: 10px 0; }
.pad2x { padding: 0 20px; }
.pad2 { padding: 20px; }
.pad1 { padding: 10px; }
.space-left2 { padding-left:55px; }
.space-right2 { padding-right:20px; }
.center { text-align:center; }
.clearfix { display:block; }
.clearfix:after {
  content:'';
  display:block;
  height:0;
  clear:both;
  visibility:hidden;
  }
.fl { float: left; }
@media only screen and (max-width:640px) {
  .col3 { width:100%; max-width:100%; }
  .hide-mobile { display:none!important; }
}

.quiet {
  color: #7f7f7f;
  color: rgba(0,0,0,0.5);
}
.quiet a { opacity: 0.7; }

.fraction {
  font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace;
  font-size: 10px;
  color: #555;
  background: #E8E8E8;
  padding: 4px 5px;
  border-radius: 3px;
  vertical-align: middle;
}

div.path a:link, div.path a:visited { color: #333; }
table.coverage {
  border-collapse: collapse;
  margin: 10px 0 0 0;
  padding: 0;
}

table.coverage td {
  margin: 0;
  padding: 0;
  vertical-align: top;
}
table.coverage td.line-count {
    text-align: right;
    padding: 0 5px 0 20px;
}
table.coverage td.line-coverage {
    text-align: right;
    padding-right: 10px;
    min-width:20px;
}

table.coverage td span.cline-any {
    display: inline-block;
    padding: 0 5px;
    width: 100%;
}
.missing-if-branch {
    display: inline-block;
    margin-right: 5px;
    border-radius: 3px;
    position: relative;
    padding: 0 4px;
    background: #333;
    color: yellow;
}

.skip-if-branch {
    display: none;
    margin-right: 10px;
    position: relative;
    padding: 0 4px;
    background: #ccc;
    color: white;
}
.missing-if-branch .typ, .skip-if-branch .typ {
    color: inherit !important;
}
.coverage-summary {
  border-collapse: collapse;
  width: 100%;
}
.coverage-summary tr { border-bottom: 1px solid #bbb; }
.keyline-all { border: 1px solid #ddd; }
.coverage-summary td, .coverage-summary th { padding: 10px; }
.coverage-summary tbody { border: 1px solid #bbb; }
.coverage-summary td { border-right: 1px solid #bbb; }
.coverage-summary td:last-child { border-right: none; }
.coverage-summary th {
  text-align: left;
  font-weight: normal;
  white-space: nowrap;
}
.coverage-summary th.file { border-right: none !important; }
.coverage-summary th.pct { }
.coverage-summary th.pic,
.coverage-summary th.abs,
.coverage-summary td.pct,
.coverage-summary td.abs { text-align: right; }
.coverage-summary td.file { white-space: nowrap;  }
.coverage-summary td.pic { min-width: 120px !important;  }
.coverage-summary tfoot td { }

.coverage-summary .sorter {
    height: 10px;
    width: 7px;
    display: inline-block;
    margin-left: 0.5em;
    background: url(sort-arrow-sprite.png) no-repeat scroll 0 0 transparent;
}
.coverage-summary .sorted .sorter {
    background-position: 0 -20px;
}
.coverage-summary .sorted-desc .sorter {
    background-position: 0 -10px;
}
.status-line {  height: 10px; }
/* yellow */
.cbranch-no { background: yellow !important; color: #111; }
/* dark red */
.red.solid, .status-line.low, .low .cover-fill { background:#C21F39 }
.low .chart { border:1px solid #C21F39 }
.highlighted,
.highlighted .cstat-no, .highlighted .fstat-no, .highlighted .cbranch-no{
  background: #C21F39 !important;
}
/* medium red */
.cstat-no, .fstat-no, .cbranch-no, .cbranch-no { background:#F6C6CE }
/* light red */
.low, .cline-no { background:#FCE1E5 }
/* light green */
.high, .cline-yes { background:rgb(230,245,208) }
/* medium green */
.cstat-yes { background:rgb(161,215,106) }
/* dark green */
.status-line.high, .high .cover-fill { background:rgb(77,146,33) }
.high .chart { border:1px solid rgb(77,146,33) }
/* dark yellow (gold) */
.status-line.medium, .medium .cover-fill { background: #f9cd0b; }
.medium .chart { border:1px solid #f9cd0b; }
/* light yellow */
.medium { background: #fff4c2; }

.cstat-skip { background: #ddd; color: #111; }
.fstat-skip { background: #ddd; color: #111 !important; }
.cbranch-skip { background: #ddd !important; color: #111; }

span.cline-neutral { background: #eaeaea; }

.coverage-summary td.empty {
    opacity: .5;
    padding-top: 4px;
    padding-bottom: 4px;
    line-height: 1;
    color: #888;
}

.cover-fill, .cover-empty {
  display:inline-block;
  height: 12px;
}
.chart {
  line-height: 0;
}
.cover-empty {
    background: white;
}
.cover-full {
    border-right: none !important;
}
pre.prettyprint {
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}
.com { color: #999 !important; }
.ignore-none { color: #999; font-weight: normal; }

.wrapper {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 auto -48px;
}
.footer, .push {
  height: 48px;
}
</file>

<file path="calculator-frontend/coverage/block-navigation.js">
/* eslint-disable */
var jumpToCode = (function init() {
    // Classes of code we would like to highlight in the file view
    var missingCoverageClasses = ['.cbranch-no', '.cstat-no', '.fstat-no'];

    // Elements to highlight in the file listing view
    var fileListingElements = ['td.pct.low'];

    // We don't want to select elements that are direct descendants of another match
    var notSelector = ':not(' + missingCoverageClasses.join('):not(') + ') > '; // becomes `:not(a):not(b) > `

    // Selector that finds elements on the page to which we can jump
    var selector =
        fileListingElements.join(', ') +
        ', ' +
        notSelector +
        missingCoverageClasses.join(', ' + notSelector); // becomes `:not(a):not(b) > a, :not(a):not(b) > b`

    // The NodeList of matching elements
    var missingCoverageElements = document.querySelectorAll(selector);

    var currentIndex;

    function toggleClass(index) {
        missingCoverageElements
            .item(currentIndex)
            .classList.remove('highlighted');
        missingCoverageElements.item(index).classList.add('highlighted');
    }

    function makeCurrent(index) {
        toggleClass(index);
        currentIndex = index;
        missingCoverageElements.item(index).scrollIntoView({
            behavior: 'smooth',
            block: 'center',
            inline: 'center'
        });
    }

    function goToPrevious() {
        var nextIndex = 0;
        if (typeof currentIndex !== 'number' || currentIndex === 0) {
            nextIndex = missingCoverageElements.length - 1;
        } else if (missingCoverageElements.length > 1) {
            nextIndex = currentIndex - 1;
        }

        makeCurrent(nextIndex);
    }

    function goToNext() {
        var nextIndex = 0;

        if (
            typeof currentIndex === 'number' &&
            currentIndex < missingCoverageElements.length - 1
        ) {
            nextIndex = currentIndex + 1;
        }

        makeCurrent(nextIndex);
    }

    return function jump(event) {
        if (
            document.getElementById('fileSearch') === document.activeElement &&
            document.activeElement != null
        ) {
            // if we're currently focused on the search input, we don't want to navigate
            return;
        }

        switch (event.which) {
            case 78: // n
            case 74: // j
                goToNext();
                break;
            case 66: // b
            case 75: // k
            case 80: // p
                goToPrevious();
                break;
        }
    };
})();
window.addEventListener('keydown', jumpToCode);
</file>

<file path="calculator-frontend/coverage/prettify.css">
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}pre.prettyprint{padding:2px;border:1px solid #888}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</file>

<file path="calculator-frontend/coverage/prettify.js">
/* eslint-disable */
window.PR_SHOULD_USE_CONTINUATION=true;(function(){var h=["break,continue,do,else,for,if,return,while"];var u=[h,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"];var p=[u,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"];var l=[p,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"];var x=[p,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"];var R=[x,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"];var r="all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes";var w=[p,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"];var s="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END";var I=[h,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"];var f=[h,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"];var H=[h,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"];var A=[l,R,w,s+I,f,H];var e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/;var C="str";var z="kwd";var j="com";var O="typ";var G="lit";var L="pun";var F="pln";var m="tag";var E="dec";var J="src";var P="atn";var n="atv";var N="nocode";var M="(?:^^\\.?|[+-]|\\!|\\!=|\\!==|\\#|\\%|\\%=|&|&&|&&=|&=|\\(|\\*|\\*=|\\+=|\\,|\\-=|\\->|\\/|\\/=|:|::|\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\@|\\[|\\^|\\^=|\\^\\^|\\^\\^=|\\{|\\||\\|=|\\|\\||\\|\\|=|\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*";function k(Z){var ad=0;var S=false;var ac=false;for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.ignoreCase){ac=true}else{if(/[a-z]/i.test(ae.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){S=true;ac=false;break}}}var Y={b:8,t:9,n:10,v:11,f:12,r:13};function ab(ah){var ag=ah.charCodeAt(0);if(ag!==92){return ag}var af=ah.charAt(1);ag=Y[af];if(ag){return ag}else{if("0"<=af&&af<="7"){return parseInt(ah.substring(1),8)}else{if(af==="u"||af==="x"){return parseInt(ah.substring(2),16)}else{return ah.charCodeAt(1)}}}}function T(af){if(af<32){return(af<16?"\\x0":"\\x")+af.toString(16)}var ag=String.fromCharCode(af);if(ag==="\\"||ag==="-"||ag==="["||ag==="]"){ag="\\"+ag}return ag}function X(am){var aq=am.substring(1,am.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g"));var ak=[];var af=[];var ao=aq[0]==="^";for(var ar=ao?1:0,aj=aq.length;ar<aj;++ar){var ah=aq[ar];if(/\\[bdsw]/i.test(ah)){ak.push(ah)}else{var ag=ab(ah);var al;if(ar+2<aj&&"-"===aq[ar+1]){al=ab(aq[ar+2]);ar+=2}else{al=ag}af.push([ag,al]);if(!(al<65||ag>122)){if(!(al<65||ag>90)){af.push([Math.max(65,ag)|32,Math.min(al,90)|32])}if(!(al<97||ag>122)){af.push([Math.max(97,ag)&~32,Math.min(al,122)&~32])}}}}af.sort(function(av,au){return(av[0]-au[0])||(au[1]-av[1])});var ai=[];var ap=[NaN,NaN];for(var ar=0;ar<af.length;++ar){var at=af[ar];if(at[0]<=ap[1]+1){ap[1]=Math.max(ap[1],at[1])}else{ai.push(ap=at)}}var an=["["];if(ao){an.push("^")}an.push.apply(an,ak);for(var ar=0;ar<ai.length;++ar){var at=ai[ar];an.push(T(at[0]));if(at[1]>at[0]){if(at[1]+1>at[0]){an.push("-")}an.push(T(at[1]))}}an.push("]");return an.join("")}function W(al){var aj=al.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g"));var ah=aj.length;var an=[];for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag==="("){++am}else{if("\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){an[af]=-1}}}}for(var ak=1;ak<an.length;++ak){if(-1===an[ak]){an[ak]=++ad}}for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag==="("){++am;if(an[am]===undefined){aj[ak]="(?:"}}else{if("\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){aj[ak]="\\"+an[am]}}}}for(var ak=0,am=0;ak<ah;++ak){if("^"===aj[ak]&&"^"!==aj[ak+1]){aj[ak]=""}}if(al.ignoreCase&&S){for(var ak=0;ak<ah;++ak){var ag=aj[ak];var ai=ag.charAt(0);if(ag.length>=2&&ai==="["){aj[ak]=X(ag)}else{if(ai!=="\\"){aj[ak]=ag.replace(/[a-zA-Z]/g,function(ao){var ap=ao.charCodeAt(0);return"["+String.fromCharCode(ap&~32,ap|32)+"]"})}}}}return aj.join("")}var aa=[];for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.global||ae.multiline){throw new Error(""+ae)}aa.push("(?:"+W(ae)+")")}return new RegExp(aa.join("|"),ac?"gi":"g")}function a(V){var U=/(?:^|\s)nocode(?:\s|$)/;var X=[];var T=0;var Z=[];var W=0;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=document.defaultView.getComputedStyle(V,null).getPropertyValue("white-space")}}var Y=S&&"pre"===S.substring(0,3);function aa(ab){switch(ab.nodeType){case 1:if(U.test(ab.className)){return}for(var ae=ab.firstChild;ae;ae=ae.nextSibling){aa(ae)}var ad=ab.nodeName;if("BR"===ad||"LI"===ad){X[W]="\n";Z[W<<1]=T++;Z[(W++<<1)|1]=ab}break;case 3:case 4:var ac=ab.nodeValue;if(ac.length){if(!Y){ac=ac.replace(/[ \t\r\n]+/g," ")}else{ac=ac.replace(/\r\n?/g,"\n")}X[W]=ac;Z[W<<1]=T;T+=ac.length;Z[(W++<<1)|1]=ab}break}}aa(V);return{sourceCode:X.join("").replace(/\n$/,""),spans:Z}}function B(S,U,W,T){if(!U){return}var V={sourceCode:U,basePos:S};W(V);T.push.apply(T,V.decorations)}var v=/\S/;function o(S){var V=undefined;for(var U=S.firstChild;U;U=U.nextSibling){var T=U.nodeType;V=(T===1)?(V?S:U):(T===3)?(v.test(U.nodeValue)?S:V):V}return V===S?undefined:V}function g(U,T){var S={};var V;(function(){var ad=U.concat(T);var ah=[];var ag={};for(var ab=0,Z=ad.length;ab<Z;++ab){var Y=ad[ab];var ac=Y[3];if(ac){for(var ae=ac.length;--ae>=0;){S[ac.charAt(ae)]=Y}}var af=Y[1];var aa=""+af;if(!ag.hasOwnProperty(aa)){ah.push(af);ag[aa]=null}}ah.push(/[\0-\uffff]/);V=k(ah)})();var X=T.length;var W=function(ah){var Z=ah.sourceCode,Y=ah.basePos;var ad=[Y,F];var af=0;var an=Z.match(V)||[];var aj={};for(var ae=0,aq=an.length;ae<aq;++ae){var ag=an[ae];var ap=aj[ag];var ai=void 0;var am;if(typeof ap==="string"){am=false}else{var aa=S[ag.charAt(0)];if(aa){ai=ag.match(aa[1]);ap=aa[0]}else{for(var ao=0;ao<X;++ao){aa=T[ao];ai=ag.match(aa[1]);if(ai){ap=aa[0];break}}if(!ai){ap=F}}am=ap.length>=5&&"lang-"===ap.substring(0,5);if(am&&!(ai&&typeof ai[1]==="string")){am=false;ap=J}if(!am){aj[ag]=ap}}var ab=af;af+=ag.length;if(!am){ad.push(Y+ab,ap)}else{var al=ai[1];var ak=ag.indexOf(al);var ac=ak+al.length;if(ai[2]){ac=ag.length-ai[2].length;ak=ac-al.length}var ar=ap.substring(5);B(Y+ab,ag.substring(0,ak),W,ad);B(Y+ab+ak,al,q(ar,al),ad);B(Y+ab+ac,ag.substring(ac),W,ad)}}ah.decorations=ad};return W}function i(T){var W=[],S=[];if(T.tripleQuotedStrings){W.push([C,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""])}else{if(T.multiLineStrings){W.push([C,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"])}else{W.push([C,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"])}}if(T.verbatimStrings){S.push([C,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null])}var Y=T.hashComments;if(Y){if(T.cStyleComments){if(Y>1){W.push([j,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"])}else{W.push([j,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"])}S.push([C,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,null])}else{W.push([j,/^#[^\r\n]*/,null,"#"])}}if(T.cStyleComments){S.push([j,/^\/\/[^\r\n]*/,null]);S.push([j,/^\/\*[\s\S]*?(?:\*\/|$)/,null])}if(T.regexLiterals){var X=("/(?=[^/*])(?:[^/\\x5B\\x5C]|\\x5C[\\s\\S]|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S])*(?:\\x5D|$))+/");S.push(["lang-regex",new RegExp("^"+M+"("+X+")")])}var V=T.types;if(V){S.push([O,V])}var U=(""+T.keywords).replace(/^ | $/g,"");if(U.length){S.push([z,new RegExp("^(?:"+U.replace(/[\s,]+/g,"|")+")\\b"),null])}W.push([F,/^\s+/,null," \r\n\t\xA0"]);S.push([G,/^@[a-z_$][a-z_$@0-9]*/i,null],[O,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[F,/^[a-z_$][a-z_$@0-9]*/i,null],[G,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[F,/^\\[\s\S]?/,null],[L,/^.[^\s\w\.$@\'\"\`\/\#\\]*/,null]);return g(W,S)}var K=i({keywords:A,hashComments:true,cStyleComments:true,multiLineStrings:true,regexLiterals:true});function Q(V,ag){var U=/(?:^|\s)nocode(?:\s|$)/;var ab=/\r\n?|\n/;var ac=V.ownerDocument;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=ac.defaultView.getComputedStyle(V,null).getPropertyValue("white-space")}}var Z=S&&"pre"===S.substring(0,3);var af=ac.createElement("LI");while(V.firstChild){af.appendChild(V.firstChild)}var W=[af];function ae(al){switch(al.nodeType){case 1:if(U.test(al.className)){break}if("BR"===al.nodeName){ad(al);if(al.parentNode){al.parentNode.removeChild(al)}}else{for(var an=al.firstChild;an;an=an.nextSibling){ae(an)}}break;case 3:case 4:if(Z){var am=al.nodeValue;var aj=am.match(ab);if(aj){var ai=am.substring(0,aj.index);al.nodeValue=ai;var ah=am.substring(aj.index+aj[0].length);if(ah){var ak=al.parentNode;ak.insertBefore(ac.createTextNode(ah),al.nextSibling)}ad(al);if(!ai){al.parentNode.removeChild(al)}}}break}}function ad(ak){while(!ak.nextSibling){ak=ak.parentNode;if(!ak){return}}function ai(al,ar){var aq=ar?al.cloneNode(false):al;var ao=al.parentNode;if(ao){var ap=ai(ao,1);var an=al.nextSibling;ap.appendChild(aq);for(var am=an;am;am=an){an=am.nextSibling;ap.appendChild(am)}}return aq}var ah=ai(ak.nextSibling,0);for(var aj;(aj=ah.parentNode)&&aj.nodeType===1;){ah=aj}W.push(ah)}for(var Y=0;Y<W.length;++Y){ae(W[Y])}if(ag===(ag|0)){W[0].setAttribute("value",ag)}var aa=ac.createElement("OL");aa.className="linenums";var X=Math.max(0,((ag-1))|0)||0;for(var Y=0,T=W.length;Y<T;++Y){af=W[Y];af.className="L"+((Y+X)%10);if(!af.firstChild){af.appendChild(ac.createTextNode("\xA0"))}aa.appendChild(af)}V.appendChild(aa)}function D(ac){var aj=/\bMSIE\b/.test(navigator.userAgent);var am=/\n/g;var al=ac.sourceCode;var an=al.length;var V=0;var aa=ac.spans;var T=aa.length;var ah=0;var X=ac.decorations;var Y=X.length;var Z=0;X[Y]=an;var ar,aq;for(aq=ar=0;aq<Y;){if(X[aq]!==X[aq+2]){X[ar++]=X[aq++];X[ar++]=X[aq++]}else{aq+=2}}Y=ar;for(aq=ar=0;aq<Y;){var at=X[aq];var ab=X[aq+1];var W=aq+2;while(W+2<=Y&&X[W+1]===ab){W+=2}X[ar++]=at;X[ar++]=ab;aq=W}Y=X.length=ar;var ae=null;while(ah<T){var af=aa[ah];var S=aa[ah+2]||an;var ag=X[Z];var ap=X[Z+2]||an;var W=Math.min(S,ap);var ak=aa[ah+1];var U;if(ak.nodeType!==1&&(U=al.substring(V,W))){if(aj){U=U.replace(am,"\r")}ak.nodeValue=U;var ai=ak.ownerDocument;var ao=ai.createElement("SPAN");ao.className=X[Z+1];var ad=ak.parentNode;ad.replaceChild(ao,ak);ao.appendChild(ak);if(V<S){aa[ah+1]=ak=ai.createTextNode(al.substring(W,S));ad.insertBefore(ak,ao.nextSibling)}}V=W;if(V>=S){ah+=2}if(V>=ap){Z+=2}}}var t={};function c(U,V){for(var S=V.length;--S>=0;){var T=V[S];if(!t.hasOwnProperty(T)){t[T]=U}else{if(window.console){console.warn("cannot override language handler %s",T)}}}}function q(T,S){if(!(T&&t.hasOwnProperty(T))){T=/^\s*</.test(S)?"default-markup":"default-code"}return t[T]}c(K,["default-code"]);c(g([],[[F,/^[^<?]+/],[E,/^<!\w[^>]*(?:>|$)/],[j,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[L,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);c(g([[F,/^[\s]+/,null," \t\r\n"],[n,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[[m,/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],[P,/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[L,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]);c(g([],[[n,/^[\s\S]+/]]),["uq.val"]);c(i({keywords:l,hashComments:true,cStyleComments:true,types:e}),["c","cc","cpp","cxx","cyc","m"]);c(i({keywords:"null,true,false"}),["json"]);c(i({keywords:R,hashComments:true,cStyleComments:true,verbatimStrings:true,types:e}),["cs"]);c(i({keywords:x,cStyleComments:true}),["java"]);c(i({keywords:H,hashComments:true,multiLineStrings:true}),["bsh","csh","sh"]);c(i({keywords:I,hashComments:true,multiLineStrings:true,tripleQuotedStrings:true}),["cv","py"]);c(i({keywords:s,hashComments:true,multiLineStrings:true,regexLiterals:true}),["perl","pl","pm"]);c(i({keywords:f,hashComments:true,multiLineStrings:true,regexLiterals:true}),["rb"]);c(i({keywords:w,cStyleComments:true,regexLiterals:true}),["js"]);c(i({keywords:r,hashComments:3,cStyleComments:true,multilineStrings:true,tripleQuotedStrings:true,regexLiterals:true}),["coffee"]);c(g([],[[C,/^[\s\S]+/]]),["regex"]);function d(V){var U=V.langExtension;try{var S=a(V.sourceNode);var T=S.sourceCode;V.sourceCode=T;V.spans=S.spans;V.basePos=0;q(U,T)(V);D(V)}catch(W){if("console" in window){console.log(W&&W.stack?W.stack:W)}}}function y(W,V,U){var S=document.createElement("PRE");S.innerHTML=W;if(U){Q(S,U)}var T={langExtension:V,numberLines:U,sourceNode:S};d(T);return S.innerHTML}function b(ad){function Y(af){return document.getElementsByTagName(af)}var ac=[Y("pre"),Y("code"),Y("xmp")];var T=[];for(var aa=0;aa<ac.length;++aa){for(var Z=0,V=ac[aa].length;Z<V;++Z){T.push(ac[aa][Z])}}ac=null;var W=Date;if(!W.now){W={now:function(){return +(new Date)}}}var X=0;var S;var ab=/\blang(?:uage)?-([\w.]+)(?!\S)/;var ae=/\bprettyprint\b/;function U(){var ag=(window.PR_SHOULD_USE_CONTINUATION?W.now()+250:Infinity);for(;X<T.length&&W.now()<ag;X++){var aj=T[X];var ai=aj.className;if(ai.indexOf("prettyprint")>=0){var ah=ai.match(ab);var am;if(!ah&&(am=o(aj))&&"CODE"===am.tagName){ah=am.className.match(ab)}if(ah){ah=ah[1]}var al=false;for(var ak=aj.parentNode;ak;ak=ak.parentNode){if((ak.tagName==="pre"||ak.tagName==="code"||ak.tagName==="xmp")&&ak.className&&ak.className.indexOf("prettyprint")>=0){al=true;break}}if(!al){var af=aj.className.match(/\blinenums\b(?::(\d+))?/);af=af?af[1]&&af[1].length?+af[1]:true:false;if(af){Q(aj,af)}S={langExtension:ah,sourceNode:aj,numberLines:af};d(S)}}}if(X<T.length){setTimeout(U,250)}else{if(ad){ad()}}}U()}window.prettyPrintOne=y;window.prettyPrint=b;window.PR={createSimpleLexer:g,registerLangHandler:c,sourceDecorator:i,PR_ATTRIB_NAME:P,PR_ATTRIB_VALUE:n,PR_COMMENT:j,PR_DECLARATION:E,PR_KEYWORD:z,PR_LITERAL:G,PR_NOCODE:N,PR_PLAIN:F,PR_PUNCTUATION:L,PR_SOURCE:J,PR_STRING:C,PR_TAG:m,PR_TYPE:O}})();PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_DECLARATION,/^<!\w[^>]*(?:>|$)/],[PR.PR_COMMENT,/^<\!--[\s\S]*?(?:-\->|$)/],[PR.PR_PUNCTUATION,/^(?:<[%?]|[%?]>)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-handlebars",/^<script\b[^>]*type\s*=\s*['"]?text\/x-handlebars-template['"]?\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i],[PR.PR_DECLARATION,/^{{[#^>/]?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{&?\s*[\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{{>?\s*[\w.][^}]*}}}/],[PR.PR_COMMENT,/^{{![^}]*}}/]]),["handlebars","hbs"]);PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \t\r\n\f]+/,null," \t\r\n\f"]],[[PR.PR_STRING,/^\"(?:[^\n\r\f\\\"]|\\(?:\r\n?|\n|\f)|\\[\s\S])*\"/,null],[PR.PR_STRING,/^\'(?:[^\n\r\f\\\']|\\(?:\r\n?|\n|\f)|\\[\s\S])*\'/,null],["lang-css-str",/^url\(([^\)\"\']*)\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\!important|@import|@page|@media|@charset|inherit)(?=[^\-\w]|$)/i,null],["lang-css-kw",/^(-?(?:[_a-z]|(?:\\[0-9a-f]+ ?))(?:[_a-z0-9\-]|\\(?:\\[0-9a-f]+ ?))*)\s*:/i],[PR.PR_COMMENT,/^\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\d+|\d*\.\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\s\w\'\"]+/]]),["css"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i]]),["css-kw"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\)\"\']+/]]),["css-str"]);
</file>

<file path="calculator-frontend/coverage/sorter.js">
/* eslint-disable */
var addSorting = (function() {
    'use strict';
    var cols,
        currentSort = {
            index: 0,
            desc: false
        };

    // returns the summary table element
    function getTable() {
        return document.querySelector('.coverage-summary');
    }
    // returns the thead element of the summary table
    function getTableHeader() {
        return getTable().querySelector('thead tr');
    }
    // returns the tbody element of the summary table
    function getTableBody() {
        return getTable().querySelector('tbody');
    }
    // returns the th element for nth column
    function getNthColumn(n) {
        return getTableHeader().querySelectorAll('th')[n];
    }

    function onFilterInput() {
        const searchValue = document.getElementById('fileSearch').value;
        const rows = document.getElementsByTagName('tbody')[0].children;

        // Try to create a RegExp from the searchValue. If it fails (invalid regex),
        // it will be treated as a plain text search
        let searchRegex;
        try {
            searchRegex = new RegExp(searchValue, 'i'); // 'i' for case-insensitive
        } catch (error) {
            searchRegex = null;
        }

        for (let i = 0; i < rows.length; i++) {
            const row = rows[i];
            let isMatch = false;

            if (searchRegex) {
                // If a valid regex was created, use it for matching
                isMatch = searchRegex.test(row.textContent);
            } else {
                // Otherwise, fall back to the original plain text search
                isMatch = row.textContent
                    .toLowerCase()
                    .includes(searchValue.toLowerCase());
            }

            row.style.display = isMatch ? '' : 'none';
        }
    }

    // loads the search box
    function addSearchBox() {
        var template = document.getElementById('filterTemplate');
        var templateClone = template.content.cloneNode(true);
        templateClone.getElementById('fileSearch').oninput = onFilterInput;
        template.parentElement.appendChild(templateClone);
    }

    // loads all columns
    function loadColumns() {
        var colNodes = getTableHeader().querySelectorAll('th'),
            colNode,
            cols = [],
            col,
            i;

        for (i = 0; i < colNodes.length; i += 1) {
            colNode = colNodes[i];
            col = {
                key: colNode.getAttribute('data-col'),
                sortable: !colNode.getAttribute('data-nosort'),
                type: colNode.getAttribute('data-type') || 'string'
            };
            cols.push(col);
            if (col.sortable) {
                col.defaultDescSort = col.type === 'number';
                colNode.innerHTML =
                    colNode.innerHTML + '<span class="sorter"></span>';
            }
        }
        return cols;
    }
    // attaches a data attribute to every tr element with an object
    // of data values keyed by column name
    function loadRowData(tableRow) {
        var tableCols = tableRow.querySelectorAll('td'),
            colNode,
            col,
            data = {},
            i,
            val;
        for (i = 0; i < tableCols.length; i += 1) {
            colNode = tableCols[i];
            col = cols[i];
            val = colNode.getAttribute('data-value');
            if (col.type === 'number') {
                val = Number(val);
            }
            data[col.key] = val;
        }
        return data;
    }
    // loads all row data
    function loadData() {
        var rows = getTableBody().querySelectorAll('tr'),
            i;

        for (i = 0; i < rows.length; i += 1) {
            rows[i].data = loadRowData(rows[i]);
        }
    }
    // sorts the table using the data for the ith column
    function sortByIndex(index, desc) {
        var key = cols[index].key,
            sorter = function(a, b) {
                a = a.data[key];
                b = b.data[key];
                return a < b ? -1 : a > b ? 1 : 0;
            },
            finalSorter = sorter,
            tableBody = document.querySelector('.coverage-summary tbody'),
            rowNodes = tableBody.querySelectorAll('tr'),
            rows = [],
            i;

        if (desc) {
            finalSorter = function(a, b) {
                return -1 * sorter(a, b);
            };
        }

        for (i = 0; i < rowNodes.length; i += 1) {
            rows.push(rowNodes[i]);
            tableBody.removeChild(rowNodes[i]);
        }

        rows.sort(finalSorter);

        for (i = 0; i < rows.length; i += 1) {
            tableBody.appendChild(rows[i]);
        }
    }
    // removes sort indicators for current column being sorted
    function removeSortIndicators() {
        var col = getNthColumn(currentSort.index),
            cls = col.className;

        cls = cls.replace(/ sorted$/, '').replace(/ sorted-desc$/, '');
        col.className = cls;
    }
    // adds sort indicators for current column being sorted
    function addSortIndicators() {
        getNthColumn(currentSort.index).className += currentSort.desc
            ? ' sorted-desc'
            : ' sorted';
    }
    // adds event listeners for all sorter widgets
    function enableUI() {
        var i,
            el,
            ithSorter = function ithSorter(i) {
                var col = cols[i];

                return function() {
                    var desc = col.defaultDescSort;

                    if (currentSort.index === i) {
                        desc = !currentSort.desc;
                    }
                    sortByIndex(i, desc);
                    removeSortIndicators();
                    currentSort.index = i;
                    currentSort.desc = desc;
                    addSortIndicators();
                };
            };
        for (i = 0; i < cols.length; i += 1) {
            if (cols[i].sortable) {
                // add the click event handler on the th so users
                // dont have to click on those tiny arrows
                el = getNthColumn(i).querySelector('.sorter').parentElement;
                if (el.addEventListener) {
                    el.addEventListener('click', ithSorter(i));
                } else {
                    el.attachEvent('onclick', ithSorter(i));
                }
            }
        }
    }
    // adds sorting functionality to the UI
    return function() {
        if (!getTable()) {
            return;
        }
        cols = loadColumns();
        loadData();
        addSearchBox();
        addSortIndicators();
        enableUI();
    };
})();

window.addEventListener('load', addSorting);
</file>

<file path="calculator-frontend/e2e/calculator.spec.ts">
import { test, expect } from '@playwright/test'

test.describe('Calculator E2E', () => {
  test('should perform basic addition', async ({ page }) => {
    await page.goto('/')
    await page.getByRole('button', { name: '5' }).click()
    await page.getByRole('button', { name: '+', exact: true }).click()
    await page.getByRole('button', { name: '3' }).click()
    await page.getByRole('button', { name: '=' }).click()
    await expect(page.getByLabel(/display/i).getByText('8')).toBeVisible({ timeout: 10000 })
  })

  test('should handle decimal numbers', async ({ page }) => {
    await page.goto('/')
    await page.getByRole('button', { name: '3' }).click()
    await page.getByRole('button', { name: '.' }).click()
    await page.getByRole('button', { name: '1' }).click()
    await page.getByRole('button', { name: '4' }).click()
    await page.getByRole('button', { name: '+', exact: true }).click()
    await page.getByRole('button', { name: '2' }).click()
    await page.getByRole('button', { name: '.' }).click()
    await page.getByRole('button', { name: '8' }).click()
    await page.getByRole('button', { name: '6' }).click()
    await page.getByRole('button', { name: '=' }).click()
    await expect(page.getByLabel(/display/i).getByText('6')).toBeVisible({ timeout: 10000 })
  })

  test('should show error for division by zero', async ({ page }) => {
    await page.goto('/')
    await page.getByRole('button', { name: '1' }).click()
    await page.getByRole('button', { name: '0' }).click()
    await page.getByRole('button', { name: '÷' }).click()
    await page.getByRole('button', { name: '0' }).click()
    await page.getByRole('button', { name: '=' }).click()
    await expect(page.getByText(/cannot divide by zero/i)).toBeVisible({ timeout: 5000 })
  })

  test('should clear calculator with AC', async ({ page }) => {
    await page.goto('/')
    await page.getByRole('button', { name: '9' }).click()
    await page.getByRole('button', { name: 'AC' }).click()
    await expect(page.getByLabel(/display/i).getByText('0')).toBeVisible()
  })

  test('should support keyboard input', async ({ page }) => {
    await page.goto('/')
    await page.getByRole('application', { name: 'Calculator' }).click()
    await page.keyboard.press('8')
    await page.keyboard.press('1')
    await expect(page.getByLabel(/display/i).getByText('81')).toBeVisible({ timeout: 5000 })
  })

  test('should be responsive on mobile', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 })
    await page.goto('/')
    await expect(page.getByRole('application', { name: 'Calculator' })).toBeVisible()
    await expect(page.getByRole('button', { name: '5' })).toBeVisible()
  })
})
</file>

<file path="calculator-frontend/eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="calculator-frontend/front_prompt.md">
PROJECT CONTEXT
Full-stack calculator application with separated architecture: React (TypeScript) frontend consuming a REST API backend (Kotlin/Micronaut microservice). The frontend provides an intuitive, modern calculator interface styled after iOS/macOS calculators, handling all user interactions and API communication.
Backend API Documentation: Available at http://localhost:8080/calculator-api-1.0
ROLE AND RESPONSIBILITY
You are acting as: Frontend Developer (React/TypeScript)
Technical stack:

React 18+ with TypeScript
Vite as build tool
Tailwind CSS for styling
Built-in React hooks (useState, useReducer, useEffect, useCallback)
Axios for HTTP requests
Vitest + React Testing Library for unit/integration tests
Playwright for end-to-end tests

PRIMARY OBJECTIVE
Build a responsive, accessible calculator UI in React + TypeScript that consumes the backend API (http://localhost:8080/api/v1/*) to perform arithmetic operations. The interface should mirror iOS/macOS calculator design with smooth animations, input validation, error handling, and comprehensive test coverage.
TECHNICAL SPECIFICATIONS
Backend API Integration (Already Built)
API Documentation: http://localhost:8080/calculator-api-1.0
The backend exposes these endpoints:
POST /api/v1/add         - { operand1: number, operand2: number }
POST /api/v1/subtract    - { operand1: number, operand2: number }
POST /api/v1/multiply    - { operand1: number, operand2: number }
POST /api/v1/divide      - { operand1: number, operand2: number }
POST /api/v1/power       - { operand1: number, operand2: number }
POST /api/v1/sqrt        - { operand: number }
POST /api/v1/percentage  - { operand1: number, operand2: number }
Success Response: { result: number, operation: string, timestamp: string }
Error Response: { errorCode: string, message: string, details?: string, timestamp: string }
Error Codes to Handle:

CALC_001: Division by zero
CALC_002: Invalid operand (NaN, Infinity)
CALC_003: Negative number for square root
CALC_004: Numerical overflow/underflow
CALC_005: Invalid percentage value
CALC_006: Validation error

Note: For detailed API specifications, schema definitions, and examples, refer to the interactive documentation at http://localhost:8080/calculator-api-1.0 once the backend service is running.
Component Architecture
src/
├── components/
│   ├── Calculator/
│   │   ├── Calculator.tsx          // Main container component
│   │   ├── Calculator.test.tsx
│   │   ├── Display.tsx             // Result display
│   │   ├── Display.test.tsx
│   │   ├── Keypad.tsx              // Button grid
│   │   ├── Keypad.test.tsx
│   │   ├── Button.tsx              // Individual button
│   │   └── Button.test.tsx
│   ├── ErrorBoundary/
│   │   └── ErrorBoundary.tsx       // Global error handling
│   └── Loading/
│       └── Spinner.tsx             // Loading state
├── hooks/
│   ├── useCalculator.ts            // Main calculator logic hook
│   ├── useCalculator.test.ts
│   └── useApi.ts                   // API communication hook
├── services/
│   ├── calculatorApi.ts            // Axios API client
│   └── calculatorApi.test.ts
├── types/
│   ├── calculator.types.ts         // TypeScript interfaces
│   └── api.types.ts
├── utils/
│   ├── formatNumber.ts             // Number formatting utilities
│   ├── formatNumber.test.ts
│   └── validation.ts               // Input validation
├── App.tsx
├── App.test.tsx
├── main.tsx
└── index.css                       // Tailwind imports
TypeScript Interfaces
typescript// types/calculator.types.ts
export type Operation = 
  | 'add' 
  | 'subtract' 
  | 'multiply' 
  | 'divide' 
  | 'power' 
  | 'sqrt' 
  | 'percentage';

export type ButtonType = 
  | 'number' 
  | 'operator' 
  | 'function' 
  | 'clear' 
  | 'equals';

export interface CalculatorState {
  display: string;
  currentValue: number | null;
  previousValue: number | null;
  operation: Operation | null;
  waitingForOperand: boolean;
  isLoading: boolean;
  error: string | null;
}

export interface ButtonConfig {
  label: string;
  value: string;
  type: ButtonType;
  gridColumn?: string;
  className?: string;
}

// types/api.types.ts
export interface BinaryOperationRequest {
  operand1: number;
  operand2: number;
}

export interface UnaryOperationRequest {
  operand: number;
}

export interface CalculationResponse {
  result: number;
  operation: string;
  timestamp: string;
}

export interface ErrorResponse {
  errorCode: string;
  message: string;
  details?: string;
  timestamp: string;
}
State Management with useReducer
typescript// hooks/useCalculator.ts
type CalculatorAction =
  | { type: 'INPUT_DIGIT'; payload: string }
  | { type: 'INPUT_DECIMAL' }
  | { type: 'SET_OPERATION'; payload: Operation }
  | { type: 'CALCULATE_RESULT' }
  | { type: 'CLEAR' }
  | { type: 'CLEAR_ERROR' }
  | { type: 'SET_LOADING'; payload: boolean }
  | { type: 'SET_RESULT'; payload: number }
  | { type: 'SET_ERROR'; payload: string }
  | { type: 'PERCENTAGE' }
  | { type: 'TOGGLE_SIGN' };

function calculatorReducer(
  state: CalculatorState, 
  action: CalculatorAction
): CalculatorState {
  // Implement state transitions
}

export function useCalculator() {
  const [state, dispatch] = useReducer(calculatorReducer, initialState);
  const { executeOperation } = useApi();

  const handleCalculate = useCallback(async () => {
    // Call API and update state
  }, [state, executeOperation]);

  return { state, dispatch, handleCalculate };
}
API Service Layer
typescript// services/calculatorApi.ts
import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:8080/api/v1';

const apiClient = axios.create({
  baseURL: API_BASE_URL,
  headers: { 'Content-Type': 'application/json' },
  timeout: 5000,
});

export const calculatorApi = {
  add: (operand1: number, operand2: number) => 
    apiClient.post<CalculationResponse>('/add', { operand1, operand2 }),
  
  subtract: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/subtract', { operand1, operand2 }),
  
  multiply: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/multiply', { operand1, operand2 }),
  
  divide: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/divide', { operand1, operand2 }),
  
  power: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/power', { operand1, operand2 }),
  
  sqrt: (operand: number) =>
    apiClient.post<CalculationResponse>('/sqrt', { operand }),
  
  percentage: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/percentage', { operand1, operand2 }),
};
```

#### UI Design Specifications (iOS/macOS Style)

**Color Palette** (Tailwind classes):
- Background: `bg-gray-900` (dark mode) / `bg-gray-100` (light mode)
- Display: `bg-gray-800 text-white text-right` (dark) / `bg-white text-gray-900` (light)
- Number buttons: `bg-gray-700 hover:bg-gray-600` (dark) / `bg-gray-200 hover:bg-gray-300` (light)
- Operator buttons: `bg-orange-500 hover:bg-orange-600 text-white`
- Function buttons: `bg-gray-500 hover:bg-gray-400`
- Equals button: `bg-orange-500 hover:bg-orange-600` with emphasis

**Layout**:
- Grid layout: 4 columns × 5 rows for standard buttons
- Display at top with large text (text-5xl for result, text-xl for operation)
- Rounded buttons with shadow: `rounded-full shadow-lg`
- Button size: `h-20 w-20` on desktop, `h-16 w-16` on mobile
- Spacing: `gap-3` between buttons
- Responsive: Stack vertically on mobile (<640px), centered on desktop

**Button Layout** (iOS style):
```
[  Display showing result (right-aligned)  ]
[  Previous operation (small, gray)        ]

[ AC ] [ +/- ] [  %  ] [  ÷  ]
[  7 ] [  8  ] [  9  ] [  ×  ]
[  4 ] [  5  ] [  6  ] [  −  ]
[  1 ] [  2  ] [  3  ] [  +  ]
[     0      ] [  .  ] [  =  ]
```

Additional advanced buttons row (optional):
```
[ x² ] [ √  ] [ xʸ ]
Animations (Tailwind):

Button press: active:scale-95 transition-transform duration-75
Loading state: Spinning indicator over display
Error shake: animate-shake (custom animation)
Result fade-in: animate-fadeIn (custom animation)

Input Validation Rules
Client-side validation before API call:

Maximum 15 digits in display
Only one decimal point allowed
Prevent multiple consecutive operators
Validate division by zero before API call (show error immediately)
Validate negative sqrt before API call
Sanitize input: strip non-numeric characters except decimal

Error Display:

Show error message in red text below display
Auto-clear error after 3 seconds or on next input
Map backend error codes to user-friendly messages:

CALC_001: "Cannot divide by zero"
CALC_002: "Invalid number"
CALC_003: "Cannot calculate square root of negative number"
CALC_004: "Number too large"
CALC_005: "Invalid percentage"
CALC_006: "Invalid input"
Network errors: "Unable to connect to server"



ACCEPTANCE CRITERIA

✅ All 7 operations (add, subtract, multiply, divide, power, sqrt, percentage) work correctly
✅ Display updates in real-time as user types
✅ Calculator handles decimal numbers correctly
✅ Division by zero shows error message without crashing
✅ Square root of negative number shows error message
✅ Loading spinner displays during API calls
✅ Responsive layout works on mobile (320px) to desktop (1920px)
✅ Keyboard input supported (numbers, operators, Enter for equals, Escape for clear)
✅ Error messages are user-friendly and auto-dismiss
✅ Unit tests achieve minimum 80% code coverage
✅ E2E tests cover critical user flows
✅ Accessibility: ARIA labels, keyboard navigation, screen reader support

CRITICAL TEST CASES
Unit Tests (Vitest + React Testing Library)
useCalculator hook tests:
typescriptdescribe('useCalculator', () => {
  it('should initialize with correct default state', () => {});
  it('should handle digit input correctly', () => {});
  it('should handle decimal point input', () => {});
  it('should prevent multiple decimal points', () => {});
  it('should handle clear (AC) correctly', () => {});
  it('should handle sign toggle (+/-)', () => {});
  it('should set operation correctly', () => {});
  it('should calculate addition via API', async () => {});
  it('should handle division by zero error', async () => {});
  it('should handle API network errors', async () => {});
});
Calculator component tests:
typescriptdescribe('Calculator', () => {
  it('renders without crashing', () => {});
  it('displays initial value of 0', () => {});
  it('updates display when number buttons clicked', () => {});
  it('performs addition correctly', async () => {});
  it('performs subtraction correctly', async () => {});
  it('performs multiplication correctly', async () => {});
  it('performs division correctly', async () => {});
  it('shows error for division by zero', async () => {});
  it('clears display when AC pressed', () => {});
  it('supports keyboard input', () => {});
});
API service tests:
typescriptdescribe('calculatorApi', () => {
  it('should call /add endpoint with correct payload', async () => {});
  it('should handle successful response', async () => {});
  it('should handle 400 error response', async () => {});
  it('should handle network timeout', async () => {});
});
E2E Tests (Playwright)
typescripttest.describe('Calculator E2E', () => {
  test('should perform basic addition', async ({ page }) => {
    // 5 + 3 = 8
  });
  
  test('should handle decimal numbers', async ({ page }) => {
    // 3.14 + 2.86 = 6
  });
  
  test('should show error for division by zero', async ({ page }) => {
    // 10 ÷ 0 = Error
  });
  
  test('should clear calculator with AC', async ({ page }) => {});
  
  test('should support keyboard input', async ({ page }) => {});
  
  test('should be responsive on mobile', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 });
  });
});
IMPLEMENTATION STEPS
Step 1: Project Setup

Initialize Vite project: npm create vite@latest calculator-frontend -- --template react-ts
Install dependencies:

bash   npm install axios
   npm install -D tailwindcss postcss autoprefixer
   npm install -D vitest @vitest/ui jsdom
   npm install -D @testing-library/react @testing-library/jest-dom @testing-library/user-event
   npm install -D @playwright/test

Configure Tailwind CSS (tailwind.config.js, postcss.config.js)
Configure Vitest (vitest.config.ts)
Configure Playwright (playwright.config.ts)
Set up environment variables (.env, .env.local)

Step 2: Type Definitions

Create types/calculator.types.ts with all calculator-related types
Create types/api.types.ts with API request/response types
Ensure strict TypeScript configuration (strict: true in tsconfig.json)

Step 3: API Service Layer

Implement services/calculatorApi.ts with Axios client
Add request/response interceptors for error handling
Write unit tests for API service
Add environment variable for API base URL

Step 4: Custom Hooks

Implement useApi hook for API calls with loading/error states
Implement useCalculator hook with useReducer for state management
Write comprehensive unit tests for both hooks
Add error handling and edge case coverage

Step 5: UI Components

Create Button component with Tailwind styling and types
Create Display component with number formatting
Create Keypad component with button grid layout
Create Calculator main component connecting all pieces
Create ErrorBoundary for React error handling
Add Spinner loading component

Step 6: Styling and Responsiveness

Implement iOS-style design with Tailwind utilities
Add custom animations in index.css:

css   @keyframes shake {
     0%, 100% { transform: translateX(0); }
     25% { transform: translateX(-10px); }
     75% { transform: translateX(10px); }
   }

Test responsive breakpoints (mobile, tablet, desktop)
Add dark mode support (optional but recommended)

Step 7: Keyboard Support

Add useEffect in Calculator component for keyboard listeners
Map keys: 0-9, +, -, *, /, Enter (=), Escape (AC), . (decimal)
Test keyboard navigation and accessibility

Step 8: Testing

Write unit tests for all components (80%+ coverage)
Write unit tests for hooks and utilities
Write E2E tests for critical user flows
Generate coverage report: npm run test:coverage
Run E2E tests: npm run test:e2e

Step 9: Documentation

Create comprehensive README with:

Prerequisites (Node.js version, backend running)
Installation steps
Running the app (npm run dev)
Running tests (npm test, npm run test:e2e)
Environment variables
Backend API documentation link: http://localhost:8080/calculator-api-1.0
Architecture overview
Component hierarchy diagram
API integration details


Add JSDoc comments to complex functions
Include screenshots of calculator UI

CONFIGURATION EXAMPLES
vite.config.ts:
typescriptimport { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true,
      },
    },
  },
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/test/setup.ts',
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: ['node_modules/', 'src/test/'],
    },
  },
});
tailwind.config.js:
javascriptexport default {
  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      animation: {
        shake: 'shake 0.3s ease-in-out',
        fadeIn: 'fadeIn 0.2s ease-in',
      },
    },
  },
  plugins: [],
};
```

**.env.example**:
```
VITE_API_URL=http://localhost:8080/api/v1
VITE_API_DOCS_URL=http://localhost:8080/calculator-api-1.0
package.json scripts:
json{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "lint": "eslint src --ext ts,tsx",
    "format": "prettier --write \"src/**/*.{ts,tsx}\""
  }
}
DELIVERABLES CHECKLIST

 React + TypeScript calculator app with iOS-style UI
 Full API integration with all 7 backend endpoints
 State management using useReducer hook
 Tailwind CSS styling with responsive design
 Comprehensive error handling and user feedback
 Loading states during API calls
 Keyboard navigation support
 Unit tests with 80%+ coverage (Vitest + RTL)
 E2E tests covering critical flows (Playwright)
 README with setup instructions, architecture docs, and API documentation link
 Environment configuration for different API URLs
 Accessibility features (ARIA labels, keyboard support)

SUCCESS VALIDATION
Run these commands to verify completion:
bash# Install dependencies
npm install

# Run development server
npm run dev
# App should open at http://localhost:3000

# Run unit tests with coverage
npm run test:coverage
# Coverage should be 80%+

# Run E2E tests
npm run test:e2e
# All tests should pass

# Build for production
npm run build
# Should create optimized build in dist/

# Manual testing checklist:
# ✅ Click 5 + 3 = → Shows 8
# ✅ Click 10 ÷ 0 = → Shows error "Cannot divide by zero"
# ✅ Click √ then -4 → Shows error "Cannot calculate square root..."
# ✅ Type "9*9=" on keyboard → Shows 81
# ✅ Resize browser to 375px → Layout adapts to mobile
# ✅ Press AC → Clears display
# ✅ Network disconnect → Shows "Unable to connect to server"
INTEGRATION WITH BACKEND
Ensure the backend is running:
bash# In backend directory
./gradlew run
# Should start on http://localhost:8080

# Verify API documentation is accessible
# Open http://localhost:8080/calculator-api-1.0 in browser
Test full-stack integration:
bash# In frontend directory
npm run dev

# Open http://localhost:3000
# Perform calculations - should hit backend API
# Check browser DevTools Network tab - should see POST requests to localhost:8080
# Reference API docs at http://localhost:8080/calculator-api-1.0 for troubleshooting
REFERENCES

Backend API Documentation: http://localhost:8080/calculator-api-1.0 (interactive Swagger/OpenAPI docs)
Backend Source: Refer to backend repository for detailed implementation
API Base URL: http://localhost:8080/api/v1
</file>

<file path="calculator-frontend/index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calculator-frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="calculator-frontend/package.json">
{
  "name": "calculator-frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest run --coverage",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "format": "prettier --write \"src/**/*.{ts,tsx}\""
  },
  "dependencies": {
    "axios": "^1.13.5",
    "react": "^19.2.0",
    "react-dom": "^19.2.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@playwright/test": "^1.58.2",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.2",
    "@testing-library/user-event": "^14.6.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.7",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "@vitest/coverage-v8": "^4.0.18",
    "@vitest/ui": "^4.0.18",
    "autoprefixer": "^10.4.24",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "jsdom": "^28.0.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.19",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.48.0",
    "vite": "^7.3.1",
    "vitest": "^4.0.18"
  }
}
</file>

<file path="calculator-frontend/playwright.config.ts">
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
  },
  projects: [{ name: 'chromium', use: { ...devices['Desktop Chrome'] } }],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
})
</file>

<file path="calculator-frontend/postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="calculator-frontend/public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="calculator-frontend/src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="calculator-frontend/src/App.test.tsx">
import { describe, it, expect, vi } from 'vitest'
import { render, screen } from '@testing-library/react'
import App from './App'

vi.mock('./components/Calculator/Calculator', () => ({
  Calculator: () => <div data-testid="calculator">Calculator</div>,
}))

describe('App', () => {
  it('renders Calculator', () => {
    render(<App />)
    expect(screen.getByTestId('calculator')).toBeInTheDocument()
  })
})
</file>

<file path="calculator-frontend/src/App.tsx">
import { ErrorBoundary } from './components/ErrorBoundary/ErrorBoundary'
import { Calculator } from './components/Calculator/Calculator'

function App() {
  return (
    <ErrorBoundary>
      <div className="min-h-screen bg-gray-900 flex items-center justify-center p-4">
        <Calculator />
      </div>
    </ErrorBoundary>
  )
}

export default App
</file>

<file path="calculator-frontend/src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="calculator-frontend/src/components/Calculator/Button.test.tsx">
import { describe, it, expect, vi } from 'vitest'
import { render, screen } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { Button } from './Button'

describe('Button', () => {
  it('renders with label', () => {
    render(<Button label="5" type="number" onClick={() => {}} />)
    expect(screen.getByRole('button', { name: '5' })).toBeInTheDocument()
  })

  it('calls onClick when clicked', async () => {
    const onClick = vi.fn()
    render(<Button label="AC" type="clear" onClick={onClick} />)
    await userEvent.click(screen.getByRole('button', { name: 'AC' }))
    expect(onClick).toHaveBeenCalledTimes(1)
  })

  it('applies type-based styling', () => {
    render(<Button label="+" type="operator" onClick={() => {}} />)
    const btn = screen.getByRole('button')
    expect(btn).toHaveClass('bg-orange-500')
  })
})
</file>

<file path="calculator-frontend/src/components/Calculator/Button.tsx">
import type { ButtonType } from '../../types/calculator.types'

interface ButtonProps {
  label: string
  onClick: () => void
  type: ButtonType
  gridColumn?: string
  className?: string
}

const typeClasses: Record<ButtonType, string> = {
  number: 'bg-gray-700 hover:bg-gray-600 text-white',
  operator: 'bg-orange-500 hover:bg-orange-600 text-white',
  function: 'bg-gray-500 hover:bg-gray-400 text-white',
  clear: 'bg-gray-500 hover:bg-gray-400 text-white',
  equals: 'bg-orange-500 hover:bg-orange-600 text-white',
}

export function Button({
  label,
  onClick,
  type,
  gridColumn,
  className = '',
}: ButtonProps) {
  const base =
    'h-16 w-16 sm:h-20 sm:w-20 rounded-full shadow-lg active:scale-95 transition-transform duration-75 flex items-center justify-center text-2xl font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-orange-500'
  const typeClass = typeClasses[type]
  const style = gridColumn ? { gridColumn } : undefined
  return (
    <button
      type="button"
      onClick={onClick}
      className={`${base} ${typeClass} ${className}`}
      style={style}
      aria-label={label}
    >
      {label}
    </button>
  )
}
</file>

<file path="calculator-frontend/src/components/Calculator/Calculator.test.tsx">
import { describe, it, expect, vi, beforeEach } from 'vitest'
import { render, screen, fireEvent } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { useState } from 'react'
import { Calculator } from './Calculator'

const mockDispatch = vi.fn()
const mockHandleCalculate = vi.fn()
const mockHandleSqrt = vi.fn()

const initialState = {
  display: '0',
  currentValue: null as number | null,
  previousValue: null as number | null,
  operation: null as string | null,
  waitingForOperand: false,
  isLoading: false,
  error: null as string | null,
}
let mockState = { ...initialState }

vi.mock('../../hooks/useCalculator', () => ({
  useCalculator: () => ({
    state: mockState,
    dispatch: mockDispatch,
    handleCalculate: mockHandleCalculate,
    handleSqrt: mockHandleSqrt,
  }),
}))

describe('Calculator', () => {
  beforeEach(() => {
    mockState = { ...initialState }
    mockDispatch.mockClear()
    mockHandleCalculate.mockClear()
    mockHandleSqrt.mockClear()
  })

  it('renders without crashing', () => {
    render(<Calculator />)
    expect(screen.getByRole('application', { name: 'Calculator' })).toBeInTheDocument()
  })

  it('displays initial value of 0', () => {
    render(<Calculator />)
    expect(screen.getByLabelText(/display: 0/i)).toBeInTheDocument()
  })

  it('dispatches INPUT_DIGIT when number button clicked', async () => {
    render(<Calculator />)
    await userEvent.click(screen.getByRole('button', { name: '5' }))
    expect(mockDispatch).toHaveBeenCalledWith({ type: 'INPUT_DIGIT', payload: '5' })
  })

  it('dispatches CLEAR when AC pressed', async () => {
    render(<Calculator />)
    await userEvent.click(screen.getByRole('button', { name: 'AC' }))
    expect(mockDispatch).toHaveBeenCalledWith({ type: 'CLEAR' })
  })

  it('dispatches INPUT_DIGIT on keyboard number', async () => {
    render(<Calculator />)
    await userEvent.keyboard('5')
    expect(mockDispatch).toHaveBeenCalledWith({ type: 'INPUT_DIGIT', payload: '5' })
  })

  it('dispatches CLEAR on Escape key', () => {
    render(<Calculator />)
    fireEvent.keyDown(window, { key: 'Escape' })
    expect(mockDispatch).toHaveBeenCalledWith({ type: 'CLEAR' })
  })

  it('shows Spinner when isLoading', () => {
    mockState.isLoading = true
    render(<Calculator />)
    expect(screen.getByLabelText('Loading')).toBeInTheDocument()
  })

  it('shows error when state has error', async () => {
    function Wrapper() {
      const [, setR] = useState(0)
      return (
        <>
          <button type="button" onClick={() => { mockState.error = 'Cannot divide by zero'; setR((r) => r + 1) }}>
            set error
          </button>
          <Calculator />
        </>
      )
    }
    render(<Wrapper />)
    expect(screen.queryByRole('alert')).not.toBeInTheDocument()
    await userEvent.click(screen.getByRole('button', { name: 'set error' }))
    expect(screen.getByRole('alert')).toHaveTextContent('Cannot divide by zero')
  })
})
</file>

<file path="calculator-frontend/src/components/Calculator/Calculator.tsx">
import { useEffect, useCallback, useRef, useState } from 'react'
import { useCalculator } from '../../hooks/useCalculator'
import type { Operation } from '../../types/calculator.types'
import { Display } from './Display'
import { Keypad } from './Keypad'
import { Spinner } from '../Loading/Spinner'

const ERROR_AUTO_DISMISS_MS = 3000

export function Calculator() {
  const { state, dispatch, handleCalculate, handleSqrt } = useCalculator()
  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null)
  const [showExtraRow, setShowExtraRow] = useState(false)

  useEffect(() => {
    if (!state.error) return
    timeoutRef.current = setTimeout(() => {
      dispatch({ type: 'CLEAR_ERROR' })
    }, ERROR_AUTO_DISMISS_MS)
    return () => {
      if (timeoutRef.current) clearTimeout(timeoutRef.current)
    }
  }, [state.error, dispatch])

  const handleDigit = useCallback((digit: string) => {
    dispatch({ type: 'INPUT_DIGIT', payload: digit })
  }, [dispatch])

  const handleOperator = useCallback((op: Operation) => {
    if (state.operation && state.previousValue !== null && !state.waitingForOperand) {
      handleCalculate().then(() => {
        dispatch({ type: 'SET_OPERATION', payload: op })
      })
    } else {
      dispatch({ type: 'SET_OPERATION', payload: op })
    }
  }, [state.operation, state.previousValue, state.waitingForOperand, dispatch, handleCalculate])

  const handleEquals = useCallback(() => {
    if (state.operation) {
      void handleCalculate()
    }
  }, [state.operation, handleCalculate])

  const handleKeyDown = useCallback(
    (e: KeyboardEvent) => {
      if (e.key >= '0' && e.key <= '9') {
        e.preventDefault()
        handleDigit(e.key)
        return
      }
      switch (e.key) {
        case '.':
          e.preventDefault()
          dispatch({ type: 'INPUT_DECIMAL' })
          break
        case '+':
          e.preventDefault()
          handleOperator('add')
          break
        case '-':
          e.preventDefault()
          handleOperator('subtract')
          break
        case '*':
          e.preventDefault()
          handleOperator('multiply')
          break
        case '/':
          e.preventDefault()
          handleOperator('divide')
          break
        case 'Enter':
          e.preventDefault()
          handleEquals()
          break
        case 'Escape':
          e.preventDefault()
          dispatch({ type: 'CLEAR' })
          break
        default:
          break
      }
    },
    [handleDigit, handleOperator, handleEquals, dispatch]
  )

  useEffect(() => {
    window.addEventListener('keydown', handleKeyDown)
    return () => window.removeEventListener('keydown', handleKeyDown)
  }, [handleKeyDown])

  const secondary =
    state.operation && state.previousValue !== null
      ? `${state.previousValue} ${state.operation === 'add' ? '+' : state.operation === 'subtract' ? '−' : state.operation === 'multiply' ? '×' : state.operation === 'divide' ? '÷' : state.operation === 'power' ? 'xʸ' : state.operation === 'percentage' ? '%' : ''}`
      : undefined

  return (
    <div
      className={`relative w-full max-w-sm mx-auto rounded-2xl overflow-hidden shadow-2xl ${state.error ? 'animate-shake' : ''}`}
      role="application"
      aria-label="Calculator"
    >
      <Display main={state.display} secondary={secondary} />
      {/* Fila debajo del display: botón borrar a la derecha, sin tapar los números */}
      <div className="flex justify-end bg-gray-800 px-3 pb-2 -mt-1">
        <button
          type="button"
          onClick={() => dispatch({ type: 'BACKSPACE' })}
          className="w-10 h-10 rounded-full bg-gray-700 hover:bg-gray-600 text-white flex items-center justify-center text-lg font-medium focus:outline-none focus:ring-2 focus:ring-orange-500"
          aria-label="Borrar último dígito"
        >
          ⌫
        </button>
      </div>
      {state.error && (
        <div
          className="bg-red-900/90 text-red-100 text-sm text-center py-2 px-3"
          role="alert"
        >
          {state.error}
        </div>
      )}
      {state.isLoading && <Spinner />}
      <Keypad
        onDigit={handleDigit}
        onDecimal={() => dispatch({ type: 'INPUT_DECIMAL' })}
        onClear={() => dispatch({ type: 'CLEAR' })}
        onToggleSign={() => dispatch({ type: 'TOGGLE_SIGN' })}
        onPercentage={() => dispatch({ type: 'PERCENTAGE' })}
        onOperation={handleOperator}
        onEquals={handleEquals}
        onSqrt={handleSqrt}
        showExtraRow={showExtraRow}
        onToggleExtraRow={() => setShowExtraRow((s) => !s)}
      />
    </div>
  )
}
</file>

<file path="calculator-frontend/src/components/Calculator/Display.test.tsx">
import { describe, it, expect } from 'vitest'
import { render, screen } from '@testing-library/react'
import { Display } from './Display'

describe('Display', () => {
  it('renders main value', () => {
    render(<Display main="123" />)
    expect(screen.getByText('123')).toBeInTheDocument()
  })

  it('renders secondary when provided', () => {
    render(<Display main="8" secondary="5 + 3" />)
    expect(screen.getByText('5 + 3')).toBeInTheDocument()
    expect(screen.getByText('8')).toBeInTheDocument()
  })

  it('has aria-live for accessibility', () => {
    render(<Display main="0" />)
    expect(screen.getByLabelText(/display/i)).toHaveAttribute('aria-live', 'polite')
  })
})
</file>

<file path="calculator-frontend/src/components/Calculator/Keypad.test.tsx">
import { describe, it, expect, vi } from 'vitest'
import { render, screen } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { Keypad } from './Keypad'

describe('Keypad', () => {
  const defaultProps = {
    onDigit: vi.fn(),
    onDecimal: vi.fn(),
    onClear: vi.fn(),
    onToggleSign: vi.fn(),
    onPercentage: vi.fn(),
    onOperation: vi.fn(),
    onEquals: vi.fn(),
  }

  it('renders digit buttons', () => {
    render(<Keypad {...defaultProps} />)
    expect(screen.getByRole('button', { name: '5' })).toBeInTheDocument()
    expect(screen.getByRole('button', { name: '0' })).toBeInTheDocument()
  })

  it('calls onDigit when number clicked', async () => {
    render(<Keypad {...defaultProps} />)
    await userEvent.click(screen.getByRole('button', { name: '7' }))
    expect(defaultProps.onDigit).toHaveBeenCalledWith('7')
  })

  it('calls onClear when AC clicked', async () => {
    render(<Keypad {...defaultProps} />)
    await userEvent.click(screen.getByRole('button', { name: 'AC' }))
    expect(defaultProps.onClear).toHaveBeenCalled()
  })

  it('calls onOperation when operator clicked', async () => {
    render(<Keypad {...defaultProps} />)
    await userEvent.click(screen.getByRole('button', { name: '+' }))
    expect(defaultProps.onOperation).toHaveBeenCalledWith('add')
  })

  it('calls onEquals when = clicked', async () => {
    render(<Keypad {...defaultProps} />)
    await userEvent.click(screen.getByRole('button', { name: '=' }))
    expect(defaultProps.onEquals).toHaveBeenCalled()
  })

  it('renders sqrt and power when onSqrt and showExtraRow', async () => {
    const onSqrt = vi.fn()
    render(<Keypad {...defaultProps} onSqrt={onSqrt} showExtraRow />)
    expect(screen.getByRole('button', { name: '√' })).toBeInTheDocument()
    expect(screen.getByRole('button', { name: 'xʸ' })).toBeInTheDocument()
    await userEvent.click(screen.getByRole('button', { name: '√' }))
    expect(onSqrt).toHaveBeenCalled()
    await userEvent.click(screen.getByRole('button', { name: 'xʸ' }))
    expect(defaultProps.onOperation).toHaveBeenCalledWith('power')
  })

  it('calls correct handlers for all buttons', async () => {
    render(<Keypad {...defaultProps} />)
    await userEvent.click(screen.getByRole('button', { name: '÷' }))
    expect(defaultProps.onOperation).toHaveBeenCalledWith('divide')
    await userEvent.click(screen.getByRole('button', { name: '×' }))
    expect(defaultProps.onOperation).toHaveBeenCalledWith('multiply')
    await userEvent.click(screen.getByRole('button', { name: '−' }))
    expect(defaultProps.onOperation).toHaveBeenCalledWith('subtract')
    await userEvent.click(screen.getByRole('button', { name: '+' }))
    expect(defaultProps.onOperation).toHaveBeenCalledWith('add')
    await userEvent.click(screen.getByRole('button', { name: '.' }))
    expect(defaultProps.onDecimal).toHaveBeenCalled()
  })
})
</file>

<file path="calculator-frontend/src/components/Calculator/Keypad.tsx">
import type { Operation } from '../../types/calculator.types'
import { Button } from './Button'

interface KeypadProps {
  onDigit: (digit: string) => void
  onDecimal: () => void
  onClear: () => void
  onToggleSign: () => void
  onPercentage: () => void
  onOperation: (op: Operation) => void
  onEquals: () => void
  onSqrt?: () => void
  showExtraRow?: boolean
  onToggleExtraRow?: () => void
}

export function Keypad({
  onDigit,
  onDecimal,
  onClear,
  onToggleSign,
  onPercentage,
  onOperation,
  onEquals,
  onSqrt,
  showExtraRow = false,
  onToggleExtraRow,
}: KeypadProps) {
  return (
    <div className="bg-gray-900 p-4 rounded-b-2xl grid grid-cols-4 gap-3">
      {/* Fila extra desplegable hacia arriba: √, xʸ (aparece sobre la primera fila) */}
      {showExtraRow && onSqrt && (
        <>
          <Button label="√" type="function" onClick={onSqrt} />
          <Button label="xʸ" type="function" onClick={() => onOperation('power')} />
          <span />
          <span />
        </>
      )}

      {/* Fila 1: AC, botón ⋯ (2ª columna), %, ÷ */}
      <Button label="AC" type="clear" onClick={onClear} />
      {onToggleExtraRow ? (
        <Button
          label={showExtraRow ? '▲' : '⋯'}
          type="function"
          onClick={onToggleExtraRow}
        />
      ) : (
        <div aria-hidden />
      )}
      <Button label="%" type="function" onClick={onPercentage} />
      <Button label="÷" type="operator" onClick={() => onOperation('divide')} />

      {/* Filas 2-4: números y operadores en columna derecha */}
      <Button label="7" type="number" onClick={() => onDigit('7')} />
      <Button label="8" type="number" onClick={() => onDigit('8')} />
      <Button label="9" type="number" onClick={() => onDigit('9')} />
      <Button label="×" type="operator" onClick={() => onOperation('multiply')} />

      <Button label="4" type="number" onClick={() => onDigit('4')} />
      <Button label="5" type="number" onClick={() => onDigit('5')} />
      <Button label="6" type="number" onClick={() => onDigit('6')} />
      <Button label="−" type="operator" onClick={() => onOperation('subtract')} />

      <Button label="1" type="number" onClick={() => onDigit('1')} />
      <Button label="2" type="number" onClick={() => onDigit('2')} />
      <Button label="3" type="number" onClick={() => onDigit('3')} />
      <Button label="+" type="operator" onClick={() => onOperation('add')} />

      {/* Última fila: cambiar signo, cero, punto, igual */}
      <Button label="+/-" type="function" onClick={onToggleSign} />
      <Button label="0" type="number" onClick={() => onDigit('0')} />
      <Button label="." type="number" onClick={onDecimal} />
      <Button label="=" type="equals" onClick={onEquals} />
    </div>
  )
}
</file>

<file path="calculator-frontend/src/components/ErrorBoundary/ErrorBoundary.test.tsx">
import { describe, it, expect, vi } from 'vitest'
import { render, screen } from '@testing-library/react'
import { ErrorBoundary } from './ErrorBoundary'

const Throw = () => {
  throw new Error('Test error')
}

describe('ErrorBoundary', () => {
  it('renders children when no error', () => {
    render(
      <ErrorBoundary>
        <span>Child</span>
      </ErrorBoundary>
    )
    expect(screen.getByText('Child')).toBeInTheDocument()
  })

  it('renders fallback when child throws', () => {
    vi.spyOn(console, 'error').mockImplementation(() => {})
    render(
      <ErrorBoundary>
        <Throw />
      </ErrorBoundary>
    )
    expect(screen.getByText(/something went wrong/i)).toBeInTheDocument()
    expect(screen.getByText(/test error/i)).toBeInTheDocument()
    vi.restoreAllMocks()
  })

  it('shows try again button', () => {
    vi.spyOn(console, 'error').mockImplementation(() => {})
    render(
      <ErrorBoundary>
        <Throw />
      </ErrorBoundary>
    )
    expect(screen.getByRole('button', { name: /try again/i })).toBeInTheDocument()
    vi.restoreAllMocks()
  })

  it('renders custom fallback when provided', () => {
    vi.spyOn(console, 'error').mockImplementation(() => {})
    render(
      <ErrorBoundary fallback={<div data-testid="custom-fallback">Custom</div>}>
        <Throw />
      </ErrorBoundary>
    )
    expect(screen.getByTestId('custom-fallback')).toHaveTextContent('Custom')
    vi.restoreAllMocks()
  })
})
</file>

<file path="calculator-frontend/src/components/ErrorBoundary/ErrorBoundary.tsx">
import { Component, type ErrorInfo, type ReactNode } from 'react'

interface Props {
  children: ReactNode
  fallback?: ReactNode
}

interface State {
  hasError: boolean
  error?: Error
}

export class ErrorBoundary extends Component<Props, State> {
  state: State = { hasError: false }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error }
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('ErrorBoundary caught:', error, errorInfo)
  }

  handleRetry = () => {
    this.setState({ hasError: false, error: undefined })
  }

  render() {
    if (this.state.hasError) {
      if (this.props.fallback) {
        return this.props.fallback
      }
      return (
        <div className="min-h-screen bg-gray-900 flex items-center justify-center p-4">
          <div className="bg-gray-800 rounded-xl p-6 max-w-md text-center">
            <h2 className="text-xl font-semibold text-white mb-2">
              Something went wrong
            </h2>
            <p className="text-gray-400 mb-4">
              {this.state.error?.message ?? 'An unexpected error occurred.'}
            </p>
            <button
              type="button"
              onClick={this.handleRetry}
              className="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors"
            >
              Try again
            </button>
          </div>
        </div>
      )
    }
    return this.props.children
  }
}
</file>

<file path="calculator-frontend/src/components/Loading/Spinner.test.tsx">
import { describe, it, expect } from 'vitest'
import { render, screen } from '@testing-library/react'
import { Spinner } from './Spinner'

describe('Spinner', () => {
  it('renders loading indicator', () => {
    render(<Spinner />)
    expect(screen.getByLabelText('Loading')).toBeInTheDocument()
  })
})
</file>

<file path="calculator-frontend/src/components/Loading/Spinner.tsx">
export function Spinner() {
  return (
    <div
      className="absolute inset-0 bg-black/50 rounded-2xl flex items-center justify-center z-10"
      aria-label="Loading"
    >
      <div
        className="w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"
        role="status"
      />
    </div>
  )
}
</file>

<file path="calculator-frontend/src/hooks/useApi.test.ts">
import { describe, it, expect, vi, beforeEach } from 'vitest'
import { renderHook } from '@testing-library/react'
import { useApi } from './useApi'

vi.mock('../services/calculatorApi', () => ({
  calculatorApi: {
    add: vi.fn(),
    subtract: vi.fn(),
    multiply: vi.fn(),
    divide: vi.fn(),
    power: vi.fn(),
    sqrt: vi.fn(),
    percentage: vi.fn(),
  },
}))

describe('useApi', () => {
  beforeEach(async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.add).mockReset()
    vi.mocked(calculatorApi.subtract).mockReset()
    vi.mocked(calculatorApi.multiply).mockReset()
    vi.mocked(calculatorApi.divide).mockReset()
    vi.mocked(calculatorApi.power).mockReset()
    vi.mocked(calculatorApi.sqrt).mockReset()
    vi.mocked(calculatorApi.percentage).mockReset()
  })

  it('executeOperation add returns result', async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.add).mockResolvedValue({
      data: { result: 10, operation: 'ADD', timestamp: '' },
    })
    const { result } = renderHook(() => useApi())
    const res = await result.current.executeOperation('add', {
      operand1: 3,
      operand2: 7,
    })
    expect(res).toBe(10)
    expect(calculatorApi.add).toHaveBeenCalledWith(3, 7)
  })

  it('executeOperation sqrt returns result', async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.sqrt).mockResolvedValue({
      data: { result: 3, operation: 'SQRT', timestamp: '' },
    })
    const { result } = renderHook(() => useApi())
    const res = await result.current.executeOperation('sqrt', { operand: 9 })
    expect(res).toBe(3)
    expect(calculatorApi.sqrt).toHaveBeenCalledWith(9)
  })

  it('executeOperation throws user-friendly message on API error', async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.add).mockRejectedValue({
      response: { data: { errorCode: 'CALC_001', message: 'Division by zero' } },
    })
    const { result } = renderHook(() => useApi())
    await expect(
      result.current.executeOperation('add', { operand1: 1, operand2: 0 })
    ).rejects.toThrow('Cannot divide by zero')
  })

  it('executeOperation multiply', async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.multiply).mockResolvedValue({
      data: { result: 12, operation: 'MULTIPLY', timestamp: '' },
    })
    const { result } = renderHook(() => useApi())
    const res = await result.current.executeOperation('multiply', {
      operand1: 3,
      operand2: 4,
    })
    expect(res).toBe(12)
  })

  it('executeOperation divide', async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.divide).mockResolvedValue({
      data: { result: 2, operation: 'DIVIDE', timestamp: '' },
    })
    const { result } = renderHook(() => useApi())
    const res = await result.current.executeOperation('divide', {
      operand1: 6,
      operand2: 3,
    })
    expect(res).toBe(2)
  })

  it('executeOperation power', async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.power).mockResolvedValue({
      data: { result: 8, operation: 'POWER', timestamp: '' },
    })
    const { result } = renderHook(() => useApi())
    const res = await result.current.executeOperation('power', {
      operand1: 2,
      operand2: 3,
    })
    expect(res).toBe(8)
  })

  it('executeOperation percentage', async () => {
    const { calculatorApi } = await import('../services/calculatorApi')
    vi.mocked(calculatorApi.percentage).mockResolvedValue({
      data: { result: 25, operation: 'PERCENTAGE', timestamp: '' },
    })
    const { result } = renderHook(() => useApi())
    const res = await result.current.executeOperation('percentage', {
      operand1: 100,
      operand2: 25,
    })
    expect(res).toBe(25)
  })
})
</file>

<file path="calculator-frontend/src/hooks/useApi.ts">
import { useCallback } from 'react'
import type { Operation } from '../types/calculator.types'
import { calculatorApi } from '../services/calculatorApi'
import { getUserFriendlyErrorMessage } from '../utils/errorMessages'

export function useApi() {
  const executeOperation = useCallback(
    async (
      operation: Operation,
      operands: { operand1?: number; operand2?: number; operand?: number }
    ): Promise<number> => {
      try {
        if (operation === 'sqrt') {
          const operand = operands.operand ?? 0
          const { data } = await calculatorApi.sqrt(operand)
          return data.result
        }
        const operand1 = operands.operand1 ?? 0
        const operand2 = operands.operand2 ?? 0
        switch (operation) {
          case 'add': {
            const { data } = await calculatorApi.add(operand1, operand2)
            return data.result
          }
          case 'subtract': {
            const { data } = await calculatorApi.subtract(operand1, operand2)
            return data.result
          }
          case 'multiply': {
            const { data } = await calculatorApi.multiply(operand1, operand2)
            return data.result
          }
          case 'divide': {
            const { data } = await calculatorApi.divide(operand1, operand2)
            return data.result
          }
          case 'power': {
            const { data } = await calculatorApi.power(operand1, operand2)
            return data.result
          }
          case 'percentage': {
            const { data } = await calculatorApi.percentage(operand1, operand2)
            return data.result
          }
          default:
            throw new Error('Unknown operation')
        }
      } catch (error) {
        throw new Error(getUserFriendlyErrorMessage(error))
      }
    },
    []
  )

  return { executeOperation }
}
</file>

<file path="calculator-frontend/src/index.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-10px);
  }
  75% {
    transform: translateX(10px);
  }
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  background-color: #111827;
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#root {
  width: 100%;
  min-height: 100vh;
}
</file>

<file path="calculator-frontend/src/main.tsx">
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
</file>

<file path="calculator-frontend/src/services/calculatorApi.test.ts">
import { describe, it, expect, vi, beforeEach } from 'vitest'

vi.mock('axios', async (importOriginal) => {
  const postMock = vi.fn()
  const actual = await importOriginal<typeof import('axios')>()
  return {
    default: {
      ...actual,
      create: () => ({
        post: postMock,
      }),
    },
    __postMock: postMock,
  }
})

const getCalculatorApi = () => import('./calculatorApi').then((m) => m.calculatorApi)
const getPostMock = (): Promise<ReturnType<typeof vi.fn> | undefined> =>
  import('axios').then((m: unknown) => (m as { __postMock?: ReturnType<typeof vi.fn> }).__postMock)

describe('calculatorApi', () => {
  beforeEach(async () => {
    const mock = await getPostMock()
    mock?.mockReset()
  })

  it('should call /add endpoint with correct payload', async () => {
    const postMock = await getPostMock()
    postMock?.mockResolvedValue({
      data: { result: 3, operation: 'ADD', timestamp: '2024-01-01T00:00:00Z' },
    })
    const calculatorApi = await getCalculatorApi()
    await calculatorApi.add(1, 2)
    expect(postMock).toHaveBeenCalledWith('/add', { operand1: 1, operand2: 2 })
  })

  it('should handle successful response', async () => {
    const postMock = await getPostMock()
    postMock?.mockResolvedValue({
      data: { result: 5, operation: 'ADD', timestamp: '2024-01-01T00:00:00Z' },
    })
    const calculatorApi = await getCalculatorApi()
    const response = await calculatorApi.add(2, 3)
    expect(response.data).toEqual({
      result: 5,
      operation: 'ADD',
      timestamp: '2024-01-01T00:00:00Z',
    })
  })

  it('should handle 400 error response', async () => {
    const postMock = await getPostMock()
    postMock?.mockRejectedValue({
      response: {
        status: 400,
        data: {
          errorCode: 'CALC_001',
          message: 'Division by zero',
          timestamp: '2024-01-01T00:00:00Z',
        },
      },
    })
    const calculatorApi = await getCalculatorApi()
    await expect(calculatorApi.divide(1, 0)).rejects.toMatchObject({
      response: {
        status: 400,
        data: { errorCode: 'CALC_001', message: 'Division by zero' },
      },
    })
  })

  it('should handle network timeout', async () => {
    const postMock = await getPostMock()
    postMock?.mockRejectedValue(new Error('timeout of 5000ms exceeded'))
    const calculatorApi = await getCalculatorApi()
    await expect(calculatorApi.add(1, 2)).rejects.toThrow('timeout')
  })

  it('should call subtract with correct payload', async () => {
    const postMock = await getPostMock()
    postMock?.mockResolvedValue({
      data: { result: 2, operation: 'SUBTRACT', timestamp: '2024-01-01T00:00:00Z' },
    })
    const api = await getCalculatorApi()
    await api.subtract(5, 3)
    expect(postMock).toHaveBeenCalledWith('/subtract', { operand1: 5, operand2: 3 })
  })

  it('should call multiply and sqrt', async () => {
    const postMock = await getPostMock()
    postMock?.mockResolvedValue({
      data: { result: 1, operation: 'MULTIPLY', timestamp: '' },
    })
    const api = await getCalculatorApi()
    await api.multiply(1, 1)
    expect(postMock).toHaveBeenCalledWith('/multiply', { operand1: 1, operand2: 1 })
    postMock?.mockResolvedValue({ data: { result: 2, operation: 'SQRT', timestamp: '' } })
    await api.sqrt(4)
    expect(postMock).toHaveBeenCalledWith('/sqrt', { operand: 4 })
  })

  it('should call power and percentage', async () => {
    const postMock = await getPostMock()
    postMock?.mockResolvedValue({
      data: { result: 1, operation: 'POWER', timestamp: '' },
    })
    const api = await getCalculatorApi()
    await api.power(2, 0)
    expect(postMock).toHaveBeenCalledWith('/power', { operand1: 2, operand2: 0 })
    postMock?.mockResolvedValue({ data: { result: 50, operation: 'PERCENTAGE', timestamp: '' } })
    await api.percentage(200, 25)
    expect(postMock).toHaveBeenCalledWith('/percentage', { operand1: 200, operand2: 25 })
  })
})
</file>

<file path="calculator-frontend/src/services/calculatorApi.ts">
import axios from 'axios'
import type { CalculationResponse } from '../types/api.types'

const API_BASE_URL =
  import.meta.env.VITE_API_URL ?? 'http://localhost:8080/api/v1'

const apiClient = axios.create({
  baseURL: API_BASE_URL,
  headers: { 'Content-Type': 'application/json' },
  timeout: 5000,
})

export const calculatorApi = {
  add: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/add', { operand1, operand2 }),

  subtract: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/subtract', { operand1, operand2 }),

  multiply: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/multiply', { operand1, operand2 }),

  divide: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/divide', { operand1, operand2 }),

  power: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/power', { operand1, operand2 }),

  sqrt: (operand: number) =>
    apiClient.post<CalculationResponse>('/sqrt', { operand }),

  percentage: (operand1: number, operand2: number) =>
    apiClient.post<CalculationResponse>('/percentage', {
      operand1,
      operand2,
    }),
}
</file>

<file path="calculator-frontend/src/types/api.types.ts">
export interface BinaryOperationRequest {
  operand1: number
  operand2: number
}

export interface UnaryOperationRequest {
  operand: number
}

export interface CalculationResponse {
  result: number
  operation: string
  timestamp: string
}

export interface ErrorResponse {
  errorCode: string
  message: string
  details?: string
  timestamp: string
}
</file>

<file path="calculator-frontend/src/types/calculator.types.ts">
export type Operation =
  | 'add'
  | 'subtract'
  | 'multiply'
  | 'divide'
  | 'power'
  | 'sqrt'
  | 'percentage'

export type ButtonType =
  | 'number'
  | 'operator'
  | 'function'
  | 'clear'
  | 'equals'

export interface CalculatorState {
  display: string
  currentValue: number | null
  previousValue: number | null
  operation: Operation | null
  waitingForOperand: boolean
  isLoading: boolean
  error: string | null
}

export interface ButtonConfig {
  label: string
  value: string
  type: ButtonType
  gridColumn?: string
  className?: string
}
</file>

<file path="calculator-frontend/src/utils/errorMessages.test.ts">
import { describe, it, expect } from 'vitest'
import { getUserFriendlyErrorMessage } from './errorMessages'

describe('getUserFriendlyErrorMessage', () => {
  it('maps CALC_001 to Cannot divide by zero', () => {
    const err = { response: { data: { errorCode: 'CALC_001', message: 'x' } } }
    expect(getUserFriendlyErrorMessage(err)).toBe('Cannot divide by zero')
  })

  it('maps CALC_003 to sqrt message', () => {
    const err = { response: { data: { errorCode: 'CALC_003' } } }
    expect(getUserFriendlyErrorMessage(err)).toBe(
      'Cannot calculate square root of negative number'
    )
  })

  it('returns network message for Network Error', () => {
    expect(getUserFriendlyErrorMessage(new Error('Network Error'))).toBe(
      'Unable to connect to server'
    )
  })

  it('returns default for unknown', () => {
    expect(getUserFriendlyErrorMessage({})).toBe('Something went wrong')
  })
})
</file>

<file path="calculator-frontend/src/utils/errorMessages.ts">
import type { ErrorResponse } from '../types/api.types'

const ERROR_CODE_MAP: Record<string, string> = {
  CALC_001: 'Cannot divide by zero',
  CALC_002: 'Invalid number',
  CALC_003: 'Cannot calculate square root of negative number',
  CALC_004: 'Number too large',
  CALC_005: 'Invalid percentage',
  CALC_006: 'Invalid input',
}

export function getUserFriendlyErrorMessage(
  error: unknown,
  defaultMessage = 'Something went wrong'
): string {
  if (typeof error === 'object' && error !== null && 'response' in error) {
    const axiosError = error as { response?: { data?: ErrorResponse } }
    const data = axiosError.response?.data
    if (data?.errorCode && ERROR_CODE_MAP[data.errorCode]) {
      return ERROR_CODE_MAP[data.errorCode]
    }
    if (data?.message) {
      return data.message
    }
  }
  if (error instanceof Error) {
    if (error.message.includes('timeout') || error.message.includes('Network')) {
      return 'Unable to connect to server'
    }
    return error.message
  }
  return defaultMessage
}
</file>

<file path="calculator-frontend/src/utils/validation.test.ts">
import { describe, it, expect } from 'vitest'
import {
  isDivisionByZero,
  isNegativeForSqrt,
  isPercentageOutOfRange,
} from './validation'

describe('validation', () => {
  describe('isDivisionByZero', () => {
    it('returns true for 0', () => {
      expect(isDivisionByZero(0)).toBe(true)
    })
    it('returns false for non-zero', () => {
      expect(isDivisionByZero(1)).toBe(false)
    })
  })

  describe('isNegativeForSqrt', () => {
    it('returns true for negative', () => {
      expect(isNegativeForSqrt(-1)).toBe(true)
    })
    it('returns false for zero or positive', () => {
      expect(isNegativeForSqrt(0)).toBe(false)
      expect(isNegativeForSqrt(4)).toBe(false)
    })
  })

  describe('isPercentageOutOfRange', () => {
    it('returns true for out of range', () => {
      expect(isPercentageOutOfRange(-1)).toBe(true)
      expect(isPercentageOutOfRange(101)).toBe(true)
    })
    it('returns false for 0-100', () => {
      expect(isPercentageOutOfRange(0)).toBe(false)
      expect(isPercentageOutOfRange(50)).toBe(false)
      expect(isPercentageOutOfRange(100)).toBe(false)
    })
  })
})
</file>

<file path="calculator-frontend/src/utils/validation.ts">
export function isDivisionByZero(operand2: number): boolean {
  return operand2 === 0
}

export function isNegativeForSqrt(operand: number): boolean {
  return operand < 0
}

export function isPercentageOutOfRange(percentage: number): boolean {
  return percentage < 0 || percentage > 100
}
</file>

<file path="calculator-frontend/tailwind.config.js">
/** @type {import('tailwindcss').Config} */
export default {
  content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      keyframes: {
        shake: {
          '0%, 100%': { transform: 'translateX(0)' },
          '25%': { transform: 'translateX(-10px)' },
          '75%': { transform: 'translateX(10px)' },
        },
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
      },
      animation: {
        shake: 'shake 0.3s ease-in-out',
        fadeIn: 'fadeIn 0.2s ease-in',
      },
    },
  },
  plugins: [],
}
</file>

<file path="calculator-frontend/test-results/.last-run.json">
{
  "status": "passed",
  "failedTests": []
}
</file>

<file path="calculator-frontend/tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client", "vitest/globals"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"],
  "exclude": ["src/**/*.test.ts", "src/**/*.test.tsx", "src/**/*.spec.ts"]
}
</file>

<file path="calculator-frontend/tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="calculator-frontend/tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="improvements_prompt.md">
# Technical Evaluation System - Sezzle Backend Interviewer

You are a Senior Backend Engineer at Sezzle with 10+ years of experience evaluating candidates for backend development positions. Your role is to conduct rigorous yet fair technical assessments, identifying strengths, weaknesses, and growth potential of candidates.

## Sezzle Context
Sezzle is a fintech company that handles real-time financial transactions, payment processing, and high-availability distributed systems. We value: clean code, scalability, security, rigorous testing, and well-founded architectural decisions.

## Your Mission
Thoroughly evaluate the candidate's backend solution, identify technical gaps, and prepare an in-depth technical interview that reveals their level of expertise and reasoning capability.

## Inputs You Will Receive
- **PROBLEM/REQUIREMENT**: [Description of the assigned technical challenge]
- **GITHUB REPOSITORY**: [Public repo URL with the solution]

## Evaluation Process

### PHASE 1: DEEP REPOSITORY ANALYSIS

First, examine the complete repository following this checklist:

#### 1.1 Structure and Organization
- [ ] Project architecture (layers, separation of concerns)
- [ ] Naming conventions (files, variables, functions)
- [ ] Logical and scalable folder structure
- [ ] Environment configuration (env files, configs)

#### 1.2 Code Quality
- [ ] SOLID principles applied
- [ ] DRY (Don't Repeat Yourself)
- [ ] Error and exception handling
- [ ] Input validation
- [ ] Security (SQL injection, XSS, sanitization, secrets management)
- [ ] Appropriate logging
- [ ] Comments where necessary (not obvious statements)

#### 1.3 Testing
- [ ] Unit tests (coverage %)
- [ ] Integration tests
- [ ] E2E tests if applicable
- [ ] Edge cases covered
- [ ] Appropriate mocking
- [ ] Testing framework setup

#### 1.4 Database (if applicable)
- [ ] Schema/data model design
- [ ] Appropriate normalization
- [ ] Indexes defined
- [ ] Versioned migrations
- [ ] Optimized queries
- [ ] Transaction handling

#### 1.5 API Design (if applicable)
- [ ] RESTful principles or GraphQL best practices
- [ ] API versioning
- [ ] Documentation (Swagger/OpenAPI)
- [ ] Appropriate status codes
- [ ] Rate limiting considered
- [ ] Pagination implemented

#### 1.6 DevOps and Deployment
- [ ] Docker/containerization
- [ ] CI/CD pipeline
- [ ] Environment variables
- [ ] Complete README with setup instructions
- [ ] Deployment scripts

#### 1.7 Performance and Scalability
- [ ] Caching implemented where appropriate
- [ ] N+1 queries avoided
- [ ] DB connections managed efficiently
- [ ] Concurrency considerations
- [ ] Potential bottlenecks identified

---

### PHASE 2: EVALUATION REPORT GENERATION

Generate a structured report with the following format:

---

## 🔴 CRITICAL ERRORS AND IDENTIFIED PROBLEMS

### Functionality Errors
[Numbered list of functionalities that DO NOT meet the requirement]

### Security Errors
[Found vulnerabilities with severity: CRITICAL/HIGH/MEDIUM]

### Architecture Errors
[Problematic architectural decisions or anti-patterns]

### Bugs and Unhandled Edge Cases
[Cases that would break the application]

### Best Practice Violations
[Industry-standard practices not followed]

---

## 🟡 UNIMPLEMENTED IMPROVEMENT OPPORTUNITIES

### Architecture and Design
1. [Architectural improvement that would elevate quality]
2. [Pattern that should have been used]

### Testing
1. [Missing types of tests]
2. [Uncovered scenarios]

### Performance
1. [Obvious optimizations not applied]
2. [Missing caching or indexing]

### Code and Maintainability
1. [Refactorings that would improve readability]
2. [Abstractions that would reduce duplication]

### DevOps and Deployment
1. [Missing DevOps tools/practices]
2. [Missing deployment configurations]

### Documentation
1. [Missing technical documentation]
2. [Absent API docs or diagrams]

### Valuable Optional Features
1. [Features that would demonstrate seniority]
2. [Production considerations not included]

---

## 🎯 TECHNICAL INTERVIEW - 10 QUESTIONS

### SECTION A: Design and Implementation Decisions (4 questions)

**Question 1:** [Question about specific architectural decision in the code]
*E.g., "I see you decided to use [X pattern/technology]. What alternatives did you consider and why did you choose this one?"*

**Question 2:** [Question about handling of specific case in the code]
*E.g., "In the [filename] file, you handle [scenario] this way. Why did you take this approach?"*

**Question 3:** [Question about visible technical trade-off]
*E.g., "I noticed you opted for [decision X] instead of [decision Y]. What was your reasoning?"*

**Question 4:** [Question about testing or non-testing of something specific]
*E.g., "Why did you decide to [include/not include] tests for [specific component]?"*

---

### SECTION B: Extensibility and New Features (3 questions)

**Question 5:** [New feature related to scalability]
*E.g., "If you had to handle 10,000 requests per second, what would you change in your current architecture?"*

**Question 6:** [New business feature]
*E.g., "The product now requires [new functionality]. How would you integrate it without breaking existing code?"*

**Question 7:** [Observability/monitoring feature]
*E.g., "How would you implement distributed logging and tracing in this application if it were in production?"*

---

### SECTION C: Debugging and Problem-Solving (3 questions)

**Question 8:** [Specific bug scenario based on the code]
*E.g., "A user reports that [scenario X] fails intermittently in production. How would you debug this?"*

**Question 9:** [Question about an error or problem you DID identify]
*E.g., "I identified that [problem X] in your code. How would you resolve it while maintaining backward compatibility?"*

**Question 10:** [Performance scenario under load]
*E.g., "If the latency of [specific endpoint] increases to 5 seconds under load, what would you do step by step to diagnose?"*

---

## 📊 CANDIDATE OVERALL SCORE

**Functionality**: [X/10] - [Brief justification]
**Code Quality**: [X/10] - [Brief justification]
**Architecture**: [X/10] - [Brief justification]
**Testing**: [X/10] - [Brief justification]
**Security**: [X/10] - [Brief justification]
**DevOps Ready**: [X/10] - [Brief justification]

**TOTAL SCORE**: [X/60]

**RECOMMENDATION**: 
- [ ] Strong Hire - Exceeds expectations
- [ ] Hire - Meets the level well
- [ ] Maybe - Has potential but important gaps
- [ ] No Hire - Does not meet required level

**FINAL COMMENTS**:
[2-3 paragraphs about strengths, areas for improvement, and whether they would fit at Sezzle]

---

## Evaluation Rules

1. **BE RIGOROUS BUT FAIR**: Evaluate with Sezzle standards (high-level fintech) but consider the position level

2. **LOOK AT ACTUAL CODE**: Don't assume, review every relevant file in the repo

3. **CONTEXTUALIZE CRITICISM**: If something is missing, consider whether it was due to time, knowledge, or oversight

4. **SPECIFIC QUESTIONS**: Your questions must reference lines of code, files, or concrete decisions made by the candidate

5. **BALANCE AREAS**: Don't make all 10 questions about one thing, distribute between architecture, implementation, and extension

6. **REVEAL SENIORITY**: Questions should allow distinguishing a mid-level from a senior

7. **CRITICAL THINKING**: Prioritize questions that reveal HOW the candidate THINKS, not just what they know

## Tools at Your Disposal

To analyze the repo use:
- `web_fetch` to read specific repository files
- Examine README, package.json/requirements.txt, folder structure
- Review tests, configurations, and documentation

## Output Format

Deliver the complete report following exactly the structure of the 3 phases:
1. 🔴 Critical Errors
2. 🟡 Improvement Opportunities
3. 🎯 10 Interview Questions
4. 📊 Score and Recommendation

---

**YOU ARE NOW READY. WAIT TO RECEIVE:**
- **PROBLEM**: [Challenge description]
- **GITHUB REPO**: [URL]

Analyze exhaustively and generate the complete evaluation report.
</file>

<file path="calculator-backend/gradlew.bat">
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem

@if "%DEBUG%"=="" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%"=="" set DIRNAME=.
@rem This is normally unused
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if %ERRORLEVEL% equ 0 goto execute

echo.
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo.
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*

:end
@rem End local scope for the variables with windows NT shell
if %ERRORLEVEL% equ 0 goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
set EXIT_CODE=%ERRORLEVEL%
if %EXIT_CODE% equ 0 set EXIT_CODE=1
if not ""=="%GRADLE_EXIT_CONSOLE%" exit %EXIT_CODE%
exit /b %EXIT_CODE%

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/config/MdcFilter.kt">
package com.calculator.config

import io.micronaut.http.HttpRequest
import io.micronaut.http.MutableHttpResponse
import io.micronaut.http.annotation.Filter
import io.micronaut.http.filter.HttpServerFilter
import io.micronaut.http.filter.ServerFilterChain
import org.reactivestreams.Publisher
import org.slf4j.MDC
import reactor.core.publisher.Flux
import java.util.UUID

/** Safe pattern: alphanumeric, hyphen, underscore; max 64 chars. Prevents log injection. */
private val SAFE_REQUEST_ID = Regex("^[a-zA-Z0-9\\-_]{1,64}$")

@Filter("/api/**")
class MdcFilter : HttpServerFilter {

    override fun doFilter(
        request: HttpRequest<*>,
        chain: ServerFilterChain
    ): Publisher<MutableHttpResponse<*>> {
        val headerValue = request.headers.get("X-Request-ID")
        val requestId = when {
            headerValue == null || headerValue.isBlank() -> UUID.randomUUID().toString()
            headerValue.matches(SAFE_REQUEST_ID) -> headerValue.trim()
            else -> UUID.randomUUID().toString()
        }
        MDC.put("requestId", requestId)
        return Flux.from(chain.proceed(request))
            .doFinally { MDC.clear() }
    }
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/controller/CalculatorController.kt">
package com.calculator.controller

import com.calculator.model.request.BinaryOperationRequest
import com.calculator.model.request.UnaryOperationRequest
import com.calculator.model.response.CalculationResponse
import com.calculator.service.CalculatorService
import com.calculator.service.HealthService
import io.micronaut.http.MediaType
import io.micronaut.http.annotation.Body
import io.micronaut.http.annotation.Controller
import io.micronaut.http.annotation.Get
import io.micronaut.http.annotation.Post
import io.swagger.v3.oas.annotations.Operation
import io.swagger.v3.oas.annotations.responses.ApiResponse
import io.swagger.v3.oas.annotations.responses.ApiResponses
import io.swagger.v3.oas.annotations.tags.Tag
import jakarta.validation.Valid

@Controller("/api/v1")
@Tag(name = "Calculator", description = "Arithmetic operations API")
class CalculatorController(
    private val calculatorService: CalculatorService,
    private val healthService: HealthService
) {

    @Post("/add", consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Addition", description = "Adds two numbers")
    @ApiResponses(
        ApiResponse(responseCode = "200", description = "Successful calculation"),
        ApiResponse(responseCode = "400", description = "Invalid input or validation error")
    )
    fun add(@Body @Valid request: BinaryOperationRequest): CalculationResponse {
        val op1 = requireNotNull(request.operand1) { "operand1 is required" }
        val op2 = requireNotNull(request.operand2) { "operand2 is required" }
        return CalculationResponse(calculatorService.add(op1, op2), "ADD")
    }

    @Post("/subtract", consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Subtraction", description = "Subtracts operand2 from operand1")
    @ApiResponses(
        ApiResponse(responseCode = "200", description = "Successful calculation"),
        ApiResponse(responseCode = "400", description = "Invalid input or validation error")
    )
    fun subtract(@Body @Valid request: BinaryOperationRequest): CalculationResponse {
        val op1 = requireNotNull(request.operand1) { "operand1 is required" }
        val op2 = requireNotNull(request.operand2) { "operand2 is required" }
        return CalculationResponse(calculatorService.subtract(op1, op2), "SUBTRACT")
    }

    @Post("/multiply", consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Multiplication", description = "Multiplies two numbers")
    @ApiResponses(
        ApiResponse(responseCode = "200", description = "Successful calculation"),
        ApiResponse(responseCode = "400", description = "Invalid input or validation error")
    )
    fun multiply(@Body @Valid request: BinaryOperationRequest): CalculationResponse {
        val op1 = requireNotNull(request.operand1) { "operand1 is required" }
        val op2 = requireNotNull(request.operand2) { "operand2 is required" }
        return CalculationResponse(calculatorService.multiply(op1, op2), "MULTIPLY")
    }

    @Post("/divide", consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Division", description = "Divides operand1 by operand2. Returns CALC_001 if divisor is zero.")
    @ApiResponses(
        ApiResponse(responseCode = "200", description = "Successful calculation"),
        ApiResponse(responseCode = "400", description = "Division by zero (CALC_001) or invalid input")
    )
    fun divide(@Body @Valid request: BinaryOperationRequest): CalculationResponse {
        val op1 = requireNotNull(request.operand1) { "operand1 is required" }
        val op2 = requireNotNull(request.operand2) { "operand2 is required" }
        return CalculationResponse(calculatorService.divide(op1, op2), "DIVIDE")
    }

    @Post("/power", consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Exponentiation", description = "Raises operand1 to the power of operand2")
    @ApiResponses(
        ApiResponse(responseCode = "200", description = "Successful calculation"),
        ApiResponse(responseCode = "400", description = "Invalid input or overflow (CALC_004)")
    )
    fun power(@Body @Valid request: BinaryOperationRequest): CalculationResponse {
        val op1 = requireNotNull(request.operand1) { "operand1 is required" }
        val op2 = requireNotNull(request.operand2) { "operand2 is required" }
        return CalculationResponse(calculatorService.power(op1, op2), "POWER")
    }

    @Post("/percentage", consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Percentage", description = "Calculates operand2% of operand1. operand2 must be 0-100.")
    @ApiResponses(
        ApiResponse(responseCode = "200", description = "Successful calculation"),
        ApiResponse(responseCode = "400", description = "Invalid percentage (CALC_005) or invalid input")
    )
    fun percentage(@Body @Valid request: BinaryOperationRequest): CalculationResponse {
        val op1 = requireNotNull(request.operand1) { "operand1 is required" }
        val op2 = requireNotNull(request.operand2) { "operand2 is required" }
        return CalculationResponse(calculatorService.percentage(op1, op2), "PERCENTAGE")
    }

    @Post("/sqrt", consumes = [MediaType.APPLICATION_JSON], produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Square root", description = "Returns the square root of the operand. Operand must be >= 0.")
    @ApiResponses(
        ApiResponse(responseCode = "200", description = "Successful calculation"),
        ApiResponse(responseCode = "400", description = "Negative operand (CALC_003) or invalid input")
    )
    fun sqrt(@Body @Valid request: UnaryOperationRequest): CalculationResponse {
        val operand = requireNotNull(request.operand) { "operand is required" }
        return CalculationResponse(calculatorService.sqrt(operand), "SQRT")
    }

    @Get("/health", produces = [MediaType.APPLICATION_JSON])
    @Operation(summary = "Health check", description = "Returns service status, version, and JVM metrics")
    fun health(): Map<String, Any> = healthService.getHealth()
}
</file>

<file path="calculator-backend/src/main/kotlin/com/calculator/model/response/CalculationResponse.kt">
package com.calculator.model.response

import io.micronaut.core.annotation.Introspected
import java.time.Instant

@Introspected
data class CalculationResponse(
    val result: Double,
    val operation: String,
    val timestamp: Instant = Instant.now()
)
</file>

<file path="calculator-backend/src/main/resources/application.yml">
app:
  version: ${projectVersion}

ratelimit:
  enabled: true
  limit: 100
  window-seconds: 60
  exclude-paths:
    - /api/v1/health

micronaut:
  application:
    name: calculator-service
  router:
    static-resources:
      swagger:
        paths: classpath:META-INF/swagger
        mapping: /swagger/**
      swagger-ui:
        paths: classpath:META-INF/swagger/views/swagger-ui
        mapping: /swagger-ui/**
  server:
    port: 8080
    cors:
      enabled: true
      configurations:
        web:
          # Dev: Vite (3000). Docker: same-origin (localhost) or override via CORS_ALLOWED_ORIGINS.
          allowed-origins:
            - http://localhost:3000
            - http://localhost
          allowed-methods:
            - POST
            - GET
            - OPTIONS

logger:
  levels:
    com.calculator: INFO
</file>

<file path="calculator-backend/src/test/resources/application-test.yml">
ratelimit:
  enabled: false

micronaut:
  server:
    port: -1  # Random port to avoid BindException when 8080 is in use
  http:
    client:
      exception-on-error-status: false
</file>

<file path="calculator-frontend/coverage/coverage-final.json">
{"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\App.tsx": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\App.tsx","statementMap":{"0":{"start":{"line":5,"column":2},"end":{"line":10,"column":null}}},"fnMap":{"0":{"name":"App","decl":{"start":{"line":4,"column":9},"end":{"line":4,"column":15}},"loc":{"start":{"line":4,"column":15},"end":{"line":12,"column":null}},"line":4}},"branchMap":{},"s":{"0":1},"f":{"0":1},"b":{},"meta":{"lastBranch":0,"lastFunction":1,"lastStatement":1,"seen":{"f:4:9:4:15":0,"s:5:2:10:Infinity":0}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Button.tsx": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Button.tsx","statementMap":{"0":{"start":{"line":11,"column":48},"end":{"line":17,"column":null}},"1":{"start":{"line":27,"column":4},"end":{"line":27,"column":null}},"2":{"start":{"line":28,"column":20},"end":{"line":28,"column":null}},"3":{"start":{"line":29,"column":16},"end":{"line":29,"column":null}},"4":{"start":{"line":30,"column":2},"end":{"line":39,"column":null}}},"fnMap":{"0":{"name":"Button","decl":{"start":{"line":19,"column":16},"end":{"line":19,"column":23}},"loc":{"start":{"line":25,"column":16},"end":{"line":41,"column":null}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":2},"end":{"line":24,"column":null}},"type":"default-arg","locations":[{"start":{"line":24,"column":14},"end":{"line":24,"column":null}}],"line":24},"1":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":null}},"type":"cond-expr","locations":[{"start":{"line":29,"column":29},"end":{"line":29,"column":46}},{"start":{"line":29,"column":46},"end":{"line":29,"column":null}}],"line":29}},"s":{"0":3,"1":318,"2":318,"3":318,"4":318},"f":{"0":318},"b":{"0":[318],"1":[0,318]},"meta":{"lastBranch":2,"lastFunction":1,"lastStatement":5,"seen":{"s:11:48:17:Infinity":0,"f:19:16:19:23":0,"b:24:14:24:Infinity":0,"s:27:4:27:Infinity":1,"s:28:20:28:Infinity":2,"s:29:16:29:Infinity":3,"b:29:29:29:46:29:46:29:Infinity":1,"s:30:2:39:Infinity":4}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Calculator.tsx": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Calculator.tsx","statementMap":{"0":{"start":{"line":8,"column":30},"end":{"line":8,"column":null}},"1":{"start":{"line":11,"column":55},"end":{"line":11,"column":null}},"2":{"start":{"line":12,"column":8},"end":{"line":12,"column":null}},"3":{"start":{"line":13,"column":38},"end":{"line":13,"column":null}},"4":{"start":{"line":15,"column":2},"end":{"line":23,"column":null}},"5":{"start":{"line":16,"column":4},"end":{"line":16,"column":null}},"6":{"start":{"line":16,"column":22},"end":{"line":16,"column":null}},"7":{"start":{"line":17,"column":4},"end":{"line":19,"column":null}},"8":{"start":{"line":18,"column":6},"end":{"line":18,"column":null}},"9":{"start":{"line":20,"column":4},"end":{"line":22,"column":null}},"10":{"start":{"line":21,"column":6},"end":{"line":21,"column":null}},"11":{"start":{"line":21,"column":30},"end":{"line":21,"column":null}},"12":{"start":{"line":25,"column":8},"end":{"line":27,"column":null}},"13":{"start":{"line":26,"column":4},"end":{"line":26,"column":null}},"14":{"start":{"line":29,"column":8},"end":{"line":37,"column":null}},"15":{"start":{"line":30,"column":4},"end":{"line":36,"column":null}},"16":{"start":{"line":31,"column":6},"end":{"line":33,"column":null}},"17":{"start":{"line":32,"column":8},"end":{"line":32,"column":null}},"18":{"start":{"line":35,"column":6},"end":{"line":35,"column":null}},"19":{"start":{"line":39,"column":8},"end":{"line":43,"column":null}},"20":{"start":{"line":40,"column":4},"end":{"line":42,"column":null}},"21":{"start":{"line":41,"column":6},"end":{"line":41,"column":null}},"22":{"start":{"line":45,"column":8},"end":{"line":86,"column":null}},"23":{"start":{"line":47,"column":6},"end":{"line":51,"column":null}},"24":{"start":{"line":48,"column":8},"end":{"line":48,"column":null}},"25":{"start":{"line":49,"column":8},"end":{"line":49,"column":null}},"26":{"start":{"line":50,"column":8},"end":{"line":50,"column":null}},"27":{"start":{"line":52,"column":6},"end":{"line":83,"column":null}},"28":{"start":{"line":54,"column":10},"end":{"line":54,"column":null}},"29":{"start":{"line":55,"column":10},"end":{"line":55,"column":null}},"30":{"start":{"line":56,"column":10},"end":{"line":56,"column":null}},"31":{"start":{"line":58,"column":10},"end":{"line":58,"column":null}},"32":{"start":{"line":59,"column":10},"end":{"line":59,"column":null}},"33":{"start":{"line":60,"column":10},"end":{"line":60,"column":null}},"34":{"start":{"line":62,"column":10},"end":{"line":62,"column":null}},"35":{"start":{"line":63,"column":10},"end":{"line":63,"column":null}},"36":{"start":{"line":64,"column":10},"end":{"line":64,"column":null}},"37":{"start":{"line":66,"column":10},"end":{"line":66,"column":null}},"38":{"start":{"line":67,"column":10},"end":{"line":67,"column":null}},"39":{"start":{"line":68,"column":10},"end":{"line":68,"column":null}},"40":{"start":{"line":70,"column":10},"end":{"line":70,"column":null}},"41":{"start":{"line":71,"column":10},"end":{"line":71,"column":null}},"42":{"start":{"line":72,"column":10},"end":{"line":72,"column":null}},"43":{"start":{"line":74,"column":10},"end":{"line":74,"column":null}},"44":{"start":{"line":75,"column":10},"end":{"line":75,"column":null}},"45":{"start":{"line":76,"column":10},"end":{"line":76,"column":null}},"46":{"start":{"line":78,"column":10},"end":{"line":78,"column":null}},"47":{"start":{"line":79,"column":10},"end":{"line":79,"column":null}},"48":{"start":{"line":80,"column":10},"end":{"line":80,"column":null}},"49":{"start":{"line":82,"column":10},"end":{"line":82,"column":null}},"50":{"start":{"line":88,"column":2},"end":{"line":91,"column":null}},"51":{"start":{"line":89,"column":4},"end":{"line":89,"column":null}},"52":{"start":{"line":90,"column":4},"end":{"line":90,"column":null}},"53":{"start":{"line":90,"column":17},"end":{"line":90,"column":null}},"54":{"start":{"line":94,"column":4},"end":{"line":96,"column":null}},"55":{"start":{"line":98,"column":2},"end":{"line":137,"column":null}},"56":{"start":{"line":109,"column":25},"end":{"line":109,"column":null}},"57":{"start":{"line":127,"column":25},"end":{"line":127,"column":null}},"58":{"start":{"line":128,"column":23},"end":{"line":128,"column":null}},"59":{"start":{"line":129,"column":28},"end":{"line":129,"column":null}},"60":{"start":{"line":130,"column":28},"end":{"line":130,"column":null}},"61":{"start":{"line":135,"column":32},"end":{"line":135,"column":null}},"62":{"start":{"line":135,"column":55},"end":{"line":135,"column":57}}},"fnMap":{"0":{"name":"Calculator","decl":{"start":{"line":10,"column":16},"end":{"line":10,"column":29}},"loc":{"start":{"line":10,"column":29},"end":{"line":139,"column":null}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":12},"end":{"line":15,"column":18}},"loc":{"start":{"line":15,"column":18},"end":{"line":23,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":36},"end":{"line":17,"column":42}},"loc":{"start":{"line":17,"column":42},"end":{"line":19,"column":7}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":11},"end":{"line":20,"column":17}},"loc":{"start":{"line":20,"column":17},"end":{"line":22,"column":null}},"line":20},"4":{"name":"(anonymous_4)","decl":{"start":{"line":25,"column":34},"end":{"line":25,"column":35}},"loc":{"start":{"line":25,"column":53},"end":{"line":27,"column":5}},"line":25},"5":{"name":"(anonymous_5)","decl":{"start":{"line":29,"column":37},"end":{"line":29,"column":38}},"loc":{"start":{"line":29,"column":56},"end":{"line":37,"column":5}},"line":29},"6":{"name":"(anonymous_6)","decl":{"start":{"line":31,"column":29},"end":{"line":31,"column":35}},"loc":{"start":{"line":31,"column":35},"end":{"line":33,"column":7}},"line":31},"7":{"name":"(anonymous_7)","decl":{"start":{"line":39,"column":35},"end":{"line":39,"column":41}},"loc":{"start":{"line":39,"column":41},"end":{"line":43,"column":5}},"line":39},"8":{"name":"(anonymous_8)","decl":{"start":{"line":46,"column":4},"end":{"line":46,"column":5}},"loc":{"start":{"line":46,"column":26},"end":{"line":84,"column":null}},"line":46},"9":{"name":"(anonymous_9)","decl":{"start":{"line":88,"column":12},"end":{"line":88,"column":18}},"loc":{"start":{"line":88,"column":18},"end":{"line":91,"column":5}},"line":88},"10":{"name":"(anonymous_10)","decl":{"start":{"line":90,"column":11},"end":{"line":90,"column":17}},"loc":{"start":{"line":90,"column":17},"end":{"line":90,"column":null}},"line":90},"11":{"name":"(anonymous_11)","decl":{"start":{"line":109,"column":19},"end":{"line":109,"column":25}},"loc":{"start":{"line":109,"column":25},"end":{"line":109,"column":null}},"line":109},"12":{"name":"(anonymous_12)","decl":{"start":{"line":127,"column":19},"end":{"line":127,"column":25}},"loc":{"start":{"line":127,"column":25},"end":{"line":127,"column":null}},"line":127},"13":{"name":"(anonymous_13)","decl":{"start":{"line":128,"column":17},"end":{"line":128,"column":23}},"loc":{"start":{"line":128,"column":23},"end":{"line":128,"column":null}},"line":128},"14":{"name":"(anonymous_14)","decl":{"start":{"line":129,"column":22},"end":{"line":129,"column":28}},"loc":{"start":{"line":129,"column":28},"end":{"line":129,"column":null}},"line":129},"15":{"name":"(anonymous_15)","decl":{"start":{"line":130,"column":22},"end":{"line":130,"column":28}},"loc":{"start":{"line":130,"column":28},"end":{"line":130,"column":null}},"line":130},"16":{"name":"(anonymous_16)","decl":{"start":{"line":135,"column":26},"end":{"line":135,"column":32}},"loc":{"start":{"line":135,"column":32},"end":{"line":135,"column":null}},"line":135},"17":{"name":"(anonymous_17)","decl":{"start":{"line":135,"column":48},"end":{"line":135,"column":49}},"loc":{"start":{"line":135,"column":55},"end":{"line":135,"column":57}},"line":135}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":null}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":null}},{"start":{},"end":{}}],"line":16},"1":{"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":null}},"type":"if","locations":[{"start":{"line":21,"column":6},"end":{"line":21,"column":null}},{"start":{},"end":{}}],"line":21},"2":{"loc":{"start":{"line":30,"column":4},"end":{"line":36,"column":null}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":36,"column":null}},{"start":{"line":34,"column":11},"end":{"line":36,"column":null}}],"line":30},"3":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":85}},"type":"binary-expr","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":27}},{"start":{"line":30,"column":27},"end":{"line":30,"column":59}},{"start":{"line":30,"column":59},"end":{"line":30,"column":85}}],"line":30},"4":{"loc":{"start":{"line":40,"column":4},"end":{"line":42,"column":null}},"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":42,"column":null}},{"start":{},"end":{}}],"line":40},"5":{"loc":{"start":{"line":47,"column":6},"end":{"line":51,"column":null}},"type":"if","locations":[{"start":{"line":47,"column":6},"end":{"line":51,"column":null}},{"start":{},"end":{}}],"line":47},"6":{"loc":{"start":{"line":47,"column":10},"end":{"line":47,"column":40}},"type":"binary-expr","locations":[{"start":{"line":47,"column":10},"end":{"line":47,"column":26}},{"start":{"line":47,"column":26},"end":{"line":47,"column":40}}],"line":47},"7":{"loc":{"start":{"line":52,"column":6},"end":{"line":83,"column":null}},"type":"switch","locations":[{"start":{"line":53,"column":8},"end":{"line":56,"column":null}},{"start":{"line":57,"column":8},"end":{"line":60,"column":null}},{"start":{"line":61,"column":8},"end":{"line":64,"column":null}},{"start":{"line":65,"column":8},"end":{"line":68,"column":null}},{"start":{"line":69,"column":8},"end":{"line":72,"column":null}},{"start":{"line":73,"column":8},"end":{"line":76,"column":null}},{"start":{"line":77,"column":8},"end":{"line":80,"column":null}},{"start":{"line":81,"column":8},"end":{"line":82,"column":null}}],"line":52},"8":{"loc":{"start":{"line":94,"column":4},"end":{"line":96,"column":null}},"type":"cond-expr","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":null}},{"start":{"line":96,"column":8},"end":{"line":96,"column":null}}],"line":94},"9":{"loc":{"start":{"line":94,"column":4},"end":{"line":94,"column":null}},"type":"binary-expr","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":23}},{"start":{"line":94,"column":23},"end":{"line":94,"column":null}}],"line":94},"10":{"loc":{"start":{"line":95,"column":34},"end":{"line":95,"column":263}},"type":"cond-expr","locations":[{"start":{"line":95,"column":62},"end":{"line":95,"column":68}},{"start":{"line":95,"column":68},"end":{"line":95,"column":263}}],"line":95},"11":{"loc":{"start":{"line":95,"column":68},"end":{"line":95,"column":263}},"type":"cond-expr","locations":[{"start":{"line":95,"column":101},"end":{"line":95,"column":107}},{"start":{"line":95,"column":107},"end":{"line":95,"column":263}}],"line":95},"12":{"loc":{"start":{"line":95,"column":107},"end":{"line":95,"column":263}},"type":"cond-expr","locations":[{"start":{"line":95,"column":140},"end":{"line":95,"column":146}},{"start":{"line":95,"column":146},"end":{"line":95,"column":263}}],"line":95},"13":{"loc":{"start":{"line":95,"column":146},"end":{"line":95,"column":263}},"type":"cond-expr","locations":[{"start":{"line":95,"column":177},"end":{"line":95,"column":183}},{"start":{"line":95,"column":183},"end":{"line":95,"column":263}}],"line":95},"14":{"loc":{"start":{"line":95,"column":183},"end":{"line":95,"column":263}},"type":"cond-expr","locations":[{"start":{"line":95,"column":213},"end":{"line":95,"column":220}},{"start":{"line":95,"column":220},"end":{"line":95,"column":263}}],"line":95},"15":{"loc":{"start":{"line":95,"column":220},"end":{"line":95,"column":263}},"type":"cond-expr","locations":[{"start":{"line":95,"column":255},"end":{"line":95,"column":261}},{"start":{"line":95,"column":261},"end":{"line":95,"column":263}}],"line":95},"16":{"loc":{"start":{"line":100,"column":92},"end":{"line":100,"column":126}},"type":"cond-expr","locations":[{"start":{"line":100,"column":106},"end":{"line":100,"column":124}},{"start":{"line":100,"column":124},"end":{"line":100,"column":126}}],"line":100},"17":{"loc":{"start":{"line":116,"column":7},"end":{"line":122,"column":null}},"type":"binary-expr","locations":[{"start":{"line":116,"column":7},"end":{"line":116,"column":null}},{"start":{"line":117,"column":8},"end":{"line":122,"column":null}}],"line":116},"18":{"loc":{"start":{"line":124,"column":7},"end":{"line":124,"column":null}},"type":"binary-expr","locations":[{"start":{"line":124,"column":7},"end":{"line":124,"column":26}},{"start":{"line":124,"column":26},"end":{"line":124,"column":null}}],"line":124}},"s":{"0":1,"1":9,"2":9,"3":9,"4":9,"5":9,"6":8,"7":1,"8":0,"9":1,"10":1,"11":1,"12":9,"13":2,"14":9,"15":0,"16":0,"17":0,"18":0,"19":9,"20":0,"21":0,"22":9,"23":2,"24":1,"25":1,"26":1,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":1,"48":1,"49":0,"50":9,"51":8,"52":8,"53":8,"54":9,"55":9,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0},"f":{"0":9,"1":9,"2":0,"3":1,"4":2,"5":0,"6":0,"7":0,"8":2,"9":8,"10":8,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0},"b":{"0":[8,1],"1":[1,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[1,1],"6":[2,2],"7":[0,0,0,0,0,0,1,0],"8":[0,9],"9":[9,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,8],"17":[9,1],"18":[9,1]},"meta":{"lastBranch":19,"lastFunction":18,"lastStatement":63,"seen":{"s:8:30:8:Infinity":0,"f:10:16:10:29":0,"s:11:55:11:Infinity":1,"s:12:8:12:Infinity":2,"s:13:38:13:Infinity":3,"s:15:2:23:Infinity":4,"f:15:12:15:18":1,"b:16:4:16:Infinity:undefined:undefined:undefined:undefined":0,"s:16:4:16:Infinity":5,"s:16:22:16:Infinity":6,"s:17:4:19:Infinity":7,"f:17:36:17:42":2,"s:18:6:18:Infinity":8,"s:20:4:22:Infinity":9,"f:20:11:20:17":3,"b:21:6:21:Infinity:undefined:undefined:undefined:undefined":1,"s:21:6:21:Infinity":10,"s:21:30:21:Infinity":11,"s:25:8:27:Infinity":12,"f:25:34:25:35":4,"s:26:4:26:Infinity":13,"s:29:8:37:Infinity":14,"f:29:37:29:38":5,"b:30:4:36:Infinity:34:11:36:Infinity":2,"s:30:4:36:Infinity":15,"b:30:8:30:27:30:27:30:59:30:59:30:85":3,"s:31:6:33:Infinity":16,"f:31:29:31:35":6,"s:32:8:32:Infinity":17,"s:35:6:35:Infinity":18,"s:39:8:43:Infinity":19,"f:39:35:39:41":7,"b:40:4:42:Infinity:undefined:undefined:undefined:undefined":4,"s:40:4:42:Infinity":20,"s:41:6:41:Infinity":21,"s:45:8:86:Infinity":22,"f:46:4:46:5":8,"b:47:6:51:Infinity:undefined:undefined:undefined:undefined":5,"s:47:6:51:Infinity":23,"b:47:10:47:26:47:26:47:40":6,"s:48:8:48:Infinity":24,"s:49:8:49:Infinity":25,"s:50:8:50:Infinity":26,"b:53:8:56:Infinity:57:8:60:Infinity:61:8:64:Infinity:65:8:68:Infinity:69:8:72:Infinity:73:8:76:Infinity:77:8:80:Infinity:81:8:82:Infinity":7,"s:52:6:83:Infinity":27,"s:54:10:54:Infinity":28,"s:55:10:55:Infinity":29,"s:56:10:56:Infinity":30,"s:58:10:58:Infinity":31,"s:59:10:59:Infinity":32,"s:60:10:60:Infinity":33,"s:62:10:62:Infinity":34,"s:63:10:63:Infinity":35,"s:64:10:64:Infinity":36,"s:66:10:66:Infinity":37,"s:67:10:67:Infinity":38,"s:68:10:68:Infinity":39,"s:70:10:70:Infinity":40,"s:71:10:71:Infinity":41,"s:72:10:72:Infinity":42,"s:74:10:74:Infinity":43,"s:75:10:75:Infinity":44,"s:76:10:76:Infinity":45,"s:78:10:78:Infinity":46,"s:79:10:79:Infinity":47,"s:80:10:80:Infinity":48,"s:82:10:82:Infinity":49,"s:88:2:91:Infinity":50,"f:88:12:88:18":9,"s:89:4:89:Infinity":51,"s:90:4:90:Infinity":52,"f:90:11:90:17":10,"s:90:17:90:Infinity":53,"s:94:4:96:Infinity":54,"b:95:8:95:Infinity:96:8:96:Infinity":8,"b:94:4:94:23:94:23:94:Infinity":9,"b:95:62:95:68:95:68:95:263":10,"b:95:101:95:107:95:107:95:263":11,"b:95:140:95:146:95:146:95:263":12,"b:95:177:95:183:95:183:95:263":13,"b:95:213:95:220:95:220:95:263":14,"b:95:255:95:261:95:261:95:263":15,"s:98:2:137:Infinity":55,"b:100:106:100:124:100:124:100:126":16,"f:109:19:109:25":11,"s:109:25:109:Infinity":56,"b:116:7:116:Infinity:117:8:122:Infinity":17,"b:124:7:124:26:124:26:124:Infinity":18,"f:127:19:127:25":12,"s:127:25:127:Infinity":57,"f:128:17:128:23":13,"s:128:23:128:Infinity":58,"f:129:22:129:28":14,"s:129:28:129:Infinity":59,"f:130:22:130:28":15,"s:130:28:130:Infinity":60,"f:135:26:135:32":16,"s:135:32:135:Infinity":61,"f:135:48:135:49":17,"s:135:55:135:57":62}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Display.tsx": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Display.tsx","statementMap":{"0":{"start":{"line":9,"column":8},"end":{"line":9,"column":null}},"1":{"start":{"line":10,"column":21},"end":{"line":10,"column":null}},"2":{"start":{"line":12,"column":4},"end":{"line":12,"column":null}},"3":{"start":{"line":13,"column":2},"end":{"line":29,"column":null}}},"fnMap":{"0":{"name":"Display","decl":{"start":{"line":8,"column":16},"end":{"line":8,"column":24}},"loc":{"start":{"line":8,"column":59},"end":{"line":31,"column":null}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":null}},"type":"cond-expr","locations":[{"start":{"line":12,"column":22},"end":{"line":12,"column":47}},{"start":{"line":12,"column":47},"end":{"line":12,"column":null}}],"line":12},"1":{"loc":{"start":{"line":19,"column":7},"end":{"line":22,"column":null}},"type":"binary-expr","locations":[{"start":{"line":19,"column":7},"end":{"line":19,"column":null}},{"start":{"line":20,"column":8},"end":{"line":22,"column":null}}],"line":19}},"s":{"0":12,"1":12,"2":12,"3":12},"f":{"0":12},"b":{"0":[0,12],"1":[12,1]},"meta":{"lastBranch":2,"lastFunction":1,"lastStatement":4,"seen":{"f:8:16:8:24":0,"s:9:8:9:Infinity":0,"s:10:21:10:Infinity":1,"s:12:4:12:Infinity":2,"b:12:22:12:47:12:47:12:Infinity":0,"s:13:2:29:Infinity":3,"b:19:7:19:Infinity:20:8:22:Infinity":1}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Keypad.tsx": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Calculator\\Keypad.tsx","statementMap":{"0":{"start":{"line":29,"column":2},"end":{"line":76,"column":null}},"1":{"start":{"line":35,"column":60},"end":{"line":35,"column":82}},"2":{"start":{"line":53,"column":55},"end":{"line":53,"column":78}},"3":{"start":{"line":56,"column":53},"end":{"line":56,"column":67}},"4":{"start":{"line":57,"column":53},"end":{"line":57,"column":67}},"5":{"start":{"line":58,"column":53},"end":{"line":58,"column":67}},"6":{"start":{"line":59,"column":55},"end":{"line":59,"column":80}},"7":{"start":{"line":61,"column":53},"end":{"line":61,"column":67}},"8":{"start":{"line":62,"column":53},"end":{"line":62,"column":67}},"9":{"start":{"line":63,"column":53},"end":{"line":63,"column":67}},"10":{"start":{"line":64,"column":55},"end":{"line":64,"column":80}},"11":{"start":{"line":66,"column":53},"end":{"line":66,"column":67}},"12":{"start":{"line":67,"column":53},"end":{"line":67,"column":67}},"13":{"start":{"line":68,"column":53},"end":{"line":68,"column":67}},"14":{"start":{"line":69,"column":55},"end":{"line":69,"column":75}},"15":{"start":{"line":73,"column":53},"end":{"line":73,"column":67}}},"fnMap":{"0":{"name":"Keypad","decl":{"start":{"line":17,"column":16},"end":{"line":17,"column":23}},"loc":{"start":{"line":28,"column":16},"end":{"line":78,"column":null}},"line":28},"1":{"name":"(anonymous_1)","decl":{"start":{"line":35,"column":54},"end":{"line":35,"column":60}},"loc":{"start":{"line":35,"column":60},"end":{"line":35,"column":82}},"line":35},"2":{"name":"(anonymous_2)","decl":{"start":{"line":53,"column":49},"end":{"line":53,"column":55}},"loc":{"start":{"line":53,"column":55},"end":{"line":53,"column":78}},"line":53},"3":{"name":"(anonymous_3)","decl":{"start":{"line":56,"column":47},"end":{"line":56,"column":53}},"loc":{"start":{"line":56,"column":53},"end":{"line":56,"column":67}},"line":56},"4":{"name":"(anonymous_4)","decl":{"start":{"line":57,"column":47},"end":{"line":57,"column":53}},"loc":{"start":{"line":57,"column":53},"end":{"line":57,"column":67}},"line":57},"5":{"name":"(anonymous_5)","decl":{"start":{"line":58,"column":47},"end":{"line":58,"column":53}},"loc":{"start":{"line":58,"column":53},"end":{"line":58,"column":67}},"line":58},"6":{"name":"(anonymous_6)","decl":{"start":{"line":59,"column":49},"end":{"line":59,"column":55}},"loc":{"start":{"line":59,"column":55},"end":{"line":59,"column":80}},"line":59},"7":{"name":"(anonymous_7)","decl":{"start":{"line":61,"column":47},"end":{"line":61,"column":53}},"loc":{"start":{"line":61,"column":53},"end":{"line":61,"column":67}},"line":61},"8":{"name":"(anonymous_8)","decl":{"start":{"line":62,"column":47},"end":{"line":62,"column":53}},"loc":{"start":{"line":62,"column":53},"end":{"line":62,"column":67}},"line":62},"9":{"name":"(anonymous_9)","decl":{"start":{"line":63,"column":47},"end":{"line":63,"column":53}},"loc":{"start":{"line":63,"column":53},"end":{"line":63,"column":67}},"line":63},"10":{"name":"(anonymous_10)","decl":{"start":{"line":64,"column":49},"end":{"line":64,"column":55}},"loc":{"start":{"line":64,"column":55},"end":{"line":64,"column":80}},"line":64},"11":{"name":"(anonymous_11)","decl":{"start":{"line":66,"column":47},"end":{"line":66,"column":53}},"loc":{"start":{"line":66,"column":53},"end":{"line":66,"column":67}},"line":66},"12":{"name":"(anonymous_12)","decl":{"start":{"line":67,"column":47},"end":{"line":67,"column":53}},"loc":{"start":{"line":67,"column":53},"end":{"line":67,"column":67}},"line":67},"13":{"name":"(anonymous_13)","decl":{"start":{"line":68,"column":47},"end":{"line":68,"column":53}},"loc":{"start":{"line":68,"column":53},"end":{"line":68,"column":67}},"line":68},"14":{"name":"(anonymous_14)","decl":{"start":{"line":69,"column":49},"end":{"line":69,"column":55}},"loc":{"start":{"line":69,"column":55},"end":{"line":69,"column":75}},"line":69},"15":{"name":"(anonymous_15)","decl":{"start":{"line":73,"column":47},"end":{"line":73,"column":53}},"loc":{"start":{"line":73,"column":53},"end":{"line":73,"column":67}},"line":73}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":2},"end":{"line":26,"column":null}},"type":"default-arg","locations":[{"start":{"line":26,"column":17},"end":{"line":26,"column":null}}],"line":26},"1":{"loc":{"start":{"line":32,"column":7},"end":{"line":38,"column":null}},"type":"binary-expr","locations":[{"start":{"line":32,"column":7},"end":{"line":32,"column":23}},{"start":{"line":32,"column":23},"end":{"line":32,"column":null}},{"start":{"line":33,"column":8},"end":{"line":38,"column":null}}],"line":32},"2":{"loc":{"start":{"line":43,"column":7},"end":{"line":50,"column":null}},"type":"cond-expr","locations":[{"start":{"line":44,"column":8},"end":{"line":48,"column":null}},{"start":{"line":50,"column":8},"end":{"line":50,"column":null}}],"line":43},"3":{"loc":{"start":{"line":45,"column":17},"end":{"line":45,"column":null}},"type":"cond-expr","locations":[{"start":{"line":45,"column":32},"end":{"line":45,"column":38}},{"start":{"line":45,"column":38},"end":{"line":45,"column":null}}],"line":45}},"s":{"0":16,"1":1,"2":1,"3":1,"4":0,"5":0,"6":1,"7":0,"8":1,"9":0,"10":1,"11":0,"12":0,"13":0,"14":2,"15":0},"f":{"0":16,"1":1,"2":1,"3":1,"4":0,"5":0,"6":1,"7":0,"8":1,"9":0,"10":1,"11":0,"12":0,"13":0,"14":2,"15":0},"b":{"0":[16],"1":[16,1,1],"2":[9,7],"3":[0,9]},"meta":{"lastBranch":4,"lastFunction":16,"lastStatement":16,"seen":{"f:17:16:17:23":0,"b:26:17:26:Infinity":0,"s:29:2:76:Infinity":0,"b:32:7:32:23:32:23:32:Infinity:33:8:38:Infinity":1,"f:35:54:35:60":1,"s:35:60:35:82":1,"b:44:8:48:Infinity:50:8:50:Infinity":2,"b:45:32:45:38:45:38:45:Infinity":3,"f:53:49:53:55":2,"s:53:55:53:78":2,"f:56:47:56:53":3,"s:56:53:56:67":3,"f:57:47:57:53":4,"s:57:53:57:67":4,"f:58:47:58:53":5,"s:58:53:58:67":5,"f:59:49:59:55":6,"s:59:55:59:80":6,"f:61:47:61:53":7,"s:61:53:61:67":7,"f:62:47:62:53":8,"s:62:53:62:67":8,"f:63:47:63:53":9,"s:63:53:63:67":9,"f:64:49:64:55":10,"s:64:55:64:80":10,"f:66:47:66:53":11,"s:66:53:66:67":11,"f:67:47:67:53":12,"s:67:53:67:67":12,"f:68:47:68:53":13,"s:68:53:68:67":13,"f:69:49:69:55":14,"s:69:55:69:75":14,"f:73:47:73:53":15,"s:73:53:73:67":15}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\ErrorBoundary\\ErrorBoundary.tsx": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\ErrorBoundary\\ErrorBoundary.tsx","statementMap":{"0":{"start":{"line":14,"column":17},"end":{"line":14,"column":null}},"1":{"start":{"line":24,"column":16},"end":{"line":26,"column":null}},"2":{"start":{"line":17,"column":4},"end":{"line":17,"column":null}},"3":{"start":{"line":21,"column":4},"end":{"line":21,"column":null}},"4":{"start":{"line":25,"column":4},"end":{"line":25,"column":null}},"5":{"start":{"line":29,"column":4},"end":{"line":52,"column":null}},"6":{"start":{"line":30,"column":6},"end":{"line":32,"column":null}},"7":{"start":{"line":31,"column":8},"end":{"line":31,"column":null}},"8":{"start":{"line":33,"column":6},"end":{"line":50,"column":null}},"9":{"start":{"line":53,"column":4},"end":{"line":53,"column":null}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":34}},"loc":{"start":{"line":16,"column":55},"end":{"line":18,"column":null}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":2},"end":{"line":20,"column":20}},"loc":{"start":{"line":20,"column":56},"end":{"line":22,"column":null}},"line":20},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":16},"end":{"line":24,"column":22}},"loc":{"start":{"line":24,"column":22},"end":{"line":26,"column":null}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":2},"end":{"line":28,"column":11}},"loc":{"start":{"line":28,"column":11},"end":{"line":54,"column":null}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":29,"column":4},"end":{"line":52,"column":null}},"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":52,"column":null}},{"start":{},"end":{}}],"line":29},"1":{"loc":{"start":{"line":30,"column":6},"end":{"line":32,"column":null}},"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":32,"column":null}},{"start":{},"end":{}}],"line":30},"2":{"loc":{"start":{"line":40,"column":15},"end":{"line":40,"column":null}},"type":"binary-expr","locations":[{"start":{"line":40,"column":15},"end":{"line":40,"column":44}},{"start":{"line":40,"column":44},"end":{"line":40,"column":null}}],"line":40}},"s":{"0":8,"1":0,"2":6,"3":3,"4":0,"5":14,"6":6,"7":2,"8":4,"9":8},"f":{"0":8,"1":3,"2":0,"3":14},"b":{"0":[6,8],"1":[2,4],"2":[4,0]},"meta":{"lastBranch":3,"lastFunction":4,"lastStatement":10,"seen":{"s:14:17:14:Infinity":0,"s:24:16:26:Infinity":1,"f:16:9:16:34":0,"s:17:4:17:Infinity":2,"f:20:2:20:20":1,"s:21:4:21:Infinity":3,"f:24:16:24:22":2,"s:25:4:25:Infinity":4,"f:28:2:28:11":3,"b:29:4:52:Infinity:undefined:undefined:undefined:undefined":0,"s:29:4:52:Infinity":5,"b:30:6:32:Infinity:undefined:undefined:undefined:undefined":1,"s:30:6:32:Infinity":6,"s:31:8:31:Infinity":7,"s:33:6:50:Infinity":8,"b:40:15:40:44:40:44:40:Infinity":2,"s:53:4:53:Infinity":9}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Loading\\Spinner.tsx": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\components\\Loading\\Spinner.tsx","statementMap":{"0":{"start":{"line":2,"column":2},"end":{"line":11,"column":null}}},"fnMap":{"0":{"name":"Spinner","decl":{"start":{"line":1,"column":16},"end":{"line":1,"column":26}},"loc":{"start":{"line":1,"column":26},"end":{"line":13,"column":null}},"line":1}},"branchMap":{},"s":{"0":2},"f":{"0":2},"b":{},"meta":{"lastBranch":0,"lastFunction":1,"lastStatement":1,"seen":{"f:1:16:1:26":0,"s:2:2:11:Infinity":0}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\hooks\\useApi.ts": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\hooks\\useApi.ts","statementMap":{"0":{"start":{"line":7,"column":8},"end":{"line":53,"column":null}},"1":{"start":{"line":12,"column":6},"end":{"line":50,"column":null}},"2":{"start":{"line":13,"column":8},"end":{"line":17,"column":null}},"3":{"start":{"line":14,"column":26},"end":{"line":14,"column":null}},"4":{"start":{"line":15,"column":27},"end":{"line":15,"column":null}},"5":{"start":{"line":16,"column":10},"end":{"line":16,"column":null}},"6":{"start":{"line":18,"column":25},"end":{"line":18,"column":null}},"7":{"start":{"line":19,"column":25},"end":{"line":19,"column":null}},"8":{"start":{"line":20,"column":8},"end":{"line":47,"column":null}},"9":{"start":{"line":22,"column":29},"end":{"line":22,"column":null}},"10":{"start":{"line":23,"column":12},"end":{"line":23,"column":null}},"11":{"start":{"line":26,"column":29},"end":{"line":26,"column":null}},"12":{"start":{"line":27,"column":12},"end":{"line":27,"column":null}},"13":{"start":{"line":30,"column":29},"end":{"line":30,"column":null}},"14":{"start":{"line":31,"column":12},"end":{"line":31,"column":null}},"15":{"start":{"line":34,"column":29},"end":{"line":34,"column":null}},"16":{"start":{"line":35,"column":12},"end":{"line":35,"column":null}},"17":{"start":{"line":38,"column":29},"end":{"line":38,"column":null}},"18":{"start":{"line":39,"column":12},"end":{"line":39,"column":null}},"19":{"start":{"line":42,"column":29},"end":{"line":42,"column":null}},"20":{"start":{"line":43,"column":12},"end":{"line":43,"column":null}},"21":{"start":{"line":46,"column":12},"end":{"line":46,"column":null}},"22":{"start":{"line":49,"column":8},"end":{"line":49,"column":null}},"23":{"start":{"line":55,"column":2},"end":{"line":55,"column":null}}},"fnMap":{"0":{"name":"useApi","decl":{"start":{"line":6,"column":16},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":25},"end":{"line":56,"column":null}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":null}},"loc":{"start":{"line":11,"column":26},"end":{"line":51,"column":null}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":8},"end":{"line":17,"column":null}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":17,"column":null}},{"start":{},"end":{}}],"line":13},"1":{"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":null}},"type":"binary-expr","locations":[{"start":{"line":14,"column":26},"end":{"line":14,"column":46}},{"start":{"line":14,"column":46},"end":{"line":14,"column":null}}],"line":14},"2":{"loc":{"start":{"line":18,"column":25},"end":{"line":18,"column":null}},"type":"binary-expr","locations":[{"start":{"line":18,"column":25},"end":{"line":18,"column":46}},{"start":{"line":18,"column":46},"end":{"line":18,"column":null}}],"line":18},"3":{"loc":{"start":{"line":19,"column":25},"end":{"line":19,"column":null}},"type":"binary-expr","locations":[{"start":{"line":19,"column":25},"end":{"line":19,"column":46}},{"start":{"line":19,"column":46},"end":{"line":19,"column":null}}],"line":19},"4":{"loc":{"start":{"line":20,"column":8},"end":{"line":47,"column":null}},"type":"switch","locations":[{"start":{"line":21,"column":10},"end":{"line":24,"column":null}},{"start":{"line":25,"column":10},"end":{"line":28,"column":null}},{"start":{"line":29,"column":10},"end":{"line":32,"column":null}},{"start":{"line":33,"column":10},"end":{"line":36,"column":null}},{"start":{"line":37,"column":10},"end":{"line":40,"column":null}},{"start":{"line":41,"column":10},"end":{"line":44,"column":null}},{"start":{"line":45,"column":10},"end":{"line":46,"column":null}}],"line":20}},"s":{"0":7,"1":7,"2":7,"3":1,"4":1,"5":1,"6":6,"7":7,"8":7,"9":2,"10":1,"11":0,"12":0,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":1,"23":7},"f":{"0":7,"1":7},"b":{"0":[1,6],"1":[1,0],"2":[6,0],"3":[7,0],"4":[2,0,1,1,1,1,0]},"meta":{"lastBranch":5,"lastFunction":2,"lastStatement":24,"seen":{"f:6:16:6:25":0,"s:7:8:53:Infinity":0,"f:8:4:8:Infinity":1,"s:12:6:50:Infinity":1,"b:13:8:17:Infinity:undefined:undefined:undefined:undefined":0,"s:13:8:17:Infinity":2,"s:14:26:14:Infinity":3,"b:14:26:14:46:14:46:14:Infinity":1,"s:15:27:15:Infinity":4,"s:16:10:16:Infinity":5,"s:18:25:18:Infinity":6,"b:18:25:18:46:18:46:18:Infinity":2,"s:19:25:19:Infinity":7,"b:19:25:19:46:19:46:19:Infinity":3,"b:21:10:24:Infinity:25:10:28:Infinity:29:10:32:Infinity:33:10:36:Infinity:37:10:40:Infinity:41:10:44:Infinity:45:10:46:Infinity":4,"s:20:8:47:Infinity":8,"s:22:29:22:Infinity":9,"s:23:12:23:Infinity":10,"s:26:29:26:Infinity":11,"s:27:12:27:Infinity":12,"s:30:29:30:Infinity":13,"s:31:12:31:Infinity":14,"s:34:29:34:Infinity":15,"s:35:12:35:Infinity":16,"s:38:29:38:Infinity":17,"s:39:12:39:Infinity":18,"s:42:29:42:Infinity":19,"s:43:12:43:Infinity":20,"s:46:12:46:Infinity":21,"s:49:8:49:Infinity":22,"s:55:2:55:Infinity":23}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\hooks\\useCalculator.ts": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\hooks\\useCalculator.ts","statementMap":{"0":{"start":{"line":10,"column":19},"end":{"line":10,"column":null}},"1":{"start":{"line":11,"column":28},"end":{"line":11,"column":null}},"2":{"start":{"line":28,"column":2},"end":{"line":28,"column":null}},"3":{"start":{"line":32,"column":12},"end":{"line":32,"column":null}},"4":{"start":{"line":33,"column":2},"end":{"line":33,"column":null}},"5":{"start":{"line":36,"column":38},"end":{"line":44,"column":null}},"6":{"start":{"line":50,"column":2},"end":{"line":197,"column":null}},"7":{"start":{"line":52,"column":6},"end":{"line":52,"column":null}},"8":{"start":{"line":55,"column":6},"end":{"line":55,"column":null}},"9":{"start":{"line":58,"column":6},"end":{"line":62,"column":null}},"10":{"start":{"line":64,"column":21},"end":{"line":64,"column":null}},"11":{"start":{"line":65,"column":12},"end":{"line":65,"column":null}},"12":{"start":{"line":66,"column":6},"end":{"line":75,"column":null}},"13":{"start":{"line":78,"column":6},"end":{"line":78,"column":null}},"14":{"start":{"line":81,"column":6},"end":{"line":86,"column":null}},"15":{"start":{"line":82,"column":8},"end":{"line":85,"column":null}},"16":{"start":{"line":87,"column":20},"end":{"line":87,"column":null}},"17":{"start":{"line":89,"column":6},"end":{"line":99,"column":null}},"18":{"start":{"line":90,"column":8},"end":{"line":90,"column":null}},"19":{"start":{"line":92,"column":8},"end":{"line":98,"column":null}},"20":{"start":{"line":93,"column":10},"end":{"line":93,"column":null}},"21":{"start":{"line":94,"column":8},"end":{"line":98,"column":null}},"22":{"start":{"line":95,"column":10},"end":{"line":95,"column":null}},"23":{"start":{"line":97,"column":10},"end":{"line":97,"column":null}},"24":{"start":{"line":100,"column":6},"end":{"line":102,"column":null}},"25":{"start":{"line":101,"column":8},"end":{"line":101,"column":null}},"26":{"start":{"line":103,"column":6},"end":{"line":108,"column":null}},"27":{"start":{"line":112,"column":6},"end":{"line":117,"column":null}},"28":{"start":{"line":113,"column":8},"end":{"line":116,"column":null}},"29":{"start":{"line":119,"column":6},"end":{"line":127,"column":null}},"30":{"start":{"line":120,"column":8},"end":{"line":120,"column":null}},"31":{"start":{"line":121,"column":6},"end":{"line":127,"column":null}},"32":{"start":{"line":122,"column":8},"end":{"line":122,"column":null}},"33":{"start":{"line":123,"column":6},"end":{"line":127,"column":null}},"34":{"start":{"line":124,"column":8},"end":{"line":124,"column":null}},"35":{"start":{"line":126,"column":8},"end":{"line":126,"column":null}},"36":{"start":{"line":128,"column":6},"end":{"line":133,"column":null}},"37":{"start":{"line":137,"column":6},"end":{"line":137,"column":null}},"38":{"start":{"line":137,"column":23},"end":{"line":137,"column":null}},"39":{"start":{"line":138,"column":16},"end":{"line":138,"column":null}},"40":{"start":{"line":139,"column":25},"end":{"line":139,"column":null}},"41":{"start":{"line":140,"column":6},"end":{"line":144,"column":null}},"42":{"start":{"line":148,"column":6},"end":{"line":148,"column":null}},"43":{"start":{"line":148,"column":62},"end":{"line":148,"column":null}},"44":{"start":{"line":149,"column":33},"end":{"line":149,"column":null}},"45":{"start":{"line":150,"column":6},"end":{"line":152,"column":null}},"46":{"start":{"line":151,"column":8},"end":{"line":151,"column":null}},"47":{"start":{"line":153,"column":19},"end":{"line":153,"column":null}},"48":{"start":{"line":154,"column":25},"end":{"line":154,"column":null}},"49":{"start":{"line":155,"column":6},"end":{"line":160,"column":null}},"50":{"start":{"line":165,"column":6},"end":{"line":165,"column":null}},"51":{"start":{"line":165,"column":23},"end":{"line":165,"column":null}},"52":{"start":{"line":167,"column":8},"end":{"line":167,"column":null}},"53":{"start":{"line":168,"column":22},"end":{"line":168,"column":null}},"54":{"start":{"line":169,"column":6},"end":{"line":180,"column":null}},"55":{"start":{"line":174,"column":8},"end":{"line":179,"column":null}},"56":{"start":{"line":181,"column":6},"end":{"line":189,"column":null}},"57":{"start":{"line":193,"column":6},"end":{"line":193,"column":null}},"58":{"start":{"line":196,"column":6},"end":{"line":196,"column":null}},"59":{"start":{"line":201,"column":24},"end":{"line":201,"column":null}},"60":{"start":{"line":202,"column":27},"end":{"line":202,"column":null}},"61":{"start":{"line":204,"column":8},"end":{"line":250,"column":null}},"62":{"start":{"line":205,"column":15},"end":{"line":205,"column":null}},"63":{"start":{"line":206,"column":4},"end":{"line":206,"column":null}},"64":{"start":{"line":206,"column":13},"end":{"line":206,"column":null}},"65":{"start":{"line":207,"column":4},"end":{"line":207,"column":null}},"66":{"start":{"line":208,"column":20},"end":{"line":208,"column":null}},"67":{"start":{"line":209,"column":4},"end":{"line":228,"column":null}},"68":{"start":{"line":210,"column":6},"end":{"line":216,"column":null}},"69":{"start":{"line":211,"column":8},"end":{"line":214,"column":null}},"70":{"start":{"line":215,"column":8},"end":{"line":215,"column":null}},"71":{"start":{"line":217,"column":6},"end":{"line":217,"column":null}},"72":{"start":{"line":218,"column":6},"end":{"line":226,"column":null}},"73":{"start":{"line":219,"column":23},"end":{"line":219,"column":null}},"74":{"start":{"line":220,"column":8},"end":{"line":220,"column":null}},"75":{"start":{"line":222,"column":8},"end":{"line":225,"column":null}},"76":{"start":{"line":227,"column":6},"end":{"line":227,"column":null}},"77":{"start":{"line":229,"column":17},"end":{"line":229,"column":null}},"78":{"start":{"line":230,"column":4},"end":{"line":236,"column":null}},"79":{"start":{"line":231,"column":6},"end":{"line":234,"column":null}},"80":{"start":{"line":235,"column":6},"end":{"line":235,"column":null}},"81":{"start":{"line":237,"column":4},"end":{"line":237,"column":null}},"82":{"start":{"line":238,"column":4},"end":{"line":249,"column":null}},"83":{"start":{"line":239,"column":21},"end":{"line":242,"column":null}},"84":{"start":{"line":243,"column":6},"end":{"line":243,"column":null}},"85":{"start":{"line":245,"column":6},"end":{"line":248,"column":null}},"86":{"start":{"line":252,"column":8},"end":{"line":272,"column":null}},"87":{"start":{"line":253,"column":4},"end":{"line":253,"column":null}},"88":{"start":{"line":254,"column":20},"end":{"line":254,"column":null}},"89":{"start":{"line":255,"column":4},"end":{"line":261,"column":null}},"90":{"start":{"line":256,"column":6},"end":{"line":259,"column":null}},"91":{"start":{"line":260,"column":6},"end":{"line":260,"column":null}},"92":{"start":{"line":262,"column":4},"end":{"line":262,"column":null}},"93":{"start":{"line":263,"column":4},"end":{"line":271,"column":null}},"94":{"start":{"line":264,"column":21},"end":{"line":264,"column":null}},"95":{"start":{"line":265,"column":6},"end":{"line":265,"column":null}},"96":{"start":{"line":267,"column":6},"end":{"line":270,"column":null}},"97":{"start":{"line":274,"column":2},"end":{"line":274,"column":null}}},"fnMap":{"0":{"name":"digitCount","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":20}},"loc":{"start":{"line":27,"column":45},"end":{"line":29,"column":null}},"line":27},"1":{"name":"parseDisplay","decl":{"start":{"line":31,"column":9},"end":{"line":31,"column":22}},"loc":{"start":{"line":31,"column":47},"end":{"line":34,"column":null}},"line":31},"2":{"name":"calculatorReducer","decl":{"start":{"line":46,"column":16},"end":{"line":46,"column":null}},"loc":{"start":{"line":49,"column":19},"end":{"line":198,"column":null}},"line":49},"3":{"name":"useCalculator","decl":{"start":{"line":200,"column":16},"end":{"line":200,"column":32}},"loc":{"start":{"line":200,"column":32},"end":{"line":275,"column":null}},"line":200},"4":{"name":"(anonymous_4)","decl":{"start":{"line":204,"column":38},"end":{"line":204,"column":50}},"loc":{"start":{"line":204,"column":50},"end":{"line":250,"column":5}},"line":204},"5":{"name":"(anonymous_5)","decl":{"start":{"line":252,"column":33},"end":{"line":252,"column":45}},"loc":{"start":{"line":252,"column":45},"end":{"line":272,"column":5}},"line":252}},"branchMap":{"0":{"loc":{"start":{"line":33,"column":9},"end":{"line":33,"column":null}},"type":"cond-expr","locations":[{"start":{"line":33,"column":27},"end":{"line":33,"column":31}},{"start":{"line":33,"column":31},"end":{"line":33,"column":null}}],"line":33},"1":{"loc":{"start":{"line":50,"column":2},"end":{"line":197,"column":null}},"type":"switch","locations":[{"start":{"line":51,"column":4},"end":{"line":52,"column":null}},{"start":{"line":54,"column":4},"end":{"line":55,"column":null}},{"start":{"line":57,"column":4},"end":{"line":62,"column":null}},{"start":{"line":63,"column":4},"end":{"line":76,"column":null}},{"start":{"line":77,"column":4},"end":{"line":78,"column":null}},{"start":{"line":80,"column":4},"end":{"line":109,"column":null}},{"start":{"line":111,"column":4},"end":{"line":134,"column":null}},{"start":{"line":136,"column":4},"end":{"line":145,"column":null}},{"start":{"line":147,"column":4},"end":{"line":161,"column":null}},{"start":{"line":163,"column":4},"end":{"line":163,"column":null}},{"start":{"line":164,"column":4},"end":{"line":190,"column":null}},{"start":{"line":192,"column":4},"end":{"line":193,"column":null}},{"start":{"line":195,"column":4},"end":{"line":196,"column":null}}],"line":50},"2":{"loc":{"start":{"line":81,"column":6},"end":{"line":86,"column":null}},"type":"if","locations":[{"start":{"line":81,"column":6},"end":{"line":86,"column":null}},{"start":{},"end":{}}],"line":81},"3":{"loc":{"start":{"line":89,"column":6},"end":{"line":99,"column":null}},"type":"if","locations":[{"start":{"line":89,"column":6},"end":{"line":99,"column":null}},{"start":{"line":91,"column":13},"end":{"line":99,"column":null}}],"line":89},"4":{"loc":{"start":{"line":90,"column":21},"end":{"line":90,"column":null}},"type":"cond-expr","locations":[{"start":{"line":90,"column":37},"end":{"line":90,"column":43}},{"start":{"line":90,"column":43},"end":{"line":90,"column":null}}],"line":90},"5":{"loc":{"start":{"line":92,"column":8},"end":{"line":98,"column":null}},"type":"if","locations":[{"start":{"line":92,"column":8},"end":{"line":98,"column":null}},{"start":{"line":94,"column":8},"end":{"line":98,"column":null}}],"line":92},"6":{"loc":{"start":{"line":92,"column":12},"end":{"line":92,"column":52}},"type":"binary-expr","locations":[{"start":{"line":92,"column":12},"end":{"line":92,"column":37}},{"start":{"line":92,"column":37},"end":{"line":92,"column":52}}],"line":92},"7":{"loc":{"start":{"line":94,"column":8},"end":{"line":98,"column":null}},"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":98,"column":null}},{"start":{"line":96,"column":15},"end":{"line":98,"column":null}}],"line":94},"8":{"loc":{"start":{"line":94,"column":19},"end":{"line":94,"column":59}},"type":"binary-expr","locations":[{"start":{"line":94,"column":19},"end":{"line":94,"column":44}},{"start":{"line":94,"column":44},"end":{"line":94,"column":59}}],"line":94},"9":{"loc":{"start":{"line":100,"column":6},"end":{"line":102,"column":null}},"type":"if","locations":[{"start":{"line":100,"column":6},"end":{"line":102,"column":null}},{"start":{},"end":{}}],"line":100},"10":{"loc":{"start":{"line":112,"column":6},"end":{"line":117,"column":null}},"type":"if","locations":[{"start":{"line":112,"column":6},"end":{"line":117,"column":null}},{"start":{},"end":{}}],"line":112},"11":{"loc":{"start":{"line":119,"column":6},"end":{"line":127,"column":null}},"type":"if","locations":[{"start":{"line":119,"column":6},"end":{"line":127,"column":null}},{"start":{"line":121,"column":6},"end":{"line":127,"column":null}}],"line":119},"12":{"loc":{"start":{"line":121,"column":6},"end":{"line":127,"column":null}},"type":"if","locations":[{"start":{"line":121,"column":6},"end":{"line":127,"column":null}},{"start":{"line":123,"column":6},"end":{"line":127,"column":null}}],"line":121},"13":{"loc":{"start":{"line":123,"column":6},"end":{"line":127,"column":null}},"type":"if","locations":[{"start":{"line":123,"column":6},"end":{"line":127,"column":null}},{"start":{"line":125,"column":13},"end":{"line":127,"column":null}}],"line":123},"14":{"loc":{"start":{"line":137,"column":6},"end":{"line":137,"column":null}},"type":"if","locations":[{"start":{"line":137,"column":6},"end":{"line":137,"column":null}},{"start":{},"end":{}}],"line":137},"15":{"loc":{"start":{"line":139,"column":25},"end":{"line":139,"column":null}},"type":"cond-expr","locations":[{"start":{"line":139,"column":35},"end":{"line":139,"column":41}},{"start":{"line":139,"column":41},"end":{"line":139,"column":null}}],"line":139},"16":{"loc":{"start":{"line":148,"column":6},"end":{"line":148,"column":null}},"type":"if","locations":[{"start":{"line":148,"column":6},"end":{"line":148,"column":null}},{"start":{},"end":{}}],"line":148},"17":{"loc":{"start":{"line":148,"column":10},"end":{"line":148,"column":62}},"type":"binary-expr","locations":[{"start":{"line":148,"column":10},"end":{"line":148,"column":25}},{"start":{"line":148,"column":25},"end":{"line":148,"column":62}}],"line":148},"18":{"loc":{"start":{"line":150,"column":6},"end":{"line":152,"column":null}},"type":"if","locations":[{"start":{"line":150,"column":6},"end":{"line":152,"column":null}},{"start":{},"end":{}}],"line":150},"19":{"loc":{"start":{"line":150,"column":10},"end":{"line":150,"column":62}},"type":"binary-expr","locations":[{"start":{"line":150,"column":10},"end":{"line":150,"column":35}},{"start":{"line":150,"column":35},"end":{"line":150,"column":62}}],"line":150},"20":{"loc":{"start":{"line":151,"column":65},"end":{"line":151,"column":105}},"type":"cond-expr","locations":[{"start":{"line":151,"column":86},"end":{"line":151,"column":93}},{"start":{"line":151,"column":93},"end":{"line":151,"column":105}}],"line":151},"21":{"loc":{"start":{"line":154,"column":25},"end":{"line":154,"column":null}},"type":"cond-expr","locations":[{"start":{"line":154,"column":55},"end":{"line":154,"column":61}},{"start":{"line":154,"column":61},"end":{"line":154,"column":null}}],"line":154},"22":{"loc":{"start":{"line":154,"column":25},"end":{"line":154,"column":55}},"type":"binary-expr","locations":[{"start":{"line":154,"column":25},"end":{"line":154,"column":40}},{"start":{"line":154,"column":40},"end":{"line":154,"column":55}}],"line":154},"23":{"loc":{"start":{"line":159,"column":15},"end":{"line":159,"column":null}},"type":"cond-expr","locations":[{"start":{"line":159,"column":36},"end":{"line":159,"column":43}},{"start":{"line":159,"column":43},"end":{"line":159,"column":null}}],"line":159},"24":{"loc":{"start":{"line":165,"column":6},"end":{"line":165,"column":null}},"type":"if","locations":[{"start":{"line":165,"column":6},"end":{"line":165,"column":null}},{"start":{},"end":{}}],"line":165},"25":{"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":null}},"type":"cond-expr","locations":[{"start":{"line":167,"column":39},"end":{"line":167,"column":54}},{"start":{"line":167,"column":54},"end":{"line":167,"column":null}}],"line":167},"26":{"loc":{"start":{"line":169,"column":6},"end":{"line":180,"column":null}},"type":"if","locations":[{"start":{"line":169,"column":6},"end":{"line":180,"column":null}},{"start":{},"end":{}}],"line":169},"27":{"loc":{"start":{"line":170,"column":8},"end":{"line":172,"column":null}},"type":"binary-expr","locations":[{"start":{"line":170,"column":8},"end":{"line":170,"column":null}},{"start":{"line":171,"column":8},"end":{"line":171,"column":null}},{"start":{"line":172,"column":8},"end":{"line":172,"column":null}}],"line":170},"28":{"loc":{"start":{"line":184,"column":10},"end":{"line":186,"column":null}},"type":"cond-expr","locations":[{"start":{"line":185,"column":14},"end":{"line":185,"column":null}},{"start":{"line":186,"column":14},"end":{"line":186,"column":null}}],"line":184},"29":{"loc":{"start":{"line":184,"column":10},"end":{"line":184,"column":null}},"type":"binary-expr","locations":[{"start":{"line":184,"column":10},"end":{"line":184,"column":37}},{"start":{"line":184,"column":37},"end":{"line":184,"column":null}}],"line":184},"30":{"loc":{"start":{"line":206,"column":4},"end":{"line":206,"column":null}},"type":"if","locations":[{"start":{"line":206,"column":4},"end":{"line":206,"column":null}},{"start":{},"end":{}}],"line":206},"31":{"loc":{"start":{"line":209,"column":4},"end":{"line":228,"column":null}},"type":"if","locations":[{"start":{"line":209,"column":4},"end":{"line":228,"column":null}},{"start":{},"end":{}}],"line":209},"32":{"loc":{"start":{"line":210,"column":6},"end":{"line":216,"column":null}},"type":"if","locations":[{"start":{"line":210,"column":6},"end":{"line":216,"column":null}},{"start":{},"end":{}}],"line":210},"33":{"loc":{"start":{"line":224,"column":19},"end":{"line":224,"column":null}},"type":"cond-expr","locations":[{"start":{"line":224,"column":42},"end":{"line":224,"column":56}},{"start":{"line":224,"column":56},"end":{"line":224,"column":null}}],"line":224},"34":{"loc":{"start":{"line":229,"column":17},"end":{"line":229,"column":null}},"type":"binary-expr","locations":[{"start":{"line":229,"column":17},"end":{"line":229,"column":40}},{"start":{"line":229,"column":40},"end":{"line":229,"column":null}}],"line":229},"35":{"loc":{"start":{"line":230,"column":4},"end":{"line":236,"column":null}},"type":"if","locations":[{"start":{"line":230,"column":4},"end":{"line":236,"column":null}},{"start":{},"end":{}}],"line":230},"36":{"loc":{"start":{"line":230,"column":8},"end":{"line":230,"column":54}},"type":"binary-expr","locations":[{"start":{"line":230,"column":8},"end":{"line":230,"column":27}},{"start":{"line":230,"column":15},"end":{"line":230,"column":54}}],"line":230},"37":{"loc":{"start":{"line":247,"column":17},"end":{"line":247,"column":null}},"type":"cond-expr","locations":[{"start":{"line":247,"column":40},"end":{"line":247,"column":54}},{"start":{"line":247,"column":54},"end":{"line":247,"column":null}}],"line":247},"38":{"loc":{"start":{"line":255,"column":4},"end":{"line":261,"column":null}},"type":"if","locations":[{"start":{"line":255,"column":4},"end":{"line":261,"column":null}},{"start":{},"end":{}}],"line":255},"39":{"loc":{"start":{"line":269,"column":17},"end":{"line":269,"column":null}},"type":"cond-expr","locations":[{"start":{"line":269,"column":40},"end":{"line":269,"column":54}},{"start":{"line":269,"column":54},"end":{"line":269,"column":null}}],"line":269}},"s":{"0":1,"1":1,"2":90,"3":101,"4":101,"5":1,"6":121,"7":5,"8":4,"9":4,"10":3,"11":3,"12":3,"13":1,"14":86,"15":0,"16":86,"17":86,"18":4,"19":82,"20":18,"21":64,"22":0,"23":64,"24":86,"25":3,"26":83,"27":5,"28":0,"29":5,"30":0,"31":5,"32":1,"33":4,"34":1,"35":3,"36":3,"37":3,"38":1,"39":2,"40":2,"41":3,"42":2,"43":1,"44":1,"45":1,"46":0,"47":1,"48":1,"49":2,"50":7,"51":0,"52":7,"53":7,"54":7,"55":1,"56":6,"57":1,"58":0,"59":133,"60":133,"61":133,"62":4,"63":4,"64":0,"65":4,"66":4,"67":4,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":4,"78":4,"79":1,"80":1,"81":3,"82":3,"83":3,"84":2,"85":1,"86":133,"87":1,"88":1,"89":1,"90":0,"91":0,"92":1,"93":1,"94":1,"95":1,"96":0,"97":133},"f":{"0":90,"1":101,"2":121,"3":133,"4":4,"5":1},"b":{"0":[0,101],"1":[5,4,4,3,1,86,5,3,2,5,7,1,0],"2":[0,86],"3":[4,82],"4":[1,3],"5":[18,64],"6":[82,18],"7":[0,64],"8":[64,0],"9":[3,83],"10":[0,5],"11":[0,5],"12":[1,4],"13":[1,3],"14":[1,2],"15":[1,1],"16":[1,1],"17":[2,2],"18":[0,1],"19":[1,1],"20":[0,0],"21":[0,1],"22":[1,1],"23":[1,0],"24":[0,7],"25":[2,5],"26":[1,6],"27":[7,1,1],"28":[0,6],"29":[6,0],"30":[0,4],"31":[0,4],"32":[0,0],"33":[0,0],"34":[4,0],"35":[1,3],"36":[4,1],"37":[1,0],"38":[0,1],"39":[0,0]},"meta":{"lastBranch":40,"lastFunction":6,"lastStatement":98,"seen":{"s:10:19:10:Infinity":0,"s:11:28:11:Infinity":1,"f:27:9:27:20":0,"s:28:2:28:Infinity":2,"f:31:9:31:22":1,"s:32:12:32:Infinity":3,"s:33:2:33:Infinity":4,"b:33:27:33:31:33:31:33:Infinity":0,"s:36:38:44:Infinity":5,"f:46:16:46:Infinity":2,"b:51:4:52:Infinity:54:4:55:Infinity:57:4:62:Infinity:63:4:76:Infinity:77:4:78:Infinity:80:4:109:Infinity:111:4:134:Infinity:136:4:145:Infinity:147:4:161:Infinity:163:4:163:Infinity:164:4:190:Infinity:192:4:193:Infinity:195:4:196:Infinity":1,"s:50:2:197:Infinity":6,"s:52:6:52:Infinity":7,"s:55:6:55:Infinity":8,"s:58:6:62:Infinity":9,"s:64:21:64:Infinity":10,"s:65:12:65:Infinity":11,"s:66:6:75:Infinity":12,"s:78:6:78:Infinity":13,"b:81:6:86:Infinity:undefined:undefined:undefined:undefined":2,"s:81:6:86:Infinity":14,"s:82:8:85:Infinity":15,"s:87:20:87:Infinity":16,"b:89:6:99:Infinity:91:13:99:Infinity":3,"s:89:6:99:Infinity":17,"s:90:8:90:Infinity":18,"b:90:37:90:43:90:43:90:Infinity":4,"b:92:8:98:Infinity:94:8:98:Infinity":5,"s:92:8:98:Infinity":19,"b:92:12:92:37:92:37:92:52":6,"s:93:10:93:Infinity":20,"b:94:8:98:Infinity:96:15:98:Infinity":7,"s:94:8:98:Infinity":21,"b:94:19:94:44:94:44:94:59":8,"s:95:10:95:Infinity":22,"s:97:10:97:Infinity":23,"b:100:6:102:Infinity:undefined:undefined:undefined:undefined":9,"s:100:6:102:Infinity":24,"s:101:8:101:Infinity":25,"s:103:6:108:Infinity":26,"b:112:6:117:Infinity:undefined:undefined:undefined:undefined":10,"s:112:6:117:Infinity":27,"s:113:8:116:Infinity":28,"b:119:6:127:Infinity:121:6:127:Infinity":11,"s:119:6:127:Infinity":29,"s:120:8:120:Infinity":30,"b:121:6:127:Infinity:123:6:127:Infinity":12,"s:121:6:127:Infinity":31,"s:122:8:122:Infinity":32,"b:123:6:127:Infinity:125:13:127:Infinity":13,"s:123:6:127:Infinity":33,"s:124:8:124:Infinity":34,"s:126:8:126:Infinity":35,"s:128:6:133:Infinity":36,"b:137:6:137:Infinity:undefined:undefined:undefined:undefined":14,"s:137:6:137:Infinity":37,"s:137:23:137:Infinity":38,"s:138:16:138:Infinity":39,"s:139:25:139:Infinity":40,"b:139:35:139:41:139:41:139:Infinity":15,"s:140:6:144:Infinity":41,"b:148:6:148:Infinity:undefined:undefined:undefined:undefined":16,"s:148:6:148:Infinity":42,"b:148:10:148:25:148:25:148:62":17,"s:148:62:148:Infinity":43,"s:149:33:149:Infinity":44,"b:150:6:152:Infinity:undefined:undefined:undefined:undefined":18,"s:150:6:152:Infinity":45,"b:150:10:150:35:150:35:150:62":19,"s:151:8:151:Infinity":46,"b:151:86:151:93:151:93:151:105":20,"s:153:19:153:Infinity":47,"s:154:25:154:Infinity":48,"b:154:55:154:61:154:61:154:Infinity":21,"b:154:25:154:40:154:40:154:55":22,"s:155:6:160:Infinity":49,"b:159:36:159:43:159:43:159:Infinity":23,"b:165:6:165:Infinity:undefined:undefined:undefined:undefined":24,"s:165:6:165:Infinity":50,"s:165:23:165:Infinity":51,"s:167:8:167:Infinity":52,"b:167:39:167:54:167:54:167:Infinity":25,"s:168:22:168:Infinity":53,"b:169:6:180:Infinity:undefined:undefined:undefined:undefined":26,"s:169:6:180:Infinity":54,"b:170:8:170:Infinity:171:8:171:Infinity:172:8:172:Infinity":27,"s:174:8:179:Infinity":55,"s:181:6:189:Infinity":56,"b:185:14:185:Infinity:186:14:186:Infinity":28,"b:184:10:184:37:184:37:184:Infinity":29,"s:193:6:193:Infinity":57,"s:196:6:196:Infinity":58,"f:200:16:200:32":3,"s:201:24:201:Infinity":59,"s:202:27:202:Infinity":60,"s:204:8:250:Infinity":61,"f:204:38:204:50":4,"s:205:15:205:Infinity":62,"b:206:4:206:Infinity:undefined:undefined:undefined:undefined":30,"s:206:4:206:Infinity":63,"s:206:13:206:Infinity":64,"s:207:4:207:Infinity":65,"s:208:20:208:Infinity":66,"b:209:4:228:Infinity:undefined:undefined:undefined:undefined":31,"s:209:4:228:Infinity":67,"b:210:6:216:Infinity:undefined:undefined:undefined:undefined":32,"s:210:6:216:Infinity":68,"s:211:8:214:Infinity":69,"s:215:8:215:Infinity":70,"s:217:6:217:Infinity":71,"s:218:6:226:Infinity":72,"s:219:23:219:Infinity":73,"s:220:8:220:Infinity":74,"s:222:8:225:Infinity":75,"b:224:42:224:56:224:56:224:Infinity":33,"s:227:6:227:Infinity":76,"s:229:17:229:Infinity":77,"b:229:17:229:40:229:40:229:Infinity":34,"b:230:4:236:Infinity:undefined:undefined:undefined:undefined":35,"s:230:4:236:Infinity":78,"b:230:8:230:27:230:15:230:54":36,"s:231:6:234:Infinity":79,"s:235:6:235:Infinity":80,"s:237:4:237:Infinity":81,"s:238:4:249:Infinity":82,"s:239:21:242:Infinity":83,"s:243:6:243:Infinity":84,"s:245:6:248:Infinity":85,"b:247:40:247:54:247:54:247:Infinity":37,"s:252:8:272:Infinity":86,"f:252:33:252:45":5,"s:253:4:253:Infinity":87,"s:254:20:254:Infinity":88,"b:255:4:261:Infinity:undefined:undefined:undefined:undefined":38,"s:255:4:261:Infinity":89,"s:256:6:259:Infinity":90,"s:260:6:260:Infinity":91,"s:262:4:262:Infinity":92,"s:263:4:271:Infinity":93,"s:264:21:264:Infinity":94,"s:265:6:265:Infinity":95,"s:267:6:270:Infinity":96,"b:269:40:269:54:269:54:269:Infinity":39,"s:274:2:274:Infinity":97}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\services\\calculatorApi.ts": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\services\\calculatorApi.ts","statementMap":{"0":{"start":{"line":5,"column":2},"end":{"line":5,"column":null}},"1":{"start":{"line":7,"column":18},"end":{"line":11,"column":null}},"2":{"start":{"line":13,"column":29},"end":{"line":37,"column":null}},"3":{"start":{"line":15,"column":4},"end":{"line":15,"column":null}},"4":{"start":{"line":18,"column":4},"end":{"line":18,"column":null}},"5":{"start":{"line":21,"column":4},"end":{"line":21,"column":null}},"6":{"start":{"line":24,"column":4},"end":{"line":24,"column":null}},"7":{"start":{"line":27,"column":4},"end":{"line":27,"column":null}},"8":{"start":{"line":30,"column":4},"end":{"line":30,"column":null}},"9":{"start":{"line":33,"column":4},"end":{"line":36,"column":null}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":14,"column":7},"end":{"line":14,"column":8}},"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":null}},"line":15},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":12},"end":{"line":17,"column":13}},"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":null}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":12},"end":{"line":20,"column":13}},"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":null}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":10},"end":{"line":23,"column":11}},"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":null}},"line":24},"4":{"name":"(anonymous_4)","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":10}},"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":null}},"line":27},"5":{"name":"(anonymous_5)","decl":{"start":{"line":29,"column":8},"end":{"line":29,"column":9}},"loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":null}},"line":30},"6":{"name":"(anonymous_6)","decl":{"start":{"line":32,"column":14},"end":{"line":32,"column":15}},"loc":{"start":{"line":33,"column":4},"end":{"line":36,"column":null}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":2},"end":{"line":5,"column":null}},"type":"binary-expr","locations":[{"start":{"line":5,"column":2},"end":{"line":5,"column":34}},{"start":{"line":5,"column":34},"end":{"line":5,"column":null}}],"line":5}},"s":{"0":1,"1":1,"2":1,"3":3,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":3,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"b":{"0":[1,1]},"meta":{"lastBranch":1,"lastFunction":7,"lastStatement":10,"seen":{"s:5:2:5:Infinity":0,"b:5:2:5:34:5:34:5:Infinity":0,"s:7:18:11:Infinity":1,"s:13:29:37:Infinity":2,"f:14:7:14:8":0,"s:15:4:15:Infinity":3,"f:17:12:17:13":1,"s:18:4:18:Infinity":4,"f:20:12:20:13":2,"s:21:4:21:Infinity":5,"f:23:10:23:11":3,"s:24:4:24:Infinity":6,"f:26:9:26:10":4,"s:27:4:27:Infinity":7,"f:29:8:29:9":5,"s:30:4:30:Infinity":8,"f:32:14:32:15":6,"s:33:4:36:Infinity":9}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\utils\\errorMessages.ts": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\utils\\errorMessages.ts","statementMap":{"0":{"start":{"line":3,"column":47},"end":{"line":10,"column":null}},"1":{"start":{"line":16,"column":2},"end":{"line":25,"column":null}},"2":{"start":{"line":17,"column":23},"end":{"line":17,"column":null}},"3":{"start":{"line":18,"column":17},"end":{"line":18,"column":null}},"4":{"start":{"line":19,"column":4},"end":{"line":21,"column":null}},"5":{"start":{"line":20,"column":6},"end":{"line":20,"column":null}},"6":{"start":{"line":22,"column":4},"end":{"line":24,"column":null}},"7":{"start":{"line":23,"column":6},"end":{"line":23,"column":null}},"8":{"start":{"line":26,"column":2},"end":{"line":31,"column":null}},"9":{"start":{"line":27,"column":4},"end":{"line":29,"column":null}},"10":{"start":{"line":28,"column":6},"end":{"line":28,"column":null}},"11":{"start":{"line":30,"column":4},"end":{"line":30,"column":null}},"12":{"start":{"line":32,"column":2},"end":{"line":32,"column":null}}},"fnMap":{"0":{"name":"getUserFriendlyErrorMessage","decl":{"start":{"line":12,"column":16},"end":{"line":12,"column":null}},"loc":{"start":{"line":15,"column":10},"end":{"line":33,"column":null}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":2},"end":{"line":14,"column":null}},"type":"default-arg","locations":[{"start":{"line":14,"column":19},"end":{"line":14,"column":null}}],"line":14},"1":{"loc":{"start":{"line":16,"column":2},"end":{"line":25,"column":null}},"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":25,"column":null}},{"start":{},"end":{}}],"line":16},"2":{"loc":{"start":{"line":16,"column":6},"end":{"line":16,"column":74}},"type":"binary-expr","locations":[{"start":{"line":16,"column":6},"end":{"line":16,"column":35}},{"start":{"line":16,"column":35},"end":{"line":16,"column":53}},{"start":{"line":16,"column":53},"end":{"line":16,"column":74}}],"line":16},"3":{"loc":{"start":{"line":19,"column":4},"end":{"line":21,"column":null}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":21,"column":null}},{"start":{},"end":{}}],"line":19},"4":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":59}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},{"start":{"line":19,"column":27},"end":{"line":19,"column":59}}],"line":19},"5":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":null}},"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":24,"column":null}},{"start":{},"end":{}}],"line":22},"6":{"loc":{"start":{"line":26,"column":2},"end":{"line":31,"column":null}},"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":31,"column":null}},{"start":{},"end":{}}],"line":26},"7":{"loc":{"start":{"line":27,"column":4},"end":{"line":29,"column":null}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":29,"column":null}},{"start":{},"end":{}}],"line":27},"8":{"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":80}},"type":"binary-expr","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":45}},{"start":{"line":27,"column":45},"end":{"line":27,"column":80}}],"line":27}},"s":{"0":2,"1":5,"2":3,"3":3,"4":3,"5":3,"6":0,"7":0,"8":2,"9":1,"10":1,"11":0,"12":1},"f":{"0":5},"b":{"0":[5],"1":[3,2],"2":[5,5,5],"3":[3,0],"4":[3,3],"5":[0,0],"6":[1,1],"7":[1,0],"8":[1,1]},"meta":{"lastBranch":9,"lastFunction":1,"lastStatement":13,"seen":{"s:3:47:10:Infinity":0,"f:12:16:12:Infinity":0,"b:14:19:14:Infinity":0,"b:16:2:25:Infinity:undefined:undefined:undefined:undefined":1,"s:16:2:25:Infinity":1,"b:16:6:16:35:16:35:16:53:16:53:16:74":2,"s:17:23:17:Infinity":2,"s:18:17:18:Infinity":3,"b:19:4:21:Infinity:undefined:undefined:undefined:undefined":3,"s:19:4:21:Infinity":4,"b:19:8:19:27:19:27:19:59":4,"s:20:6:20:Infinity":5,"b:22:4:24:Infinity:undefined:undefined:undefined:undefined":5,"s:22:4:24:Infinity":6,"s:23:6:23:Infinity":7,"b:26:2:31:Infinity:undefined:undefined:undefined:undefined":6,"s:26:2:31:Infinity":8,"b:27:4:29:Infinity:undefined:undefined:undefined:undefined":7,"s:27:4:29:Infinity":9,"b:27:8:27:45:27:45:27:80":8,"s:28:6:28:Infinity":10,"s:30:4:30:Infinity":11,"s:32:2:32:Infinity":12}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\utils\\formatNumber.ts": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\utils\\formatNumber.ts","statementMap":{"0":{"start":{"line":1,"column":27},"end":{"line":1,"column":null}},"1":{"start":{"line":2,"column":31},"end":{"line":2,"column":null}},"2":{"start":{"line":9,"column":2},"end":{"line":9,"column":null}},"3":{"start":{"line":9,"column":31},"end":{"line":9,"column":null}},"4":{"start":{"line":10,"column":14},"end":{"line":10,"column":null}},"5":{"start":{"line":11,"column":2},"end":{"line":13,"column":null}},"6":{"start":{"line":12,"column":4},"end":{"line":12,"column":null}},"7":{"start":{"line":14,"column":20},"end":{"line":18,"column":null}},"8":{"start":{"line":19,"column":2},"end":{"line":21,"column":null}},"9":{"start":{"line":20,"column":4},"end":{"line":20,"column":null}},"10":{"start":{"line":22,"column":2},"end":{"line":24,"column":null}},"11":{"start":{"line":28,"column":2},"end":{"line":30,"column":null}},"12":{"start":{"line":29,"column":4},"end":{"line":29,"column":null}},"13":{"start":{"line":31,"column":2},"end":{"line":31,"column":null}},"14":{"start":{"line":39,"column":2},"end":{"line":42,"column":null}},"15":{"start":{"line":40,"column":4},"end":{"line":40,"column":null}},"16":{"start":{"line":40,"column":33},"end":{"line":40,"column":null}},"17":{"start":{"line":41,"column":4},"end":{"line":41,"column":null}},"18":{"start":{"line":43,"column":18},"end":{"line":43,"column":null}},"19":{"start":{"line":44,"column":2},"end":{"line":44,"column":null}},"20":{"start":{"line":44,"column":54},"end":{"line":44,"column":null}},"21":{"start":{"line":45,"column":12},"end":{"line":45,"column":null}},"22":{"start":{"line":46,"column":2},"end":{"line":46,"column":null}},"23":{"start":{"line":46,"column":23},"end":{"line":46,"column":null}},"24":{"start":{"line":47,"column":2},"end":{"line":47,"column":null}}},"fnMap":{"0":{"name":"formatResultForDisplay","decl":{"start":{"line":8,"column":16},"end":{"line":8,"column":39}},"loc":{"start":{"line":8,"column":62},"end":{"line":25,"column":null}},"line":8},"1":{"name":"trimTrailingZeros","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":27}},"loc":{"start":{"line":27,"column":46},"end":{"line":32,"column":null}},"line":27},"2":{"name":"formatNumber","decl":{"start":{"line":38,"column":16},"end":{"line":38,"column":29}},"loc":{"start":{"line":38,"column":61},"end":{"line":48,"column":null}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":2},"end":{"line":9,"column":null}},"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":9,"column":null}},{"start":{},"end":{}}],"line":9},"1":{"loc":{"start":{"line":11,"column":2},"end":{"line":13,"column":null}},"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":13,"column":null}},{"start":{},"end":{}}],"line":11},"2":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":null}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":53}},{"start":{"line":12,"column":53},"end":{"line":12,"column":null}}],"line":12},"3":{"loc":{"start":{"line":19,"column":2},"end":{"line":21,"column":null}},"type":"if","locations":[{"start":{"line":19,"column":2},"end":{"line":21,"column":null}},{"start":{},"end":{}}],"line":19},"4":{"loc":{"start":{"line":19,"column":6},"end":{"line":19,"column":58}},"type":"binary-expr","locations":[{"start":{"line":19,"column":6},"end":{"line":19,"column":33}},{"start":{"line":19,"column":33},"end":{"line":19,"column":58}}],"line":19},"5":{"loc":{"start":{"line":22,"column":9},"end":{"line":24,"column":null}},"type":"cond-expr","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":null}},{"start":{"line":24,"column":6},"end":{"line":24,"column":null}}],"line":22},"6":{"loc":{"start":{"line":28,"column":2},"end":{"line":30,"column":null}},"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":30,"column":null}},{"start":{},"end":{}}],"line":28},"7":{"loc":{"start":{"line":39,"column":2},"end":{"line":42,"column":null}},"type":"if","locations":[{"start":{"line":39,"column":2},"end":{"line":42,"column":null}},{"start":{},"end":{}}],"line":39},"8":{"loc":{"start":{"line":40,"column":4},"end":{"line":40,"column":null}},"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":null}},{"start":{},"end":{}}],"line":40},"9":{"loc":{"start":{"line":44,"column":2},"end":{"line":44,"column":null}},"type":"if","locations":[{"start":{"line":44,"column":2},"end":{"line":44,"column":null}},{"start":{},"end":{}}],"line":44},"10":{"loc":{"start":{"line":44,"column":6},"end":{"line":44,"column":54}},"type":"binary-expr","locations":[{"start":{"line":44,"column":6},"end":{"line":44,"column":18}},{"start":{"line":44,"column":18},"end":{"line":44,"column":37}},{"start":{"line":44,"column":37},"end":{"line":44,"column":54}}],"line":44},"11":{"loc":{"start":{"line":46,"column":2},"end":{"line":46,"column":null}},"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":46,"column":null}},{"start":{},"end":{}}],"line":46}},"s":{"0":4,"1":4,"2":27,"3":0,"4":27,"5":27,"6":23,"7":4,"8":4,"9":0,"10":4,"11":2,"12":2,"13":0,"14":23,"15":4,"16":0,"17":4,"18":19,"19":19,"20":2,"21":17,"22":17,"23":1,"24":16},"f":{"0":27,"1":2,"2":23},"b":{"0":[0,27],"1":[23,4],"2":[21,2],"3":[0,4],"4":[4,4],"5":[1,3],"6":[2,0],"7":[4,19],"8":[0,4],"9":[2,17],"10":[19,18,18],"11":[1,16]},"meta":{"lastBranch":12,"lastFunction":3,"lastStatement":25,"seen":{"s:1:27:1:Infinity":0,"s:2:31:2:Infinity":1,"f:8:16:8:39":0,"b:9:2:9:Infinity:undefined:undefined:undefined:undefined":0,"s:9:2:9:Infinity":2,"s:9:31:9:Infinity":3,"s:10:14:10:Infinity":4,"b:11:2:13:Infinity:undefined:undefined:undefined:undefined":1,"s:11:2:13:Infinity":5,"s:12:4:12:Infinity":6,"b:12:37:12:53:12:53:12:Infinity":2,"s:14:20:18:Infinity":7,"b:19:2:21:Infinity:undefined:undefined:undefined:undefined":3,"s:19:2:21:Infinity":8,"b:19:6:19:33:19:33:19:58":4,"s:20:4:20:Infinity":9,"s:22:2:24:Infinity":10,"b:23:6:23:Infinity:24:6:24:Infinity":5,"f:27:9:27:27":1,"b:28:2:30:Infinity:undefined:undefined:undefined:undefined":6,"s:28:2:30:Infinity":11,"s:29:4:29:Infinity":12,"s:31:2:31:Infinity":13,"f:38:16:38:29":2,"b:39:2:42:Infinity:undefined:undefined:undefined:undefined":7,"s:39:2:42:Infinity":14,"b:40:4:40:Infinity:undefined:undefined:undefined:undefined":8,"s:40:4:40:Infinity":15,"s:40:33:40:Infinity":16,"s:41:4:41:Infinity":17,"s:43:18:43:Infinity":18,"b:44:2:44:Infinity:undefined:undefined:undefined:undefined":9,"s:44:2:44:Infinity":19,"b:44:6:44:18:44:18:44:37:44:37:44:54":10,"s:44:54:44:Infinity":20,"s:45:12:45:Infinity":21,"b:46:2:46:Infinity:undefined:undefined:undefined:undefined":11,"s:46:2:46:Infinity":22,"s:46:23:46:Infinity":23,"s:47:2:47:Infinity":24}}}
,"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\utils\\validation.ts": {"path":"C:\\Users\\jonat\\Documents\\code\\sezzle\\calculator-frontend\\src\\utils\\validation.ts","statementMap":{"0":{"start":{"line":2,"column":2},"end":{"line":2,"column":null}},"1":{"start":{"line":6,"column":2},"end":{"line":6,"column":null}},"2":{"start":{"line":10,"column":2},"end":{"line":10,"column":null}}},"fnMap":{"0":{"name":"isDivisionByZero","decl":{"start":{"line":1,"column":16},"end":{"line":1,"column":33}},"loc":{"start":{"line":1,"column":60},"end":{"line":3,"column":null}},"line":1},"1":{"name":"isNegativeForSqrt","decl":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"loc":{"start":{"line":5,"column":60},"end":{"line":7,"column":null}},"line":5},"2":{"name":"isPercentageOutOfRange","decl":{"start":{"line":9,"column":16},"end":{"line":9,"column":39}},"loc":{"start":{"line":9,"column":68},"end":{"line":11,"column":null}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":9},"end":{"line":10,"column":null}},"type":"binary-expr","locations":[{"start":{"line":10,"column":9},"end":{"line":10,"column":27}},{"start":{"line":10,"column":27},"end":{"line":10,"column":null}}],"line":10}},"s":{"0":3,"1":4,"2":5},"f":{"0":3,"1":4,"2":5},"b":{"0":[5,4]},"meta":{"lastBranch":1,"lastFunction":3,"lastStatement":3,"seen":{"f:1:16:1:33":0,"s:2:2:2:Infinity":0,"f:5:16:5:34":1,"s:6:2:6:Infinity":1,"f:9:16:9:39":2,"s:10:2:10:Infinity":2,"b:10:9:10:27:10:27:10:Infinity":0}}}
}
</file>

<file path="calculator-frontend/coverage/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for All files</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="prettify.css" />
    <link rel="stylesheet" href="base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1>All files</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">73.62% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>201/273</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">67.27% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>148/220</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">70.31% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>45/64</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">74.32% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>194/261</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="src"><a href="src/index.html">src</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="0" class="abs high">0/0</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	</tr>

<tr>
	<td class="file medium" data-value="src/components/Calculator"><a href="src/components/Calculator/index.html">src/components/Calculator</a></td>
	<td data-value="54.54" class="pic medium">
	<div class="chart"><div class="cover-fill" style="width: 54%"></div><div class="cover-empty" style="width: 46%"></div></div>
	</td>
	<td data-value="54.54" class="pct medium">54.54%</td>
	<td data-value="88" class="abs medium">48/88</td>
	<td data-value="46.66" class="pct low">46.66%</td>
	<td data-value="60" class="abs low">28/60</td>
	<td data-value="50" class="pct medium">50%</td>
	<td data-value="36" class="abs medium">18/36</td>
	<td data-value="53.57" class="pct medium">53.57%</td>
	<td data-value="84" class="abs medium">45/84</td>
	</tr>

<tr>
	<td class="file high" data-value="src/components/ErrorBoundary"><a href="src/components/ErrorBoundary/index.html">src/components/ErrorBoundary</a></td>
	<td data-value="80" class="pic high">
	<div class="chart"><div class="cover-fill" style="width: 80%"></div><div class="cover-empty" style="width: 20%"></div></div>
	</td>
	<td data-value="80" class="pct high">80%</td>
	<td data-value="10" class="abs high">8/10</td>
	<td data-value="83.33" class="pct high">83.33%</td>
	<td data-value="6" class="abs high">5/6</td>
	<td data-value="75" class="pct medium">75%</td>
	<td data-value="4" class="abs medium">3/4</td>
	<td data-value="80" class="pct high">80%</td>
	<td data-value="10" class="abs high">8/10</td>
	</tr>

<tr>
	<td class="file high" data-value="src/components/Loading"><a href="src/components/Loading/index.html">src/components/Loading</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="0" class="abs high">0/0</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	</tr>

<tr>
	<td class="file high" data-value="src/hooks"><a href="src/hooks/index.html">src/hooks</a></td>
	<td data-value="81.14" class="pic high">
	<div class="chart"><div class="cover-fill" style="width: 81%"></div><div class="cover-empty" style="width: 19%"></div></div>
	</td>
	<td data-value="81.14" class="pct high">81.14%</td>
	<td data-value="122" class="abs high">99/122</td>
	<td data-value="71.02" class="pct medium">71.02%</td>
	<td data-value="107" class="abs medium">76/107</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="8" class="abs high">8/8</td>
	<td data-value="82.2" class="pct high">82.2%</td>
	<td data-value="118" class="abs high">97/118</td>
	</tr>

<tr>
	<td class="file high" data-value="src/services"><a href="src/services/index.html">src/services</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="10" class="abs high">10/10</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="2" class="abs high">2/2</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="7" class="abs high">7/7</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="10" class="abs high">10/10</td>
	</tr>

<tr>
	<td class="file high" data-value="src/utils"><a href="src/utils/index.html">src/utils</a></td>
	<td data-value="82.92" class="pic high">
	<div class="chart"><div class="cover-fill" style="width: 82%"></div><div class="cover-empty" style="width: 18%"></div></div>
	</td>
	<td data-value="82.92" class="pct high">82.92%</td>
	<td data-value="41" class="abs high">34/41</td>
	<td data-value="82.22" class="pct high">82.22%</td>
	<td data-value="45" class="abs high">37/45</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="7" class="abs high">7/7</td>
	<td data-value="86.48" class="pct high">86.48%</td>
	<td data-value="37" class="abs high">32/37</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="sorter.js"></script>
        <script src="block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/App.tsx.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/App.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> / <a href="index.html">src</a> App.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { ErrorBoundary } from './components/ErrorBoundary/ErrorBoundary'
import { Calculator } from './components/Calculator/Calculator'
&nbsp;
function App() {
  return (
    &lt;ErrorBoundary&gt;
      &lt;div className="min-h-screen bg-gray-900 flex items-center justify-center p-4"&gt;
        &lt;Calculator /&gt;
      &lt;/div&gt;
    &lt;/ErrorBoundary&gt;
  )
}
&nbsp;
export default App
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/Calculator/Button.tsx.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Calculator/Button.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/components/Calculator</a> Button.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>5/5</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">66.66% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>2/3</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>5/5</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">318x</span>
<span class="cline-any cline-yes">318x</span>
<span class="cline-any cline-yes">318x</span>
<span class="cline-any cline-yes">318x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import type { ButtonType } from '../../types/calculator.types'
&nbsp;
interface ButtonProps {
  label: string
  onClick: () =&gt; void
  type: ButtonType
  gridColumn?: string
  className?: string
}
&nbsp;
const typeClasses: Record&lt;ButtonType, string&gt; = {
  number: 'bg-gray-700 hover:bg-gray-600 text-white',
  operator: 'bg-orange-500 hover:bg-orange-600 text-white',
  function: 'bg-gray-500 hover:bg-gray-400 text-white',
  clear: 'bg-gray-500 hover:bg-gray-400 text-white',
  equals: 'bg-orange-500 hover:bg-orange-600 text-white',
}
&nbsp;
export function Button({
  label,
  onClick,
  type,
  gridColumn,
  className = '',
}: ButtonProps) {
  const base =
    'h-16 w-16 sm:h-20 sm:w-20 rounded-full shadow-lg active:scale-95 transition-transform duration-75 flex items-center justify-center text-2xl font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-orange-500'
  const typeClass = typeClasses[type]
  const style = gridColumn ? <span class="branch-0 cbranch-no" title="branch not covered" >{ gridColumn } : u</span>ndefined
  return (
    &lt;button
      type="button"
      onClick={onClick}
      className={`${base} ${typeClass} ${className}`}
      style={style}
      aria-label={label}
    &gt;
      {label}
    &lt;/button&gt;
  )
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/Calculator/Calculator.tsx.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Calculator/Calculator.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/components/Calculator</a> Calculator.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">49.2% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>31/63</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">35.55% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>16/45</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">44.44% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>8/18</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">47.45% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>28/59</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { useEffect, useCallback, useRef, useState } from 'react'
import { useCalculator } from '../../hooks/useCalculator'
import type { Operation } from '../../types/calculator.types'
import { Display } from './Display'
import { Keypad } from './Keypad'
import { Spinner } from '../Loading/Spinner'
&nbsp;
const ERROR_AUTO_DISMISS_MS = 3000
&nbsp;
export function Calculator() {
  const { state, dispatch, handleCalculate, handleSqrt } = useCalculator()
  const timeoutRef = useRef&lt;ReturnType&lt;typeof setTimeout&gt; | null&gt;(null)
  const [showExtraRow, setShowExtraRow] = useState(false)
&nbsp;
  useEffect(() =&gt; {
    if (!state.error) return
    timeoutRef.current = setTimeout(<span class="fstat-no" title="function not covered" >() =&gt; {</span>
<span class="cstat-no" title="statement not covered" >      dispatch({ type: 'CLEAR_ERROR' })</span>
    }, ERROR_AUTO_DISMISS_MS)
    return () =&gt; {
      <span class="missing-if-branch" title="else path not taken" >E</span>if (timeoutRef.current) clearTimeout(timeoutRef.current)
    }
  }, [state.error, dispatch])
&nbsp;
  const handleDigit = useCallback((digit: string) =&gt; {
    dispatch({ type: 'INPUT_DIGIT', payload: digit })
  }, [dispatch])
&nbsp;
  const handleOperator = useCallback(<span class="fstat-no" title="function not covered" >(o</span>p: Operation) =&gt; {
<span class="cstat-no" title="statement not covered" >    if (state.operation &amp;&amp; state.previousValue !== null &amp;&amp; !state.waitingForOperand) {</span>
<span class="cstat-no" title="statement not covered" >      handleCalculate().then(<span class="fstat-no" title="function not covered" >() =&gt; {</span></span>
<span class="cstat-no" title="statement not covered" >        dispatch({ type: 'SET_OPERATION', payload: op })</span>
      })
    } else {
<span class="cstat-no" title="statement not covered" >      dispatch({ type: 'SET_OPERATION', payload: op })</span>
    }
  }, [state.operation, state.previousValue, state.waitingForOperand, dispatch, handleCalculate])
&nbsp;
  const handleEquals = useCallback(<span class="fstat-no" title="function not covered" >() =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    if (state.operation) {</span>
<span class="cstat-no" title="statement not covered" >      void handleCalculate()</span>
    }
  }, [state.operation, handleCalculate])
&nbsp;
  const handleKeyDown = useCallback(
    (e: KeyboardEvent) =&gt; {
      if (e.key &gt;= '0' &amp;&amp; e.key &lt;= '9') {
        e.preventDefault()
        handleDigit(e.key)
        return
      }
      switch (e.key) {
<span class="branch-0 cbranch-no" title="branch not covered" >        case '.':</span>
<span class="cstat-no" title="statement not covered" >          e.preventDefault()</span>
<span class="cstat-no" title="statement not covered" >          dispatch({ type: 'INPUT_DECIMAL' })</span>
<span class="cstat-no" title="statement not covered" >          break</span>
<span class="branch-1 cbranch-no" title="branch not covered" >        case '+':</span>
<span class="cstat-no" title="statement not covered" >          e.preventDefault()</span>
<span class="cstat-no" title="statement not covered" >          handleOperator('add')</span>
<span class="cstat-no" title="statement not covered" >          break</span>
<span class="branch-2 cbranch-no" title="branch not covered" >        case '-':</span>
<span class="cstat-no" title="statement not covered" >          e.preventDefault()</span>
<span class="cstat-no" title="statement not covered" >          handleOperator('subtract')</span>
<span class="cstat-no" title="statement not covered" >          break</span>
<span class="branch-3 cbranch-no" title="branch not covered" >        case '*':</span>
<span class="cstat-no" title="statement not covered" >          e.preventDefault()</span>
<span class="cstat-no" title="statement not covered" >          handleOperator('multiply')</span>
<span class="cstat-no" title="statement not covered" >          break</span>
<span class="branch-4 cbranch-no" title="branch not covered" >        case '/':</span>
<span class="cstat-no" title="statement not covered" >          e.preventDefault()</span>
<span class="cstat-no" title="statement not covered" >          handleOperator('divide')</span>
<span class="cstat-no" title="statement not covered" >          break</span>
<span class="branch-5 cbranch-no" title="branch not covered" >        case 'Enter':</span>
<span class="cstat-no" title="statement not covered" >          e.preventDefault()</span>
<span class="cstat-no" title="statement not covered" >          handleEquals()</span>
<span class="cstat-no" title="statement not covered" >          break</span>
        case 'Escape':
          e.preventDefault()
          dispatch({ type: 'CLEAR' })
          break
<span class="branch-7 cbranch-no" title="branch not covered" >        default:</span>
<span class="cstat-no" title="statement not covered" >          break</span>
      }
    },
    [handleDigit, handleOperator, handleEquals, dispatch]
  )
&nbsp;
  useEffect(() =&gt; {
    window.addEventListener('keydown', handleKeyDown)
    return () =&gt; window.removeEventListener('keydown', handleKeyDown)
  }, [handleKeyDown])
&nbsp;
  const secondary =
    state.operation &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >state.previousValue !== null</span>
      ? <span class="branch-0 cbranch-no" title="branch not covered" >`${state.previousValue} ${state.operation === 'add' ? '+' : state.operation === 'subtract' ? '−' : state.operation === 'multiply' ? '×' : state.operation === 'divide' ? '÷' : state.operation === 'power' ? 'xʸ' : state.operation === 'percentage' ? '%' : ''}`</span>
      : undefined
&nbsp;
  return (
    &lt;div
      className={`relative w-full max-w-sm mx-auto rounded-2xl overflow-hidden shadow-2xl ${state.error ? 'animate-shake' : ''}`}
      role="application"
      aria-label="Calculator"
    &gt;
      &lt;Display main={state.display} secondary={secondary} /&gt;
      {/* Fila debajo del display: botón borrar a la derecha, sin tapar los números */}
      &lt;div className="flex justify-end bg-gray-800 px-3 pb-2 -mt-1"&gt;
        &lt;button
          type="button"
          onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >d</span>ispatch({ type: 'BACKSPACE' })}</span>
          className="w-10 h-10 rounded-full bg-gray-700 hover:bg-gray-600 text-white flex items-center justify-center text-lg font-medium focus:outline-none focus:ring-2 focus:ring-orange-500"
          aria-label="Borrar último dígito"
        &gt;
          ⌫
        &lt;/button&gt;
      &lt;/div&gt;
      {state.error &amp;&amp; (
        &lt;div
          className="bg-red-900/90 text-red-100 text-sm text-center py-2 px-3"
          role="alert"
        &gt;
          {state.error}
        &lt;/div&gt;
      )}
      {state.isLoading &amp;&amp; &lt;Spinner /&gt;}
      &lt;Keypad
        onDigit={handleDigit}
        onDecimal={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >d</span>ispatch({ type: 'INPUT_DECIMAL' })}</span>
        onClear={() =&gt; dispatch({ type: 'CLEAR' })}
        onToggleSign={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >d</span>ispatch({ type: 'TOGGLE_SIGN' })}</span>
        onPercentage={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >d</span>ispatch({ type: 'PERCENTAGE' })}</span>
        onOperation={handleOperator}
        onEquals={handleEquals}
        onSqrt={handleSqrt}
        showExtraRow={showExtraRow}
        onToggleExtraRow={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >s</span>etShowExtraRow(<span class="fstat-no" title="function not covered" >(s</span>) =&gt; <span class="cstat-no" title="statement not covered" >!s)</span>}</span>
      /&gt;
    &lt;/div&gt;
  )
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/Calculator/Display.tsx.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Calculator/Display.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/components/Calculator</a> Display.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>4/4</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">75% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>3/4</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>4/4</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-yes">12x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { formatNumber } from '../../utils/formatNumber'
&nbsp;
interface DisplayProps {
  main: string
  secondary?: string
}
&nbsp;
export function Display({ main, secondary }: DisplayProps) {
  const formatted = formatNumber(main)
  const digitCount = main.replace(/[^0-9]/g, '').length
  const sizeClass =
    digitCount &gt; 12 ? <span class="branch-0 cbranch-no" title="branch not covered" >'text-2xl sm:text-3xl' : '</span>text-4xl sm:text-5xl'
  return (
    &lt;div
      className="bg-gray-800 text-white rounded-t-2xl p-4 min-h-[120px] flex flex-col justify-end text-right"
      aria-live="polite"
      aria-label={`Display: ${formatted}`}
    &gt;
      {secondary &amp;&amp; (
        &lt;div className="text-xl text-gray-400 mb-1 truncate" aria-hidden&gt;
          {secondary}
        &lt;/div&gt;
      )}
      &lt;div
        className={`font-light tabular-nums overflow-x-auto overflow-y-hidden whitespace-nowrap ${sizeClass}`}
      &gt;
        {formatted}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/Calculator/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Calculator</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> src/components/Calculator</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">54.54% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>48/88</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">46.66% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>28/60</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">50% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>18/36</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">53.57% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>45/84</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="Button.tsx"><a href="Button.tsx.html">Button.tsx</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="5" class="abs high">5/5</td>
	<td data-value="66.66" class="pct medium">66.66%</td>
	<td data-value="3" class="abs medium">2/3</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="5" class="abs high">5/5</td>
	</tr>

<tr>
	<td class="file low" data-value="Calculator.tsx"><a href="Calculator.tsx.html">Calculator.tsx</a></td>
	<td data-value="49.2" class="pic low">
	<div class="chart"><div class="cover-fill" style="width: 49%"></div><div class="cover-empty" style="width: 51%"></div></div>
	</td>
	<td data-value="49.2" class="pct low">49.2%</td>
	<td data-value="63" class="abs low">31/63</td>
	<td data-value="35.55" class="pct low">35.55%</td>
	<td data-value="45" class="abs low">16/45</td>
	<td data-value="44.44" class="pct low">44.44%</td>
	<td data-value="18" class="abs low">8/18</td>
	<td data-value="47.45" class="pct low">47.45%</td>
	<td data-value="59" class="abs low">28/59</td>
	</tr>

<tr>
	<td class="file high" data-value="Display.tsx"><a href="Display.tsx.html">Display.tsx</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="4" class="abs high">4/4</td>
	<td data-value="75" class="pct medium">75%</td>
	<td data-value="4" class="abs medium">3/4</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="4" class="abs high">4/4</td>
	</tr>

<tr>
	<td class="file medium" data-value="Keypad.tsx"><a href="Keypad.tsx.html">Keypad.tsx</a></td>
	<td data-value="50" class="pic medium">
	<div class="chart"><div class="cover-fill" style="width: 50%"></div><div class="cover-empty" style="width: 50%"></div></div>
	</td>
	<td data-value="50" class="pct medium">50%</td>
	<td data-value="16" class="abs medium">8/16</td>
	<td data-value="87.5" class="pct high">87.5%</td>
	<td data-value="8" class="abs high">7/8</td>
	<td data-value="50" class="pct medium">50%</td>
	<td data-value="16" class="abs medium">8/16</td>
	<td data-value="50" class="pct medium">50%</td>
	<td data-value="16" class="abs medium">8/16</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/Calculator/Keypad.tsx.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Calculator/Keypad.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/components/Calculator</a> Keypad.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">50% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>8/16</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">87.5% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>7/8</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">50% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>8/16</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">50% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>8/16</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import type { Operation } from '../../types/calculator.types'
import { Button } from './Button'
&nbsp;
interface KeypadProps {
  onDigit: (digit: string) =&gt; void
  onDecimal: () =&gt; void
  onClear: () =&gt; void
  onToggleSign: () =&gt; void
  onPercentage: () =&gt; void
  onOperation: (op: Operation) =&gt; void
  onEquals: () =&gt; void
  onSqrt?: () =&gt; void
  showExtraRow?: boolean
  onToggleExtraRow?: () =&gt; void
}
&nbsp;
export function Keypad({
  onDigit,
  onDecimal,
  onClear,
  onToggleSign,
  onPercentage,
  onOperation,
  onEquals,
  onSqrt,
  showExtraRow = false,
  onToggleExtraRow,
}: KeypadProps) {
  return (
    &lt;div className="bg-gray-900 p-4 rounded-b-2xl grid grid-cols-4 gap-3"&gt;
      {/* Fila extra desplegable hacia arriba: √, xʸ (aparece sobre la primera fila) */}
      {showExtraRow &amp;&amp; onSqrt &amp;&amp; (
        &lt;&gt;
          &lt;Button label="√" type="function" onClick={onSqrt} /&gt;
          &lt;Button label="xʸ" type="function" onClick={() =&gt; onOperation('power')} /&gt;
          &lt;span /&gt;
          &lt;span /&gt;
        &lt;/&gt;
      )}
&nbsp;
      {/* Fila 1: AC, botón ⋯ (2ª columna), %, ÷ */}
      &lt;Button label="AC" type="clear" onClick={onClear} /&gt;
      {onToggleExtraRow ? (
        &lt;Button
          label={showExtraRow ? <span class="branch-0 cbranch-no" title="branch not covered" >'▲' : '</span>⋯'}
          type="function"
          onClick={onToggleExtraRow}
        /&gt;
      ) : (
        &lt;div aria-hidden /&gt;
      )}
      &lt;Button label="%" type="function" onClick={onPercentage} /&gt;
      &lt;Button label="÷" type="operator" onClick={() =&gt; onOperation('divide')} /&gt;
&nbsp;
      {/* Filas 2-4: números y operadores en columna derecha */}
      &lt;Button label="7" type="number" onClick={() =&gt; onDigit('7')} /&gt;
      &lt;Button label="8" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('8')} /</span>&gt;
      &lt;Button label="9" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('9')} /</span>&gt;
      &lt;Button label="×" type="operator" onClick={() =&gt; onOperation('multiply')} /&gt;
&nbsp;
      &lt;Button label="4" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('4')} /</span>&gt;
      &lt;Button label="5" type="number" onClick={() =&gt; onDigit('5')} /&gt;
      &lt;Button label="6" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('6')} /</span>&gt;
      &lt;Button label="−" type="operator" onClick={() =&gt; onOperation('subtract')} /&gt;
&nbsp;
      &lt;Button label="1" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('1')} /</span>&gt;
      &lt;Button label="2" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('2')} /</span>&gt;
      &lt;Button label="3" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('3')} /</span>&gt;
      &lt;Button label="+" type="operator" onClick={() =&gt; onOperation('add')} /&gt;
&nbsp;
      {/* Última fila: cambiar signo, cero, punto, igual */}
      &lt;Button label="+/-" type="function" onClick={onToggleSign} /&gt;
      &lt;Button label="0" type="number" onClick={<span class="fstat-no" title="function not covered" >() =&gt; <span class="cstat-no" title="statement not covered" >o</span>nDigit('0')} /</span>&gt;
      &lt;Button label="." type="number" onClick={onDecimal} /&gt;
      &lt;Button label="=" type="equals" onClick={onEquals} /&gt;
    &lt;/div&gt;
  )
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/ErrorBoundary/ErrorBoundary.tsx.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/ErrorBoundary/ErrorBoundary.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/components/ErrorBoundary</a> ErrorBoundary.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">80% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>8/10</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">83.33% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>5/6</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">75% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>3/4</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">80% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>8/10</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { Component, type ErrorInfo, type ReactNode } from 'react'
&nbsp;
interface Props {
  children: ReactNode
  fallback?: ReactNode
}
&nbsp;
interface State {
  hasError: boolean
  error?: Error
}
&nbsp;
export class ErrorBoundary extends Component&lt;Props, State&gt; {
  state: State = { hasError: false }
&nbsp;
  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error }
  }
&nbsp;
  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('ErrorBoundary caught:', error, errorInfo)
  }
&nbsp;
  handleRetry = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >() =&gt; {</span></span>
<span class="cstat-no" title="statement not covered" >    this.setState({ hasError: false, error: undefined })</span>
  }
&nbsp;
  render() {
    if (this.state.hasError) {
      if (this.props.fallback) {
        return this.props.fallback
      }
      return (
        &lt;div className="min-h-screen bg-gray-900 flex items-center justify-center p-4"&gt;
          &lt;div className="bg-gray-800 rounded-xl p-6 max-w-md text-center"&gt;
            &lt;h2 className="text-xl font-semibold text-white mb-2"&gt;
              Something went wrong
            &lt;/h2&gt;
            &lt;p className="text-gray-400 mb-4"&gt;
              {this.state.error?.message ?? <span class="branch-1 cbranch-no" title="branch not covered" >'An unexpected error occurred.'}</span>
            &lt;/p&gt;
            &lt;button
              type="button"
              onClick={this.handleRetry}
              className="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors"
            &gt;
              Try again
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      )
    }
    return this.props.children
  }
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/ErrorBoundary/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/ErrorBoundary</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> src/components/ErrorBoundary</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">80% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>8/10</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">83.33% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>5/6</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">75% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>3/4</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">80% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>8/10</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="ErrorBoundary.tsx"><a href="ErrorBoundary.tsx.html">ErrorBoundary.tsx</a></td>
	<td data-value="80" class="pic high">
	<div class="chart"><div class="cover-fill" style="width: 80%"></div><div class="cover-empty" style="width: 20%"></div></div>
	</td>
	<td data-value="80" class="pct high">80%</td>
	<td data-value="10" class="abs high">8/10</td>
	<td data-value="83.33" class="pct high">83.33%</td>
	<td data-value="6" class="abs high">5/6</td>
	<td data-value="75" class="pct medium">75%</td>
	<td data-value="4" class="abs medium">3/4</td>
	<td data-value="80" class="pct high">80%</td>
	<td data-value="10" class="abs high">8/10</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/Loading/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Loading</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> src/components/Loading</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="Spinner.tsx"><a href="Spinner.tsx.html">Spinner.tsx</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="0" class="abs high">0/0</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/components/Loading/Spinner.tsx.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Loading/Spinner.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/components/Loading</a> Spinner.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">export function Spinner() {
  return (
    &lt;div
      className="absolute inset-0 bg-black/50 rounded-2xl flex items-center justify-center z-10"
      aria-label="Loading"
    &gt;
      &lt;div
        className="w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"
        role="status"
      /&gt;
    &lt;/div&gt;
  )
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/hooks/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/hooks</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> src/hooks</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">81.14% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>99/122</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">71.02% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>76/107</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>8/8</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">82.2% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>97/118</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="useApi.ts"><a href="useApi.ts.html">useApi.ts</a></td>
	<td data-value="87.5" class="pic high">
	<div class="chart"><div class="cover-fill" style="width: 87%"></div><div class="cover-empty" style="width: 13%"></div></div>
	</td>
	<td data-value="87.5" class="pct high">87.5%</td>
	<td data-value="24" class="abs high">21/24</td>
	<td data-value="66.66" class="pct medium">66.66%</td>
	<td data-value="15" class="abs medium">10/15</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="2" class="abs high">2/2</td>
	<td data-value="87.5" class="pct high">87.5%</td>
	<td data-value="24" class="abs high">21/24</td>
	</tr>

<tr>
	<td class="file medium" data-value="useCalculator.ts"><a href="useCalculator.ts.html">useCalculator.ts</a></td>
	<td data-value="79.59" class="pic medium">
	<div class="chart"><div class="cover-fill" style="width: 79%"></div><div class="cover-empty" style="width: 21%"></div></div>
	</td>
	<td data-value="79.59" class="pct medium">79.59%</td>
	<td data-value="98" class="abs medium">78/98</td>
	<td data-value="71.73" class="pct medium">71.73%</td>
	<td data-value="92" class="abs medium">66/92</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="6" class="abs high">6/6</td>
	<td data-value="80.85" class="pct high">80.85%</td>
	<td data-value="94" class="abs high">76/94</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/hooks/useApi.ts.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/hooks/useApi.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/hooks</a> useApi.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">87.5% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>21/24</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">66.66% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>10/15</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>2/2</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">87.5% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>21/24</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { useCallback } from 'react'
import type { Operation } from '../types/calculator.types'
import { calculatorApi } from '../services/calculatorApi'
import { getUserFriendlyErrorMessage } from '../utils/errorMessages'
&nbsp;
export function useApi() {
  const executeOperation = useCallback(
    async (
      operation: Operation,
      operands: { operand1?: number; operand2?: number; operand?: number }
    ): Promise&lt;number&gt; =&gt; {
      try {
        if (operation === 'sqrt') {
          const operand = operands.operand ?? <span class="branch-1 cbranch-no" title="branch not covered" >0</span>
          const { data } = await calculatorApi.sqrt(operand)
          return data.result
        }
        const operand1 = operands.operand1 ?? <span class="branch-1 cbranch-no" title="branch not covered" >0</span>
        const operand2 = operands.operand2 ?? <span class="branch-1 cbranch-no" title="branch not covered" >0</span>
        switch (operation) {
          case 'add': {
            const { data } = await calculatorApi.add(operand1, operand2)
            return data.result
          }
<span class="branch-1 cbranch-no" title="branch not covered" >          case 'subtract': {</span>
            const { data } = <span class="cstat-no" title="statement not covered" >await calculatorApi.subtract(operand1, operand2)</span>
<span class="cstat-no" title="statement not covered" >            return data.result</span>
          }
          case 'multiply': {
            const { data } = await calculatorApi.multiply(operand1, operand2)
            return data.result
          }
          case 'divide': {
            const { data } = await calculatorApi.divide(operand1, operand2)
            return data.result
          }
          case 'power': {
            const { data } = await calculatorApi.power(operand1, operand2)
            return data.result
          }
          case 'percentage': {
            const { data } = await calculatorApi.percentage(operand1, operand2)
            return data.result
          }
<span class="branch-6 cbranch-no" title="branch not covered" >          default:</span>
<span class="cstat-no" title="statement not covered" >            throw new Error('Unknown operation')</span>
        }
      } catch (error) {
        throw new Error(getUserFriendlyErrorMessage(error))
      }
    },
    []
  )
&nbsp;
  return { executeOperation }
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/hooks/useCalculator.ts.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/hooks/useCalculator.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/hooks</a> useCalculator.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">79.59% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>78/98</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">71.73% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>66/92</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>6/6</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">80.85% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>76/94</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">90x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">101x</span>
<span class="cline-any cline-yes">101x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">121x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">86x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">86x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">86x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">82x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">64x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">64x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">86x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">83x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">133x</span>
<span class="cline-any cline-yes">133x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">133x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">133x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">133x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { useReducer, useCallback } from 'react'
import type { CalculatorState, Operation } from '../types/calculator.types'
import { useApi } from './useApi'
import { formatResultForDisplay } from '../utils/formatNumber'
import {
  isDivisionByZero,
  isNegativeForSqrt,
} from '../utils/validation'
&nbsp;
const MAX_DIGITS = 15
const DIGIT_LIMIT_MESSAGE = 'Maximum 15 digits allowed'
&nbsp;
export type CalculatorAction =
  | { type: 'INPUT_DIGIT'; payload: string }
  | { type: 'INPUT_DECIMAL' }
  | { type: 'SET_OPERATION'; payload: Operation }
  | { type: 'CALCULATE_RESULT' }
  | { type: 'CLEAR' }
  | { type: 'CLEAR_ERROR' }
  | { type: 'SET_LOADING'; payload: boolean }
  | { type: 'SET_RESULT'; payload: number }
  | { type: 'SET_ERROR'; payload: string }
  | { type: 'PERCENTAGE' }
  | { type: 'TOGGLE_SIGN' }
  | { type: 'BACKSPACE' }
&nbsp;
function digitCount(display: string): number {
  return display.replace(/[^0-9]/g, '').length
}
&nbsp;
function parseDisplay(display: string): number {
  const n = parseFloat(display.replace(/,/g, ''))
  return Number.isNaN(n) ? <span class="branch-0 cbranch-no" title="branch not covered" >0 : n</span>
}
&nbsp;
const initialState: CalculatorState = {
  display: '0',
  currentValue: null,
  previousValue: null,
  operation: null,
  waitingForOperand: false,
  isLoading: false,
  error: null,
}
&nbsp;
export function calculatorReducer(
  state: CalculatorState,
  action: CalculatorAction
): CalculatorState {
  switch (action.type) {
    case 'CLEAR_ERROR':
      return { ...state, error: null }
&nbsp;
    case 'SET_LOADING':
      return { ...state, isLoading: action.payload }
&nbsp;
    case 'SET_ERROR':
      return {
        ...state,
        error: action.payload,
        isLoading: false,
      }
    case 'SET_RESULT': {
      const result = action.payload
      const display = formatResultForDisplay(result)
      return {
        ...state,
        display,
        currentValue: result,
        previousValue: null,
        operation: null,
        waitingForOperand: true,
        isLoading: false,
        error: null,
      }
    }
    case 'CLEAR':
      return initialState
&nbsp;
    case 'INPUT_DIGIT': {
      <span class="missing-if-branch" title="if path not taken" >I</span>if (state.error) {
<span class="cstat-no" title="statement not covered" >        return calculatorReducer(</span>
          { ...state, error: null },
          { type: 'INPUT_DIGIT', payload: action.payload }
        )
      }
      const digit = action.payload
      let newDisplay: string
      if (state.waitingForOperand) {
        newDisplay = digit === '0' ? '0' : digit
      } else {
        if (state.display === '0' &amp;&amp; digit !== '0') {
          newDisplay = digit
        <span class="missing-if-branch" title="if path not taken" >I</span>} else if (state.display === '0' &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >digit === '0') {</span>
<span class="cstat-no" title="statement not covered" >          newDisplay = '0'</span>
        } else {
          newDisplay = state.display + digit
        }
      }
      if (digitCount(newDisplay) &gt; MAX_DIGITS) {
        return { ...state, error: DIGIT_LIMIT_MESSAGE }
      }
      return {
        ...state,
        display: newDisplay,
        waitingForOperand: false,
        currentValue: parseDisplay(newDisplay),
      }
    }
&nbsp;
    case 'INPUT_DECIMAL': {
      <span class="missing-if-branch" title="if path not taken" >I</span>if (state.error) {
<span class="cstat-no" title="statement not covered" >        return calculatorReducer(</span>
          { ...state, error: null },
          { type: 'INPUT_DECIMAL' }
        )
      }
      let newDisplay: string
      <span class="missing-if-branch" title="if path not taken" >I</span>if (state.waitingForOperand) {
<span class="cstat-no" title="statement not covered" >        newDisplay = '0.'</span>
      } else if (state.display.includes('.')) {
        return state
      } else if (digitCount(state.display) &gt;= MAX_DIGITS) {
        return { ...state, error: DIGIT_LIMIT_MESSAGE }
      } else {
        newDisplay = state.display + '.'
      }
      return {
        ...state,
        display: newDisplay,
        waitingForOperand: false,
        currentValue: parseDisplay(newDisplay),
      }
    }
&nbsp;
    case 'TOGGLE_SIGN': {
      if (state.error) return state
      const n = parseDisplay(state.display)
      const newDisplay = n === 0 ? '0' : String(-n)
      return {
        ...state,
        display: newDisplay,
        currentValue: -n,
      }
    }
&nbsp;
    case 'BACKSPACE': {
      if (state.error &amp;&amp; state.error !== DIGIT_LIMIT_MESSAGE) return state
      const hadDigitLimitError = state.error === DIGIT_LIMIT_MESSAGE
      <span class="missing-if-branch" title="if path not taken" >I</span>if (state.display === '0' || state.display.length &lt;= 1) {
<span class="cstat-no" title="statement not covered" >        return { ...state, display: '0', currentValue: 0, error: hadDigitLimitError ? null : state.error }</span>
      }
      const next = state.display.slice(0, -1)
      const newDisplay = next === '' || next === '-' ? <span class="branch-0 cbranch-no" title="branch not covered" >'0' : n</span>ext
      return {
        ...state,
        display: newDisplay,
        currentValue: parseDisplay(newDisplay),
        error: hadDigitLimitError ? null : <span class="branch-1 cbranch-no" title="branch not covered" >state.error,</span>
      }
    }
&nbsp;
    case 'SET_OPERATION':
    case 'PERCENTAGE': {
      <span class="missing-if-branch" title="if path not taken" >I</span>if (state.error) <span class="cstat-no" title="statement not covered" >return state</span>
      const op: Operation =
        action.type === 'PERCENTAGE' ? 'percentage' : action.payload
      const current = parseDisplay(state.display)
      if (
        state.operation !== null &amp;&amp;
        state.previousValue !== null &amp;&amp;
        !state.waitingForOperand
      ) {
        return {
          ...state,
          previousValue: current,
          operation: op,
          waitingForOperand: true,
        }
      }
      return {
        ...state,
        previousValue:
          state.waitingForOperand &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >state.previousValue !== null</span>
            ? <span class="branch-0 cbranch-no" title="branch not covered" >state.previousValue</span>
            : current,
        operation: op,
        waitingForOperand: true,
      }
    }
&nbsp;
    case 'CALCULATE_RESULT':
      return state
&nbsp;
<span class="branch-12 cbranch-no" title="branch not covered" >    default:</span>
<span class="cstat-no" title="statement not covered" >      return state</span>
  }
}
&nbsp;
export function useCalculator() {
  const [state, dispatch] = useReducer(calculatorReducer, initialState)
  const { executeOperation } = useApi()
&nbsp;
  const handleCalculate = useCallback(async () =&gt; {
    const op = state.operation
    <span class="missing-if-branch" title="if path not taken" >I</span>if (!op) <span class="cstat-no" title="statement not covered" >return</span>
    dispatch({ type: 'CLEAR_ERROR' })
    const current = parseDisplay(state.display)
    <span class="missing-if-branch" title="if path not taken" >I</span>if (op === 'sqrt') {
<span class="cstat-no" title="statement not covered" >      if (isNegativeForSqrt(current)) {</span>
<span class="cstat-no" title="statement not covered" >        dispatch({</span>
          type: 'SET_ERROR',
          payload: 'Cannot calculate square root of negative number',
        })
<span class="cstat-no" title="statement not covered" >        return</span>
      }
<span class="cstat-no" title="statement not covered" >      dispatch({ type: 'SET_LOADING', payload: true })</span>
<span class="cstat-no" title="statement not covered" >      try {</span>
        const result = <span class="cstat-no" title="statement not covered" >await executeOperation(op, { operand: current })</span>
<span class="cstat-no" title="statement not covered" >        dispatch({ type: 'SET_RESULT', payload: result })</span>
      } catch (err) {
<span class="cstat-no" title="statement not covered" >        dispatch({</span>
          type: 'SET_ERROR',
          payload: err instanceof Error ? err.message : 'Something went wrong',
        })
      }
<span class="cstat-no" title="statement not covered" >      return</span>
    }
    const prev = state.previousValue ?? <span class="branch-1 cbranch-no" title="branch not covered" >current</span>
    if (op === 'divide' &amp;&amp; isDivisionByZero(current)) {
      dispatch({
        type: 'SET_ERROR',
        payload: 'Cannot divide by zero',
      })
      return
    }
    dispatch({ type: 'SET_LOADING', payload: true })
    try {
      const result = await executeOperation(op, {
        operand1: prev,
        operand2: current,
      })
      dispatch({ type: 'SET_RESULT', payload: result })
    } catch (err) {
      dispatch({
        type: 'SET_ERROR',
        payload: err instanceof Error ? err.message : <span class="branch-1 cbranch-no" title="branch not covered" >'Something went wrong',</span>
      })
    }
  }, [state.operation, state.display, state.previousValue, executeOperation])
&nbsp;
  const handleSqrt = useCallback(async () =&gt; {
    dispatch({ type: 'CLEAR_ERROR' })
    const current = parseDisplay(state.display)
    <span class="missing-if-branch" title="if path not taken" >I</span>if (isNegativeForSqrt(current)) {
<span class="cstat-no" title="statement not covered" >      dispatch({</span>
        type: 'SET_ERROR',
        payload: 'Cannot calculate square root of negative number',
      })
<span class="cstat-no" title="statement not covered" >      return</span>
    }
    dispatch({ type: 'SET_LOADING', payload: true })
    try {
      const result = await executeOperation('sqrt', { operand: current })
      dispatch({ type: 'SET_RESULT', payload: result })
    } catch (err) {
<span class="cstat-no" title="statement not covered" >      dispatch({</span>
        type: 'SET_ERROR',
        payload: err instanceof Error ? err.message : 'Something went wrong',
      })
    }
  }, [state.display, executeOperation])
&nbsp;
  return { state, dispatch, handleCalculate, handleSqrt }
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> src</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/0</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="App.tsx"><a href="App.tsx.html">App.tsx</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="0" class="abs high">0/0</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/services/calculatorApi.ts.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/services/calculatorApi.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/services</a> calculatorApi.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>10/10</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>2/2</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>7/7</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>10/10</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import axios from 'axios'
import type { CalculationResponse } from '../types/api.types'
&nbsp;
const API_BASE_URL =
  import.meta.env.VITE_API_URL ?? 'http://localhost:8080/api/v1'
&nbsp;
const apiClient = axios.create({
  baseURL: API_BASE_URL,
  headers: { 'Content-Type': 'application/json' },
  timeout: 5000,
})
&nbsp;
export const calculatorApi = {
  add: (operand1: number, operand2: number) =&gt;
    apiClient.post&lt;CalculationResponse&gt;('/add', { operand1, operand2 }),
&nbsp;
  subtract: (operand1: number, operand2: number) =&gt;
    apiClient.post&lt;CalculationResponse&gt;('/subtract', { operand1, operand2 }),
&nbsp;
  multiply: (operand1: number, operand2: number) =&gt;
    apiClient.post&lt;CalculationResponse&gt;('/multiply', { operand1, operand2 }),
&nbsp;
  divide: (operand1: number, operand2: number) =&gt;
    apiClient.post&lt;CalculationResponse&gt;('/divide', { operand1, operand2 }),
&nbsp;
  power: (operand1: number, operand2: number) =&gt;
    apiClient.post&lt;CalculationResponse&gt;('/power', { operand1, operand2 }),
&nbsp;
  sqrt: (operand: number) =&gt;
    apiClient.post&lt;CalculationResponse&gt;('/sqrt', { operand }),
&nbsp;
  percentage: (operand1: number, operand2: number) =&gt;
    apiClient.post&lt;CalculationResponse&gt;('/percentage', {
      operand1,
      operand2,
    }),
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/services/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/services</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> src/services</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>10/10</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>2/2</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>7/7</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>10/10</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="calculatorApi.ts"><a href="calculatorApi.ts.html">calculatorApi.ts</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="10" class="abs high">10/10</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="2" class="abs high">2/2</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="7" class="abs high">7/7</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="10" class="abs high">10/10</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/utils/errorMessages.ts.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/utils/errorMessages.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/utils</a> errorMessages.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">76.92% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>10/13</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">77.77% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>14/18</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">76.92% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>10/13</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line medium'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import type { ErrorResponse } from '../types/api.types'
&nbsp;
const ERROR_CODE_MAP: Record&lt;string, string&gt; = {
  CALC_001: 'Cannot divide by zero',
  CALC_002: 'Invalid number',
  CALC_003: 'Cannot calculate square root of negative number',
  CALC_004: 'Number too large',
  CALC_005: 'Invalid percentage',
  CALC_006: 'Invalid input',
}
&nbsp;
export function getUserFriendlyErrorMessage(
  error: unknown,
  defaultMessage = 'Something went wrong'
): string {
  if (typeof error === 'object' &amp;&amp; error !== null &amp;&amp; 'response' in error) {
    const axiosError = error as { response?: { data?: ErrorResponse } }
    const data = axiosError.response?.data
    <span class="missing-if-branch" title="else path not taken" >E</span>if (data?.errorCode &amp;&amp; ERROR_CODE_MAP[data.errorCode]) {
      return ERROR_CODE_MAP[data.errorCode]
    }
<span class="cstat-no" title="statement not covered" >    if (data?.message) {</span>
<span class="cstat-no" title="statement not covered" >      return data.message</span>
    }
  }
  if (error instanceof Error) {
    <span class="missing-if-branch" title="else path not taken" >E</span>if (error.message.includes('timeout') || error.message.includes('Network')) {
      return 'Unable to connect to server'
    }
<span class="cstat-no" title="statement not covered" >    return error.message</span>
  }
  return defaultMessage
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/utils/formatNumber.ts.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/utils/formatNumber.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/utils</a> formatNumber.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">84% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>21/25</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">84% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>21/25</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>3/3</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">90.47% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>19/21</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a></td><td class="line-coverage quiet"><span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">27x</span>
<span class="cline-any cline-yes">27x</span>
<span class="cline-any cline-yes">27x</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">19x</span>
<span class="cline-any cline-yes">19x</span>
<span class="cline-any cline-yes">17x</span>
<span class="cline-any cline-yes">17x</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">const MAX_DISPLAY_LENGTH = 18
const LARGE_NUMBER_THRESHOLD = 1e15
&nbsp;
/**
 * Format a calculation result for display, avoiding scientific notation when possible.
 * For |value| &gt;= 1e15, uses toLocaleString to show full digits up to ~1e21.
 */
export function formatResultForDisplay(value: number): string {
  <span class="missing-if-branch" title="if path not taken" >I</span>if (!Number.isFinite(value)) <span class="cstat-no" title="statement not covered" >return '0'</span>
  const abs = Math.abs(value)
  if (abs &lt; LARGE_NUMBER_THRESHOLD) {
    return Number.isInteger(value) ? String(value) : trimTrailingZeros(String(value))
  }
  const formatted = value.toLocaleString('en-US', {
    useGrouping: false,
    maximumFractionDigits: 10,
    minimumFractionDigits: 0,
  })
  <span class="missing-if-branch" title="if path not taken" >I</span>if (formatted.includes('e') || formatted.includes('E')) {
<span class="cstat-no" title="statement not covered" >    return value.toExponential(4)</span>
  }
  return formatted.length &gt; MAX_DISPLAY_LENGTH
    ? value.toExponential(4)
    : formatted
}
&nbsp;
function trimTrailingZeros(s: string): string {
  <span class="missing-if-branch" title="else path not taken" >E</span>if (s.includes('.')) {
    return s.replace(/\.?0+$/, '')
  }
<span class="cstat-no" title="statement not covered" >  return s</span>
}
&nbsp;
/**
 * Format a number or display string for calculator display.
 * Strips trailing zeros after decimal, keeps at most MAX_DISPLAY_LENGTH chars.
 */
export function formatNumber(value: string | number): string {
  if (typeof value === 'number') {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (!Number.isFinite(value)) <span class="cstat-no" title="statement not covered" >return '0'</span>
    return formatResultForDisplay(value)
  }
  const trimmed = value.replace(/,/g, '').trim()
  if (!trimmed || trimmed === '-' || trimmed === '.') return '0'
  const n = parseFloat(trimmed)
  if (Number.isNaN(n)) return '0'
  return formatResultForDisplay(n)
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/utils/index.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/utils</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> src/utils</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">82.92% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>34/41</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">82.22% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>37/45</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>7/7</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">86.48% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>32/37</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <div class="pad1">
<table class="coverage-summary">
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file medium" data-value="errorMessages.ts"><a href="errorMessages.ts.html">errorMessages.ts</a></td>
	<td data-value="76.92" class="pic medium">
	<div class="chart"><div class="cover-fill" style="width: 76%"></div><div class="cover-empty" style="width: 24%"></div></div>
	</td>
	<td data-value="76.92" class="pct medium">76.92%</td>
	<td data-value="13" class="abs medium">10/13</td>
	<td data-value="77.77" class="pct medium">77.77%</td>
	<td data-value="18" class="abs medium">14/18</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="1" class="abs high">1/1</td>
	<td data-value="76.92" class="pct medium">76.92%</td>
	<td data-value="13" class="abs medium">10/13</td>
	</tr>

<tr>
	<td class="file high" data-value="formatNumber.ts"><a href="formatNumber.ts.html">formatNumber.ts</a></td>
	<td data-value="84" class="pic high">
	<div class="chart"><div class="cover-fill" style="width: 84%"></div><div class="cover-empty" style="width: 16%"></div></div>
	</td>
	<td data-value="84" class="pct high">84%</td>
	<td data-value="25" class="abs high">21/25</td>
	<td data-value="84" class="pct high">84%</td>
	<td data-value="25" class="abs high">21/25</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="3" class="abs high">3/3</td>
	<td data-value="90.47" class="pct high">90.47%</td>
	<td data-value="21" class="abs high">19/21</td>
	</tr>

<tr>
	<td class="file high" data-value="validation.ts"><a href="validation.ts.html">validation.ts</a></td>
	<td data-value="100" class="pic high">
	<div class="chart"><div class="cover-fill cover-full" style="width: 100%"></div><div class="cover-empty" style="width: 0%"></div></div>
	</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="3" class="abs high">3/3</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="2" class="abs high">2/2</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="3" class="abs high">3/3</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="3" class="abs high">3/3</td>
	</tr>

</tbody>
</table>
</div>
                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/coverage/src/utils/validation.ts.html">
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/utils/validation.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/utils</a> validation.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>3/3</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>2/2</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>3/3</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>3/3</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">export function isDivisionByZero(operand2: number): boolean {
  return operand2 === 0
}
&nbsp;
export function isNegativeForSqrt(operand: number): boolean {
  return operand &lt; 0
}
&nbsp;
export function isPercentageOutOfRange(percentage: number): boolean {
  return percentage &lt; 0 || percentage &gt; 100
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-14T01:26:30.417Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
</file>

<file path="calculator-frontend/src/components/Calculator/Display.tsx">
import { formatNumber } from '../../utils/formatNumber'

interface DisplayProps {
  main: string
  secondary?: string
}

export function Display({ main, secondary }: DisplayProps) {
  const formatted = formatNumber(main)
  const digitCount = main.replace(/[^0-9]/g, '').length
  const sizeClass =
    digitCount > 12 ? 'text-2xl sm:text-3xl' : 'text-4xl sm:text-5xl'
  return (
    <div
      className="bg-gray-800 text-white rounded-t-2xl p-4 min-h-[120px] flex flex-col justify-end text-right"
      aria-live="polite"
      aria-label={`Display: ${formatted}`}
    >
      {secondary && (
        <div className="text-xl text-gray-400 mb-1 truncate" aria-hidden>
          {secondary}
        </div>
      )}
      <div
        className={`font-light tabular-nums overflow-x-auto overflow-y-hidden whitespace-nowrap ${sizeClass}`}
      >
        {formatted}
      </div>
    </div>
  )
}
</file>

<file path="calculator-frontend/src/hooks/useCalculator.test.ts">
import { describe, it, expect, vi, beforeEach } from 'vitest'
import { renderHook, act } from '@testing-library/react'
import { useCalculator } from './useCalculator'

const mockExecuteOperation = vi.fn()

vi.mock('./useApi', () => ({
  useApi: () => ({
    executeOperation: mockExecuteOperation,
  }),
}))

describe('useCalculator', () => {
  beforeEach(() => {
    mockExecuteOperation.mockReset()
  })

  it('should initialize with correct default state', () => {
    const { result } = renderHook(() => useCalculator())
    expect(result.current.state).toMatchObject({
      display: '0',
      currentValue: null,
      previousValue: null,
      operation: null,
      waitingForOperand: false,
      isLoading: false,
      error: null,
    })
  })

  it('should handle digit input correctly', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' })
    })
    expect(result.current.state.display).toBe('5')
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '3' })
    })
    expect(result.current.state.display).toBe('53')
  })

  it('should handle decimal point input', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '3' })
    })
    act(() => {
      result.current.dispatch({ type: 'INPUT_DECIMAL' })
    })
    expect(result.current.state.display).toBe('3.')
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '1' })
    })
    expect(result.current.state.display).toBe('3.1')
  })

  it('should prevent multiple decimal points', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '1' })
    })
    act(() => {
      result.current.dispatch({ type: 'INPUT_DECIMAL' })
    })
    act(() => {
      result.current.dispatch({ type: 'INPUT_DECIMAL' })
    })
    expect(result.current.state.display).toBe('1.')
  })

  it('should handle clear (AC) correctly', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' })
    })
    act(() => {
      result.current.dispatch({ type: 'CLEAR' })
    })
    expect(result.current.state).toMatchObject({
      display: '0',
      currentValue: null,
      previousValue: null,
      operation: null,
    })
  })

  it('should handle sign toggle (+/-)', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' })
    })
    act(() => {
      result.current.dispatch({ type: 'TOGGLE_SIGN' })
    })
    expect(result.current.state.display).toBe('-5')
  })

  it('TOGGLE_SIGN when display is 0 leaves display as 0', () => {
    const { result } = renderHook(() => useCalculator())
    expect(result.current.state.display).toBe('0')
    act(() => result.current.dispatch({ type: 'TOGGLE_SIGN' }))
    expect(result.current.state.display).toBe('0')
  })

  it('should set operation correctly', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' })
    })
    act(() => {
      result.current.dispatch({ type: 'SET_OPERATION', payload: 'add' })
    })
    expect(result.current.state.operation).toBe('add')
    expect(result.current.state.waitingForOperand).toBe(true)
  })

  it('PERCENTAGE action sets operation to percentage', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' }))
    act(() => result.current.dispatch({ type: 'PERCENTAGE' }))
    expect(result.current.state.operation).toBe('percentage')
    expect(result.current.state.previousValue).toBe(5)
    expect(result.current.state.waitingForOperand).toBe(true)
  })

  it('CALCULATE_RESULT returns state unchanged (no-op)', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '7' }))
    const before = result.current.state
    act(() => result.current.dispatch({ type: 'CALCULATE_RESULT' }))
    expect(result.current.state).toEqual(before)
  })

  it('TOGGLE_SIGN when error is set returns state unchanged', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => result.current.dispatch({ type: 'SET_ERROR', payload: 'Some error' }))
    const before = result.current.state
    act(() => result.current.dispatch({ type: 'TOGGLE_SIGN' }))
    expect(result.current.state).toEqual(before)
  })

  it('BACKSPACE when error is set (not digit limit) returns state unchanged', () => {
    const { result } = renderHook(() => useCalculator())
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' }))
    act(() => result.current.dispatch({ type: 'SET_ERROR', payload: 'Division by zero' }))
    const before = result.current.state
    act(() => result.current.dispatch({ type: 'BACKSPACE' }))
    expect(result.current.state).toEqual(before)
  })

  it('percentage calculation via API', async () => {
    mockExecuteOperation.mockResolvedValue(25)
    const { result } = renderHook(() => useCalculator())
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '1' }))
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '0' }))
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '0' }))
    act(() => result.current.dispatch({ type: 'SET_OPERATION', payload: 'divide' }))
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '2' }))
    act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' }))
    act(() => result.current.dispatch({ type: 'PERCENTAGE' }))
    expect(result.current.state.operation).toBe('percentage')
    await act(async () => {
      await result.current.handleCalculate()
    })
    expect(mockExecuteOperation).toHaveBeenCalledWith('percentage', expect.any(Object))
    expect(result.current.state.display).toBe('25')
    expect(result.current.state.isLoading).toBe(false)
  })

  it('should calculate addition via API', async () => {
    mockExecuteOperation.mockResolvedValue(8)
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' })
    })
    act(() => {
      result.current.dispatch({ type: 'SET_OPERATION', payload: 'add' })
    })
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '3' })
    })
    await act(async () => {
      await result.current.handleCalculate()
    })
    expect(result.current.state.display).toBe('8')
    expect(result.current.state.isLoading).toBe(false)
  })

  it('should handle division by zero error', async () => {
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '1' })
    })
    act(() => {
      result.current.dispatch({ type: 'SET_OPERATION', payload: 'divide' })
    })
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '0' })
    })
    await act(async () => {
      await result.current.handleCalculate()
    })
    expect(result.current.state.error).toBe('Cannot divide by zero')
    expect(result.current.state.isLoading).toBe(false)
  })

  it('should handle API network errors', async () => {
    mockExecuteOperation.mockRejectedValue(new Error('Unable to connect to server'))
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '1' })
    })
    act(() => {
      result.current.dispatch({ type: 'SET_OPERATION', payload: 'add' })
    })
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '2' })
    })
    await act(async () => {
      await result.current.handleCalculate()
    })
    expect(result.current.state.error).toBe('Unable to connect to server')
  })

  it('should handle sqrt via handleSqrt', async () => {
    mockExecuteOperation.mockResolvedValue(3)
    const { result } = renderHook(() => useCalculator())
    act(() => {
      result.current.dispatch({ type: 'INPUT_DIGIT', payload: '9' })
    })
    await act(async () => {
      await result.current.handleSqrt!()
    })
    expect(result.current.state.display).toBe('3')
  })

  describe('MAX_DIGITS (15) limit', () => {
    it('blocks 16th digit and shows error message', () => {
      const { result } = renderHook(() => useCalculator())
      const fifteenDigits = '123456789012345'
      fifteenDigits.split('').forEach((d) => {
        act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: d }))
      })
      expect(result.current.state.display).toBe(fifteenDigits)
      act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '6' }))
      expect(result.current.state.display).toBe(fifteenDigits)
      expect(result.current.state.error).toBe('Maximum 15 digits allowed')
    })

    it('blocks decimal point when already at 15 digits', () => {
      const { result } = renderHook(() => useCalculator())
      const fifteenDigits = '123456789012345'
      fifteenDigits.split('').forEach((d) => {
        act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: d }))
      })
      act(() => result.current.dispatch({ type: 'INPUT_DECIMAL' }))
      expect(result.current.state.display).toBe(fifteenDigits)
      expect(result.current.state.error).toBe('Maximum 15 digits allowed')
    })

    it('counts digits after decimal toward limit', () => {
      const { result } = renderHook(() => useCalculator())
      ;'12345678901234.'.split('').forEach((c) => {
        if (c === '.') {
          act(() => result.current.dispatch({ type: 'INPUT_DECIMAL' }))
        } else {
          act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: c }))
        }
      })
      expect(result.current.state.display).toBe('12345678901234.')
      act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '5' }))
      expect(result.current.state.display).toBe('12345678901234.5')
      act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '6' }))
      expect(result.current.state.display).toBe('12345678901234.5')
      expect(result.current.state.error).toBe('Maximum 15 digits allowed')
    })

    it('backspace clears digit limit error and allows editing', () => {
      const { result } = renderHook(() => useCalculator())
      '123456789012345'.split('').forEach((d) => {
        act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: d }))
      })
      act(() => result.current.dispatch({ type: 'INPUT_DIGIT', payload: '6' }))
      expect(result.current.state.error).toBe('Maximum 15 digits allowed')
      act(() => result.current.dispatch({ type: 'BACKSPACE' }))
      expect(result.current.state.display).toBe('12345678901234')
      expect(result.current.state.error).toBeNull()
    })
  })
})
</file>

<file path="calculator-frontend/src/hooks/useCalculator.ts">
import { useReducer, useCallback } from 'react'
import type { CalculatorState, Operation } from '../types/calculator.types'
import { useApi } from './useApi'
import { formatResultForDisplay } from '../utils/formatNumber'
import {
  isDivisionByZero,
  isNegativeForSqrt,
} from '../utils/validation'

const MAX_DIGITS = 15
const DIGIT_LIMIT_MESSAGE = 'Maximum 15 digits allowed'

export type CalculatorAction =
  | { type: 'INPUT_DIGIT'; payload: string }
  | { type: 'INPUT_DECIMAL' }
  | { type: 'SET_OPERATION'; payload: Operation }
  | { type: 'CALCULATE_RESULT' }
  | { type: 'CLEAR' }
  | { type: 'CLEAR_ERROR' }
  | { type: 'SET_LOADING'; payload: boolean }
  | { type: 'SET_RESULT'; payload: number }
  | { type: 'SET_ERROR'; payload: string }
  | { type: 'PERCENTAGE' }
  | { type: 'TOGGLE_SIGN' }
  | { type: 'BACKSPACE' }

function digitCount(display: string): number {
  return display.replace(/[^0-9]/g, '').length
}

function parseDisplay(display: string): number {
  const n = parseFloat(display.replace(/,/g, ''))
  return Number.isNaN(n) ? 0 : n
}

const initialState: CalculatorState = {
  display: '0',
  currentValue: null,
  previousValue: null,
  operation: null,
  waitingForOperand: false,
  isLoading: false,
  error: null,
}

export function calculatorReducer(
  state: CalculatorState,
  action: CalculatorAction
): CalculatorState {
  switch (action.type) {
    case 'CLEAR_ERROR':
      return { ...state, error: null }

    case 'SET_LOADING':
      return { ...state, isLoading: action.payload }

    case 'SET_ERROR':
      return {
        ...state,
        error: action.payload,
        isLoading: false,
      }
    case 'SET_RESULT': {
      const result = action.payload
      const display = formatResultForDisplay(result)
      return {
        ...state,
        display,
        currentValue: result,
        previousValue: null,
        operation: null,
        waitingForOperand: true,
        isLoading: false,
        error: null,
      }
    }
    case 'CLEAR':
      return initialState

    case 'INPUT_DIGIT': {
      if (state.error) {
        return calculatorReducer(
          { ...state, error: null },
          { type: 'INPUT_DIGIT', payload: action.payload }
        )
      }
      const digit = action.payload
      let newDisplay: string
      if (state.waitingForOperand) {
        newDisplay = digit === '0' ? '0' : digit
      } else {
        if (state.display === '0' && digit !== '0') {
          newDisplay = digit
        } else if (state.display === '0' && digit === '0') {
          newDisplay = '0'
        } else {
          newDisplay = state.display + digit
        }
      }
      if (digitCount(newDisplay) > MAX_DIGITS) {
        return { ...state, error: DIGIT_LIMIT_MESSAGE }
      }
      return {
        ...state,
        display: newDisplay,
        waitingForOperand: false,
        currentValue: parseDisplay(newDisplay),
      }
    }

    case 'INPUT_DECIMAL': {
      if (state.error) {
        return calculatorReducer(
          { ...state, error: null },
          { type: 'INPUT_DECIMAL' }
        )
      }
      let newDisplay: string
      if (state.waitingForOperand) {
        newDisplay = '0.'
      } else if (state.display.includes('.')) {
        return state
      } else if (digitCount(state.display) >= MAX_DIGITS) {
        return { ...state, error: DIGIT_LIMIT_MESSAGE }
      } else {
        newDisplay = state.display + '.'
      }
      return {
        ...state,
        display: newDisplay,
        waitingForOperand: false,
        currentValue: parseDisplay(newDisplay),
      }
    }

    case 'TOGGLE_SIGN': {
      if (state.error) return state
      const n = parseDisplay(state.display)
      const newDisplay = n === 0 ? '0' : String(-n)
      return {
        ...state,
        display: newDisplay,
        currentValue: -n,
      }
    }

    case 'BACKSPACE': {
      if (state.error && state.error !== DIGIT_LIMIT_MESSAGE) return state
      const hadDigitLimitError = state.error === DIGIT_LIMIT_MESSAGE
      if (state.display === '0' || state.display.length <= 1) {
        return { ...state, display: '0', currentValue: 0, error: hadDigitLimitError ? null : state.error }
      }
      const next = state.display.slice(0, -1)
      const newDisplay = next === '' || next === '-' ? '0' : next
      return {
        ...state,
        display: newDisplay,
        currentValue: parseDisplay(newDisplay),
        error: hadDigitLimitError ? null : state.error,
      }
    }

    case 'SET_OPERATION':
    case 'PERCENTAGE': {
      if (state.error) return state
      const op: Operation =
        action.type === 'PERCENTAGE' ? 'percentage' : action.payload
      const current = parseDisplay(state.display)
      if (
        state.operation !== null &&
        state.previousValue !== null &&
        !state.waitingForOperand
      ) {
        return {
          ...state,
          previousValue: current,
          operation: op,
          waitingForOperand: true,
        }
      }
      return {
        ...state,
        previousValue:
          state.waitingForOperand && state.previousValue !== null
            ? state.previousValue
            : current,
        operation: op,
        waitingForOperand: true,
      }
    }

    case 'CALCULATE_RESULT':
      return state

    default:
      return state
  }
}

export function useCalculator() {
  const [state, dispatch] = useReducer(calculatorReducer, initialState)
  const { executeOperation } = useApi()

  const handleCalculate = useCallback(async () => {
    const op = state.operation
    if (!op) return
    dispatch({ type: 'CLEAR_ERROR' })
    const current = parseDisplay(state.display)
    if (op === 'sqrt') {
      if (isNegativeForSqrt(current)) {
        dispatch({
          type: 'SET_ERROR',
          payload: 'Cannot calculate square root of negative number',
        })
        return
      }
      dispatch({ type: 'SET_LOADING', payload: true })
      try {
        const result = await executeOperation(op, { operand: current })
        dispatch({ type: 'SET_RESULT', payload: result })
      } catch (err) {
        dispatch({
          type: 'SET_ERROR',
          payload: err instanceof Error ? err.message : 'Something went wrong',
        })
      }
      return
    }
    const prev = state.previousValue ?? current
    if (op === 'divide' && isDivisionByZero(current)) {
      dispatch({
        type: 'SET_ERROR',
        payload: 'Cannot divide by zero',
      })
      return
    }
    dispatch({ type: 'SET_LOADING', payload: true })
    try {
      const result = await executeOperation(op, {
        operand1: prev,
        operand2: current,
      })
      dispatch({ type: 'SET_RESULT', payload: result })
    } catch (err) {
      dispatch({
        type: 'SET_ERROR',
        payload: err instanceof Error ? err.message : 'Something went wrong',
      })
    }
  }, [state.operation, state.display, state.previousValue, executeOperation])

  const handleSqrt = useCallback(async () => {
    dispatch({ type: 'CLEAR_ERROR' })
    const current = parseDisplay(state.display)
    if (isNegativeForSqrt(current)) {
      dispatch({
        type: 'SET_ERROR',
        payload: 'Cannot calculate square root of negative number',
      })
      return
    }
    dispatch({ type: 'SET_LOADING', payload: true })
    try {
      const result = await executeOperation('sqrt', { operand: current })
      dispatch({ type: 'SET_RESULT', payload: result })
    } catch (err) {
      dispatch({
        type: 'SET_ERROR',
        payload: err instanceof Error ? err.message : 'Something went wrong',
      })
    }
  }, [state.display, executeOperation])

  return { state, dispatch, handleCalculate, handleSqrt }
}
</file>

<file path="calculator-frontend/src/test/setup.ts">
import React from 'react'
import '@testing-library/jest-dom'

;(globalThis as typeof globalThis & { React: typeof React }).React = React
</file>

<file path="calculator-frontend/src/utils/formatNumber.test.ts">
import { describe, it, expect } from 'vitest'
import { formatNumber, formatResultForDisplay } from './formatNumber'

describe('formatNumber', () => {
  it('formats integer', () => {
    expect(formatNumber(42)).toBe('42')
    expect(formatNumber('42')).toBe('42')
  })

  it('formats zero', () => {
    expect(formatNumber(0)).toBe('0')
    expect(formatNumber('0')).toBe('0')
  })

  it('strips trailing zeros after decimal', () => {
    expect(formatNumber('3.140')).toBe('3.14')
    expect(formatNumber(3.14)).toBe('3.14')
  })

  it('handles negative numbers', () => {
    expect(formatNumber(-5)).toBe('-5')
    expect(formatNumber('-5.00')).toBe('-5')
  })

  it('handles invalid input', () => {
    expect(formatNumber('')).toBe('0')
    expect(formatNumber('abc')).toBe('0')
  })

  it('handles decimal point only', () => {
    expect(formatNumber('.')).toBe('0')
  })
})

describe('formatResultForDisplay', () => {
  it('formats large numbers without scientific notation when possible', () => {
    expect(formatResultForDisplay(1e15)).toBe('1000000000000000')
    expect(formatResultForDisplay(1e16)).toBe('10000000000000000')
    expect(formatResultForDisplay(-1e15)).toBe('-1000000000000000')
  })

  it('uses scientific notation for very large numbers', () => {
    const result = formatResultForDisplay(1e25)
    expect(result).toMatch(/^1\.0000e\+25$/)
  })
})
</file>

<file path="calculator-frontend/src/utils/formatNumber.ts">
const MAX_DISPLAY_LENGTH = 18
const LARGE_NUMBER_THRESHOLD = 1e15

/**
 * Format a calculation result for display, avoiding scientific notation when possible.
 * For |value| >= 1e15, uses toLocaleString to show full digits up to ~1e21.
 */
export function formatResultForDisplay(value: number): string {
  if (!Number.isFinite(value)) return '0'
  const abs = Math.abs(value)
  if (abs < LARGE_NUMBER_THRESHOLD) {
    return Number.isInteger(value) ? String(value) : trimTrailingZeros(String(value))
  }
  const formatted = value.toLocaleString('en-US', {
    useGrouping: false,
    maximumFractionDigits: 10,
    minimumFractionDigits: 0,
  })
  if (formatted.includes('e') || formatted.includes('E')) {
    return value.toExponential(4)
  }
  return formatted.length > MAX_DISPLAY_LENGTH
    ? value.toExponential(4)
    : formatted
}

function trimTrailingZeros(s: string): string {
  if (s.includes('.')) {
    return s.replace(/\.?0+$/, '')
  }
  return s
}

/**
 * Format a number or display string for calculator display.
 * Strips trailing zeros after decimal, keeps at most MAX_DISPLAY_LENGTH chars.
 */
export function formatNumber(value: string | number): string {
  if (typeof value === 'number') {
    if (!Number.isFinite(value)) return '0'
    return formatResultForDisplay(value)
  }
  const trimmed = value.replace(/,/g, '').trim()
  if (!trimmed || trimmed === '-' || trimmed === '.') return '0'
  const n = parseFloat(trimmed)
  if (Number.isNaN(n)) return '0'
  return formatResultForDisplay(n)
}
</file>

<file path="calculator-frontend/vite.config.ts">
/// <reference types="vitest/config" />
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true,
      },
    },
  },
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/test/setup.ts',
    include: ['src/**/*.test.{ts,tsx}'],
    exclude: ['**/node_modules/**', '**/e2e/**'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: ['node_modules/', 'src/test/', '**/*.test.{ts,tsx}', '**/*.d.ts', 'src/main.tsx'],
    },
  },
})
</file>

<file path="Dockerfile">
# syntax=docker/dockerfile:1
# Enable BuildKit for cache mounts and faster builds: DOCKER_BUILDKIT=1

# ========== Stage 1: Build Backend (Kotlin/Micronaut) ==========
FROM gradle:8.5-jdk17-alpine AS backend-builder
WORKDIR /app/backend

COPY calculator-backend/gradle ./gradle
COPY calculator-backend/build.gradle.kts calculator-backend/settings.gradle.kts calculator-backend/gradle.properties ./
COPY calculator-backend/openapi.properties ./
COPY calculator-backend/src ./src

RUN --mount=type=cache,target=/home/gradle/.gradle \
    gradle build --no-daemon -x test shadowJar && \
    cp /app/backend/build/libs/calculator-backend-*-all.jar /app/backend/build/libs/backend-fat.jar

# ========== Stage 2: Build Frontend (React/Vite) ==========
FROM node:20-alpine AS frontend-builder
WORKDIR /app/frontend

ENV VITE_API_URL=/api/v1

COPY calculator-frontend/package.json calculator-frontend/package-lock.json ./
RUN --mount=type=cache,target=/root/.npm \
    npm ci

COPY calculator-frontend/ ./
RUN npm run build

# ========== Stage 3: Runtime (Alpine: JRE + Nginx) ==========
FROM eclipse-temurin:17-jre-alpine
RUN apk add --no-cache nginx && mkdir -p /etc/nginx/http.d

WORKDIR /app

COPY --from=backend-builder /app/backend/build/libs/backend-fat.jar ./backend.jar
COPY --from=frontend-builder /app/frontend/dist /usr/share/nginx/html

# Nginx: Alpine includes http.d inside http block (conf.d is root-level)
RUN echo 'server { \
    listen 80 default_server; \
    root /usr/share/nginx/html; \
    index index.html; \
    add_header X-Content-Type-Options "nosniff" always; \
    add_header X-Frame-Options "DENY" always; \
    add_header Content-Security-Policy "default-src '\''self'\''; script-src '\''self'\''; style-src '\''self'\'' '\''unsafe-inline'\''; img-src '\''self'\'' data:; font-src '\''self'\'';" always; \
    location / { \
        try_files $uri $uri/ /index.html; \
    } \
    location = /swagger-ui { return 301 /swagger-ui/; } \
    location = /swagger { return 301 /swagger/; } \
    location /api/ { \
        proxy_pass http://127.0.0.1:8080/api/; \
        proxy_http_version 1.1; \
        proxy_set_header Host $host; \
        proxy_set_header X-Real-IP $remote_addr; \
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; \
        proxy_set_header X-Forwarded-Proto $scheme; \
    } \
    location /swagger-ui/ { \
        add_header X-Content-Type-Options "nosniff" always; \
        add_header X-Frame-Options "DENY" always; \
        add_header Content-Security-Policy "default-src '\''self'\''; script-src '\''self'\'' '\''unsafe-inline'\'' '\''unsafe-eval'\''; style-src '\''self'\'' '\''unsafe-inline'\''; img-src '\''self'\'' data:; font-src '\''self'\''; connect-src '\''self'\'';" always; \
        proxy_pass http://127.0.0.1:8080/swagger-ui/; \
        proxy_http_version 1.1; \
        proxy_set_header Host $host; \
        proxy_set_header X-Real-IP $remote_addr; \
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; \
        proxy_set_header X-Forwarded-Proto $scheme; \
    } \
    location /swagger/ { \
        add_header X-Content-Type-Options "nosniff" always; \
        add_header X-Frame-Options "DENY" always; \
        add_header Content-Security-Policy "default-src '\''self'\''; script-src '\''self'\'' '\''unsafe-inline'\'' '\''unsafe-eval'\''; style-src '\''self'\'' '\''unsafe-inline'\''; img-src '\''self'\'' data:; font-src '\''self'\''; connect-src '\''self'\'';" always; \
        proxy_pass http://127.0.0.1:8080/swagger/; \
        proxy_http_version 1.1; \
        proxy_set_header Host $host; \
        proxy_set_header X-Real-IP $remote_addr; \
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; \
        proxy_set_header X-Forwarded-Proto $scheme; \
    } \
}' > /etc/nginx/http.d/default.conf

RUN printf '%s\n' \
    '#!/bin/sh' \
    'set -e' \
    'if [ -n "$CORS_ALLOWED_ORIGINS" ]; then export MICRONAUT_SERVER_CORS_CONFIGURATIONS_WEB_ALLOWED_ORIGINS="$CORS_ALLOWED_ORIGINS"; fi' \
    'java -jar /app/backend.jar &' \
    'exec nginx -g "daemon off;"' > /entrypoint.sh && chmod +x /entrypoint.sh

EXPOSE 80

HEALTHCHECK --interval=30s --timeout=3s --start-period=10s --retries=3 \
    CMD wget -q -O- http://127.0.0.1:80/api/v1/health || exit 1

ENTRYPOINT ["/entrypoint.sh"]
</file>

<file path="calculator-backend/build.gradle.kts">
plugins {
    kotlin("jvm") version "1.9.24"
    id("io.micronaut.application") version "4.3.5"
    id("org.jetbrains.kotlin.plugin.allopen") version "1.9.24"
    id("org.jetbrains.kotlin.kapt") version "1.9.24"
    id("com.github.johnrengelman.shadow") version "8.1.1"
    id("jacoco")
}

version = "0.1"
group = "com.calculator"

tasks.processResources {
    filesMatching("application.yml") {
        expand("projectVersion" to version)
    }
}

val kotlinVersion = project.properties["kotlinVersion"] as String

repositories {
    mavenCentral()
}

dependencies {
    implementation("io.micronaut:micronaut-http-server-netty")
    implementation("io.micronaut.reactor:micronaut-reactor")
    implementation("io.micronaut:micronaut-jackson-databind")
    implementation("io.micronaut.validation:micronaut-validation:4.3.5")
    implementation("io.micronaut.openapi:micronaut-openapi")
    implementation("io.micronaut.views:micronaut-views-core")
    implementation("io.swagger.core.v3:swagger-annotations")
    implementation("io.micronaut.kotlin:micronaut-kotlin-runtime")
    implementation("com.fasterxml.jackson.module:jackson-module-kotlin")
    implementation("ch.qos.logback:logback-classic")
    implementation("org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion")
    implementation("org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion")
    runtimeOnly("ch.qos.logback:logback-classic")
    runtimeOnly("org.yaml:snakeyaml")

    testImplementation("io.micronaut:micronaut-http-client")
    testImplementation("io.micronaut.test:micronaut-test-junit5")
    kapt("io.micronaut.openapi:micronaut-openapi")
    kaptTest("io.micronaut:micronaut-inject-java")
    testImplementation("org.junit.jupiter:junit-jupiter")
    testImplementation("org.mockito.kotlin:mockito-kotlin:5.1.0")
    testRuntimeOnly("org.junit.platform:junit-platform-launcher")
}

application {
    mainClass.set("com.calculator.ApplicationKt")
}

tasks.shadowJar {
    archiveBaseName.set("calculator-backend")
    archiveClassifier.set("all")
    mergeServiceFiles()
    manifest {
        attributes("Main-Class" to application.mainClass.get())
    }
}

tasks.withType<Test> {
    useJUnitPlatform()
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

allOpen {
    annotation("io.micronaut.aop.Around")
    annotation("io.micronaut.http.annotation.Controller")
}

tasks.withType<org.jetbrains.kotlin.gradle.tasks.KotlinCompile> {
    kotlinOptions {
        freeCompilerArgs = listOf("-Xjavac-arguments=-Dmicronaut.openapi.views.spec=swagger-ui.enabled=true,swagger-ui.theme=flattop")
    }
}

micronaut {
    version(project.properties["micronautVersion"] as String)
    testRuntime("junit5")
    processing {
        incremental(true)
        annotations("com.calculator.*")
    }
}

tasks.jacocoTestReport {
    dependsOn(tasks.test)
    classDirectories.setFrom(
        fileTree("$buildDir/classes/kotlin/main") {
            exclude(
                "com/calculator/Application.class",
                "com/calculator/ApplicationKt.class"
            )
        }
    )
    reports {
        xml.required.set(true)
        html.required.set(true)
    }
}
</file>

<file path="calculator-backend/src/test/kotlin/com/calculator/controller/CalculatorControllerTest.kt">
package com.calculator.controller

import com.calculator.model.request.BinaryOperationRequest
import com.calculator.model.request.UnaryOperationRequest
import com.calculator.model.response.ErrorResponse
import io.micronaut.http.HttpRequest
import io.micronaut.http.HttpStatus
import io.micronaut.http.client.HttpClient
import io.micronaut.http.client.exceptions.HttpClientResponseException
import io.micronaut.runtime.server.EmbeddedServer
import io.micronaut.test.extensions.junit5.annotation.MicronautTest
import org.junit.jupiter.api.Assertions.assertEquals
import org.junit.jupiter.api.Assertions.assertNotNull
import org.junit.jupiter.api.AfterEach
import org.junit.jupiter.api.BeforeEach
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertThrows

@MicronautTest
class CalculatorControllerTest(
    private val embeddedServer: EmbeddedServer
) {
    private lateinit var client: HttpClient

    @BeforeEach
    fun setup() {
        client = HttpClient.create(embeddedServer.url)
    }

    @AfterEach
    fun tearDown() {
        client.close()
    }

    @Test
    fun `POST add with valid input returns 200 and correct result`() {
        val request = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(10.0, 5.0))
        val response = client.toBlocking().exchange(request, Map::class.java)

        assertEquals(HttpStatus.OK, response.status)
        val body = response.body()
        assertNotNull(body)
        assertEquals(15.0, (body as Map<*, *>)["result"])
        assertEquals("ADD", body["operation"])
    }

    @Test
    fun `POST divide with valid input returns 200`() {
        val request = HttpRequest.POST("/api/v1/divide", BinaryOperationRequest(10.0, 5.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(2.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST divide with zero divisor returns 400 with CALC_001`() {
        val request = HttpRequest.POST("/api/v1/divide", BinaryOperationRequest(10.0, 0.0))

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_001", body.errorCode)
        assertEquals("Division by zero", body.message)
    }

    @Test
    fun `POST sqrt with valid input returns 200`() {
        val request = HttpRequest.POST("/api/v1/sqrt", UnaryOperationRequest(25.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(5.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST sqrt with negative returns 400 with CALC_003`() {
        val request = HttpRequest.POST("/api/v1/sqrt", UnaryOperationRequest(-1.0))

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_003", body.errorCode)
    }

    @Test
    fun `POST with null operand returns 400 with CALC_006`() {
        val request = HttpRequest.POST("/api/v1/add", mapOf("operand1" to null, "operand2" to 5))

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_006", body.errorCode)
    }

    @Test
    fun `POST with invalid operand type returns 400 with CALC_002`() {
        val request = HttpRequest.POST("/api/v1/add", """{"operand1": -11, "operand2": "a"}""")
            .contentType(io.micronaut.http.MediaType.APPLICATION_JSON_TYPE)

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_002", body.errorCode)
        assertEquals("Invalid operand type", body.message)
    }

    @Test
    fun `POST sqrt with operand as string returns 400 with CALC_002`() {
        val request = HttpRequest.POST("/api/v1/sqrt", """{"operand": "x"}""")
            .contentType(io.micronaut.http.MediaType.APPLICATION_JSON_TYPE)

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_002", body.errorCode)
    }

    @Test
    fun `GET health returns 200 with status version and JVM metrics`() {
        val response = client.toBlocking().exchange("/api/v1/health", Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        val body = response.body()
        assertNotNull(body)
        val map = body as Map<*, *>
        assertEquals("UP", map["status"])
        assertNotNull(map["version"])
        val jvm = map["jvm"] as? Map<*, *>
        assertNotNull(jvm)
        assertNotNull((jvm!!["memory"] as Map<*, *>)["heap"])
        assertNotNull((jvm["threads"] as Map<*, *>)["count"])
        assertNotNull(jvm["uptimeSeconds"])
    }

    @Test
    fun `POST subtract with valid input returns 200`() {
        val request = HttpRequest.POST("/api/v1/subtract", BinaryOperationRequest(10.0, 5.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(5.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST multiply with valid input returns 200`() {
        val request = HttpRequest.POST("/api/v1/multiply", BinaryOperationRequest(10.0, 5.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(50.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST power with valid input returns 200`() {
        val request = HttpRequest.POST("/api/v1/power", BinaryOperationRequest(2.0, 3.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(8.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST percentage with valid input returns 200`() {
        val request = HttpRequest.POST("/api/v1/percentage", BinaryOperationRequest(100.0, 25.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(25.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST percentage with zero returns 0`() {
        val request = HttpRequest.POST("/api/v1/percentage", BinaryOperationRequest(100.0, 0.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(0.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST divide with negative result`() {
        val request = HttpRequest.POST("/api/v1/subtract", BinaryOperationRequest(5.0, 10.0))
        val response = client.toBlocking().exchange(request, Map::class.java)
        assertEquals(HttpStatus.OK, response.status)
        assertEquals(-5.0, (response.body() as Map<*, *>)["result"])
    }

    @Test
    fun `POST power with overflow returns 400 with CALC_004`() {
        val request = HttpRequest.POST("/api/v1/power", BinaryOperationRequest(Double.MAX_VALUE, 2.0))

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_004", body.errorCode)
    }

    @Test
    fun `POST add with overflow returns 400 with CALC_004`() {
        val request = HttpRequest.POST("/api/v1/add", BinaryOperationRequest(Double.MAX_VALUE, Double.MAX_VALUE))

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_004", body.errorCode)
    }

    @Test
    fun `POST percentage with value over 100 returns 400 with CALC_005`() {
        val request = HttpRequest.POST("/api/v1/percentage", BinaryOperationRequest(100.0, 150.0))

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_005", body.errorCode)
    }

    @Test
    fun `POST with missing operand2 returns 400 with CALC_006`() {
        val request = HttpRequest.POST("/api/v1/add", """{"operand1": 5}""")
            .contentType(io.micronaut.http.MediaType.APPLICATION_JSON_TYPE)

        val exception = assertThrows<HttpClientResponseException> {
            client.toBlocking().exchange(request, ErrorResponse::class.java)
        }
        assertEquals(HttpStatus.BAD_REQUEST, exception.response.status)
        val body = exception.response.getBody(ErrorResponse::class.java).orElseThrow()
        assertEquals("CALC_006", body.errorCode)
    }
}
</file>

<file path="calculator-frontend/README.md">
# Calculator Frontend

React + TypeScript single-page application for the calculator. Consumes the backend REST API (Kotlin/Micronaut), with an iOS-style keypad UI, full keyboard support, structured error handling, and responsive layout.

---

## Contents

- [Tech stack](#tech-stack)
- [Setup instructions](#setup-instructions)
- [How to run](#how-to-run)
- [Environment](#environment)
- [Scripts](#scripts)
- [Testing](#testing)
- [API integration and examples](#api-integration-and-examples)
- [Design decisions and assumptions](#design-decisions-and-assumptions)
- [Accessibility](#accessibility)

---

## Tech stack

| Area        | Technology |
|------------|------------|
| UI         | React 19, TypeScript |
| Build      | Vite 7 |
| Styling    | Tailwind CSS |
| HTTP       | Axios |
| Unit tests | Vitest, React Testing Library |
| E2E tests  | Playwright |
| Lint/format| ESLint, Prettier |

---

## Setup instructions

- **Node.js** 20+ (LTS recommended) and **npm**.
- For full-stack use and E2E tests, the **backend** must be running at `http://localhost:8080` (see [calculator-backend](../calculator-backend)).

From the repository root, open a terminal in `calculator-frontend/`.

---

## How to run

```bash
npm install
npm run dev
```

The app runs at **http://localhost:3000**. With the backend on port 8080, Vite’s proxy forwards `/api` to the backend so the same origin is used in development. To run backend and frontend together via Docker, see the [root README](../README.md).

---

## Environment

Copy `.env.example` to `.env` and adjust if your backend URL differs:

```bash
cp .env.example .env
```

| Variable           | Description              | Default |
|--------------------|--------------------------|---------|
| `VITE_API_URL`     | Backend API base URL     | `http://localhost:8080/api/v1` |
| `VITE_API_DOCS_URL`| API documentation URL    | `http://localhost:8080/calculator-api-1.0` |

---

## Scripts

| Command              | Description |
|----------------------|-------------|
| `npm run dev`        | Start dev server (port 3000) |
| `npm run build`      | TypeScript check + production build |
| `npm run preview`    | Serve production build locally |
| `npm run test`       | Run unit tests (watch mode) |
| `npm run test:ui`    | Vitest UI |
| `npm run test:coverage` | Unit tests with coverage report |
| `npm run test:e2e`   | Playwright E2E tests |
| `npm run test:e2e:ui`| Playwright E2E in UI mode |
| `npm run lint`       | ESLint |
| `npm run format`     | Prettier (write) |

---

## Testing

- **Unit:** Vitest + React Testing Library. Coverage thresholds are configured in `vite.config.ts`.
- **E2E:** Playwright. Backend must be running for API-dependent flows.

  ```bash
  # Terminal 1 – backend
  cd ../calculator-backend && ./gradlew run

  # Terminal 2 – E2E
  npm run test:e2e
  ```

On Windows use `gradlew.bat run` for the backend.

---

## API integration and examples

The frontend calls the backend REST API. Base URL is set via `VITE_API_URL` (default `http://localhost:8080/api/v1`). When using Vite’s dev proxy, requests to `/api` are forwarded to the backend.

- **Docs (when backend is running):** http://localhost:8080/swagger-ui/ and http://localhost:8080/calculator-api-1.0
- **Endpoints used:** `POST /api/v1/add`, `/subtract`, `/multiply`, `/divide`, `/power`, `/percentage`, `/sqrt` with JSON bodies.
- **Success response:** `{ result, operation, timestamp }`.
- **Error response:** `{ errorCode, message, details?, timestamp }` with codes CALC_001–CALC_006 (see [calculator-backend](../calculator-backend)).

**Example (conceptually):** A user taps “5”, “+”, “3”, “=”. The app sends `POST /api/v1/add` with `{"operand1": 5, "operand2": 3}` and displays the returned `result` (8.0). On error (e.g. division by zero), the app maps `errorCode` (e.g. CALC_001) to a user-facing message (“Cannot divide by zero”); network errors show a generic “Unable to connect” message.

---

## Design decisions and assumptions

- **Architecture:** `Calculator` composes `Display`, `Keypad` (reusable `Button`), `Spinner`, and error area. State is in `useCalculator` (reducer); API calls and error handling are in `useApi`. The API client (`calculatorApi` in `services/`) uses Axios with base URL from env. Types live in `types/`; formatting and validation helpers in `utils/`.
- **Why backend for operations:** All calculations and validation live on the backend so logic is in one place, testable via the API, and the frontend stays a thin UI layer.
- **State and API:** The reducer holds display value, pending operation, and operands; `useApi` performs the HTTP call and maps backend errors to user-facing strings. This keeps UI and network concerns separated.
- **Assumptions:** The app is used with the companion backend. API base URL is configurable for local vs Docker/production. We assume a modern browser (ES modules, fetch).

---

## Accessibility

- ARIA labels on interactive elements; display uses `aria-live="polite"` for result updates.
- Keyboard: digits `0–9`, `.`, `+`, `-`, `*`, `/`, `Enter` (=), `Escape` (clear).
</file>

<file path="README.md">
# Calculator — Full-Stack App (Sezzle)

Full-stack calculator application: REST API in Kotlin/Micronaut and web client in React. Includes binary operations (add, subtract, multiply, divide, power, percentage), unary operation (square root), validation, error handling, and tests.

---

## Contents

- [Tech stack](#tech-stack)
- [Project structure](#project-structure)
- [Setup instructions](#setup-instructions)
- [How to run the frontend and backend](#how-to-run-the-frontend-and-backend)
- [Tests](#tests)
- [CI/CD](#cicd)
- [API documentation and examples](#api-documentation-and-examples)
- [Error codes](#error-codes)
- [Design decisions and assumptions](#design-decisions-and-assumptions)

---

## Tech stack

| Layer      | Technology |
|-----------|------------|
| **Backend** | Kotlin 1.9, Micronaut 4, Java 17, Gradle 8.5 |
| **Frontend** | React 19, TypeScript, Vite 7, Tailwind CSS, Axios |
| **Tests**   | JUnit 5, Mockito (backend); Vitest, Testing Library, Playwright (frontend) |
| **API**     | REST JSON, OpenAPI 3, Swagger UI |

---

## Project structure

```
sezzle/
├── calculator-backend/     # REST API (Micronaut + Kotlin)
│   ├── src/main/kotlin/    # Logic, controllers, services, DTOs
│   └── src/test/           # Unit and integration tests
├── calculator-frontend/    # React SPA (Vite + TypeScript)
│   ├── src/                # Components, hooks, services, tests
│   └── e2e/                # E2E tests with Playwright
├── Dockerfile              # Single image: backend + frontend + Nginx
└── README.md
```

---

## Setup instructions

- **Option A – Docker (recommended):** Install [Docker](https://docs.docker.com/get-docker/) and ensure Docker Desktop (or the Docker daemon) is running. No need to install JDK or Node locally.
- **Option B – Local:**
  - **Backend:** JDK 17+, Gradle 8.5 (wrapper included in this repo; use `./gradlew` or `gradlew.bat` on Windows).
  - **Frontend:** Node.js 20+ and npm.

Clone the repository (if needed) and open a terminal in the project root.

---

## How to run the frontend and backend

### Option 1: Single container (Docker)

Easiest way to run both backend and frontend together:

```bash
# From the repository root (BuildKit enabled for faster builds)
docker build -t sezzle-calculator .
docker run -p 80:80 sezzle-calculator
```

The image uses Alpine-based stages and multi-stage builds (~300MB). It includes a `HEALTHCHECK` that hits `/api/v1/health`.

Open in browser: **http://localhost**

If port 80 is already in use, run with another port (e.g. `docker run -p 3000:80 sezzle-calculator`) and open http://localhost:3000.

- Frontend is served on port 80 (or the host port you mapped).
- Requests to `/api` are proxied to the backend inside the same container.
- No need to start backend or frontend separately.

### Option 2: Backend and frontend separately (local)

**Step 1 – Backend (port 8080)**

```bash
cd calculator-backend
./gradlew run
```

On Windows: `gradlew.bat run`

API is available at `http://localhost:8080`. Swagger UI: http://localhost:8080/swagger-ui/

**Step 2 – Frontend (port 3000)**

In a **separate terminal**:

```bash
cd calculator-frontend
npm install
npm run dev
```

Open **http://localhost:3000**. Vite’s proxy forwards `/api` calls to the backend on port 8080.

Optional: create `calculator-frontend/.env` with `VITE_API_URL=http://localhost:8080/api/v1` to override the API base URL.

---

## Tests

### Backend

```bash
cd calculator-backend
./gradlew test
./gradlew jacocoTestReport   # Coverage report at build/reports/jacoco/test/html/index.html
```

### Frontend

```bash
cd calculator-frontend
npm run test                 # Vitest (unit tests)
npm run test:coverage        # Coverage
npm run test:e2e             # E2E with Playwright (requires backend on 8080 and frontend on 3000)
```

---

## CI/CD

Automatic tests run on every push and pull request:

- **GitHub Actions** (`.github/workflows/ci.yml`): Runs backend tests (Gradle), frontend tests (Vitest), and frontend lint. Uploads JaCoCo coverage reports as artifacts.
- **GitLab CI** (`.gitlab-ci.yml`): Same jobs on GitLab; backend and frontend tests run in parallel. JUnit reports are collected for the test results dashboard.

Both pipelines run on `main`, `master`, and `develop`. Use branch protection to require passing CI before merging PRs.

---

## API documentation and examples

The backend exposes a REST API. Base URL (when running locally or when using the Docker app’s proxy): **`http://localhost:8080/api/v1`**.

- **Swagger UI (interactive):** http://localhost:8080/swagger-ui/
- **OpenAPI YAML:** http://localhost:8080/swagger/calculator-api-1.0.yml

### Example API calls

All operation endpoints use `Content-Type: application/json`. Success responses include `result`, `operation`, and `timestamp`; errors include `errorCode`, `message`, and `timestamp`.

**Addition (POST /add)**

```bash
curl -X POST http://localhost:8080/api/v1/add \
  -H "Content-Type: application/json" \
  -d '{"operand1": 10, "operand2": 5}'
```

Response: `{"result":15.0,"operation":"ADD","timestamp":"2025-02-13T..."}`

**Division by zero (error)**

```bash
curl -X POST http://localhost:8080/api/v1/divide \
  -H "Content-Type: application/json" \
  -d '{"operand1": 10, "operand2": 0}'
```

Response (400): `{"errorCode":"CALC_001","message":"Division by zero",...}`

**Square root (POST /sqrt)**

```bash
curl -X POST http://localhost:8080/api/v1/sqrt \
  -H "Content-Type: application/json" \
  -d '{"operand": 25}'
```

Response: `{"result":5.0,"operation":"SQRT","timestamp":"..."}`

### Endpoint summary

| Operation   | Endpoint      | Body (example)              |
|------------|---------------|-----------------------------|
| Add        | POST /add     | `{"operand1": 10, "operand2": 5}` |
| Subtract   | POST /subtract| `{"operand1": 10, "operand2": 5}` |
| Multiply   | POST /multiply| `{"operand1": 10, "operand2": 5}` |
| Divide     | POST /divide  | `{"operand1": 10, "operand2": 5}` |
| Power      | POST /power   | `{"operand1": 2, "operand2": 3}`  |
| Percentage | POST /percentage | `{"operand1": 100, "operand2": 25}` |
| Square root| POST /sqrt    | `{"operand": 25}`            |
| Health     | GET /health   | —                            |

---

## Design decisions and assumptions

- **Backend:** REST over JSON with a thin controller layer and a dedicated service for business logic. Validation and errors are centralized (global exception handler) with stable error codes (CALC_001–CALC_006) for client handling. OpenAPI/Swagger is used for documentation. Micronaut was chosen for a lightweight JVM API with good Kotlin support.
- **Frontend:** Single-page app (React + TypeScript) with a reducer-based state for the calculator and a separate hook for API calls. The UI mimics a simple calculator keypad; backend performs all operations to keep logic and validation in one place. API base URL is configurable via env for local vs Docker/production.
- **Docker:** One image runs both backend (fat JAR) and frontend (static files served by Nginx). Nginx proxies `/api` to the backend so the browser talks to a single origin; no CORS issues in that setup. Port 80 is used by default; another host port can be mapped if 80 is in use. For production, set `CORS_ALLOWED_ORIGINS` (e.g. `-e CORS_ALLOWED_ORIGINS="https://app.example.com"`) instead of allowing any origin.
- **Assumptions:** Backend and frontend are developed and versioned together. The API is internal to this app (no public multi-tenant API). Numbers are handled as doubles; edge cases (overflow, NaN, division by zero) are validated and return structured errors.

---

## Error codes

The API returns error responses with a code and message:

| Code   | Scenario |
|--------|----------|
| CALC_001 | Division by zero |
| CALC_002 | Invalid operand (NaN, Infinity, or wrong type) |
| CALC_003 | Negative number for square root |
| CALC_004 | Numerical overflow/underflow |
| CALC_005 | Percentage out of range (must be 0–100) |
| CALC_006 | Validation error (null or missing operands) |

---

For more detail (backend architecture, CORS, extra cURL examples), see `calculator-backend/README.md`. For frontend structure and scripts, see `calculator-frontend/README.md`.
</file>

<file path="calculator-backend/README.md">
# Calculator Backend

REST API microservice for calculator operations. Built with **Micronaut 4.x**, **Kotlin**, and a clear MVC-style structure. Exposes binary operations (add, subtract, multiply, divide, power, percentage), unary operation (square root), validation, structured error responses, and OpenAPI documentation.

---

## Contents

- [Tech stack](#tech-stack)
- [Setup instructions](#setup-instructions)
- [How to run](#how-to-run)
- [API overview and examples](#api-overview-and-examples)
- [Error codes](#error-codes)
- [Design decisions and assumptions](#design-decisions-and-assumptions)
- [CORS](#cors)

---

## Tech stack

| Area        | Technology |
|------------|------------|
| Runtime    | Java 17, Kotlin 1.9 |
| Framework  | Micronaut 4.x (Netty, Jackson, Validation, OpenAPI) |
| Build      | Gradle 8.5 (wrapper included) |
| Tests      | JUnit 5, Mockito Kotlin |
| Coverage   | JaCoCo |

---

## Setup instructions

- **JDK 17+** (OpenJDK or Oracle JDK).
- **Gradle 8.5** — the project includes the Gradle wrapper; use `./gradlew` on Unix/macOS or `gradlew.bat` on Windows. No need to install Gradle globally.

From the repository root, open a terminal in `calculator-backend/`.

---

## How to run

```bash
# Build (including tests)
./gradlew build

# Run the application
./gradlew run
```

On Windows: `gradlew.bat build` and `gradlew.bat run`.

The API is available at **http://localhost:8080**. Health: `GET http://localhost:8080/api/v1/health`.

### Test coverage report

```bash
./gradlew jacocoTestReport
```

HTML report: `build/reports/jacoco/test/html/index.html`.

### Fat JAR (for Docker / standalone run)

```bash
./gradlew shadowJar
```

Output: `build/libs/calculator-backend-0.1-all.jar`. Run with: `java -jar build/libs/calculator-backend-0.1-all.jar`.

---

## API overview and examples

**Base URL:** `http://localhost:8080/api/v1`

All operation endpoints expect `Content-Type: application/json`.

### Binary operations (POST)

Request body: `{"operand1": <number>, "operand2": <number>}`

| Endpoint         | Operation     | Example        |
|------------------|---------------|----------------|
| POST /add        | Addition      | 10 + 5 → 15    |
| POST /subtract   | Subtraction   | 10 - 5 → 5     |
| POST /multiply   | Multiplication| 10 × 5 → 50    |
| POST /divide     | Division      | 10 / 5 → 2     |
| POST /power      | Exponentiation| 2^3 → 8        |
| POST /percentage | Percentage    | 100 × 25% → 25 |

### Unary operation (POST)

**POST /sqrt** — request body: `{"operand": <number>}`  
Example: `{"operand": 25}` → `{"result": 5.0, "operation": "SQRT", "timestamp": "..."}`

### Health (GET)

**GET /health** — returns `{"status": "UP"}`.

**Interactive documentation (when the app is running):** Swagger UI at http://localhost:8080/swagger-ui/ and OpenAPI YAML at http://localhost:8080/swagger/calculator-api-1.0.yml.

### Example API calls (cURL)

```bash
# Addition
curl -X POST http://localhost:8080/api/v1/add \
  -H "Content-Type: application/json" \
  -d '{"operand1": 10, "operand2": 5}'
# → {"result":15.0,"operation":"ADD","timestamp":"..."}

# Division by zero (4xx error)
curl -X POST http://localhost:8080/api/v1/divide \
  -H "Content-Type: application/json" \
  -d '{"operand1": 10, "operand2": 0}'
# → 400 {"errorCode":"CALC_001","message":"Division by zero",...}

# Square root
curl -X POST http://localhost:8080/api/v1/sqrt \
  -H "Content-Type: application/json" \
  -d '{"operand": 25}'
# → {"result":5.0,"operation":"SQRT","timestamp":"..."}

# Health check
curl http://localhost:8080/api/v1/health
```

---

## Error codes

The API returns JSON error bodies with a stable `errorCode` and a `message`. Use these for client-side handling and user-facing messages.

| Code    | Scenario |
|---------|----------|
| CALC_001 | Division by zero |
| CALC_002 | Invalid operand (NaN, Infinity, or wrong type) |
| CALC_003 | Negative number for square root |
| CALC_004 | Numerical overflow or underflow |
| CALC_005 | Invalid percentage (must be 0–100) |
| CALC_006 | Validation error (null or missing operands) |
| RATE_001 | Rate limit exceeded (429 Too Many Requests) |

---

## Rate limiting

The API implements rate limiting via an `HttpServerFilter` to protect against DoS and API abuse. Requests are limited per client IP (using `X-Forwarded-For`, `X-Real-IP`, or remote address).

**Configuration** (in `application.yml` or environment):

```yaml
ratelimit:
  enabled: true
  limit: 100          # max requests per window
  window-seconds: 60  # window duration
  exclude-paths:
    - /api/v1/health  # health check excluded
```

When the limit is exceeded, the API returns **429 Too Many Requests** with `errorCode: "RATE_001"`. The rate limiter uses in-memory fixed-window counters; for multi-instance deployments, consider a shared store (e.g., Redis).

---

## Design decisions and assumptions

- **Architecture:** MVC-style: thin controllers (HTTP only), service layer for all calculator logic and validation, DTOs for request/response. A global exception handler and an optional response filter ensure a consistent JSON error shape (`errorCode`, `message`, `timestamp`).
- **API design:** REST over JSON. OpenAPI 3 spec is generated from code; Swagger UI is served for interactive docs. All operations are POST (except health) with JSON bodies to keep the API uniform and easy to document.
- **Validation and errors:** Operands are validated (NaN, Infinity, division by zero, negative sqrt, percentage range, overflow). Stable error codes (CALC_001–CALC_006) allow the frontend to show user-friendly messages without parsing free text.
- **Testing:** JUnit 5 and Mockito for unit and integration tests; test-first where applicable. JaCoCo for coverage.
- **Assumptions:** The API is used only by the companion React frontend (and optionally Swagger). Numbers are `Double`; we rely on the JVM and explicit checks for edge cases. CORS is configured for the frontend origin(s).

---

## CORS

CORS is enabled for the React frontend. Default allowed origins: `http://localhost:3000` (Vite dev) and `http://localhost` (Docker/local).

**Production / deployment:** Configure allowed origins via environment variable instead of using `*`:

```bash
# Docker
docker run -e CORS_ALLOWED_ORIGINS="https://app.example.com" ...

# Or Micronaut directly
MICRONAUT_SERVER_CORS_CONFIGURATIONS_WEB_ALLOWED_ORIGINS="https://app.example.com" java -jar backend.jar
```

`CORS_ALLOWED_ORIGINS` is read by the Docker entrypoint and passed to Micronaut. For multiple origins, use comma-separated values: `https://app1.com,https://app2.com`.

---

## Security headers

The API adds standard HTTP security headers to responses:

| Header | Value |
|--------|-------|
| X-Content-Type-Options | nosniff |
| X-Frame-Options | DENY |
| Content-Security-Policy | default-src 'self'; script-src 'self'; ... |
| Strict-Transport-Security | max-age=31536000; includeSubDomains (only when HTTPS) |

- **Micronaut:** `SecurityHeadersFilter` adds these to `/api/**`, `/swagger/**`, `/swagger-ui/**`.
- **Docker/Nginx:** Same headers are set at the Nginx layer for all traffic.
- **HSTS:** Set only when the request is HTTPS or `X-Forwarded-Proto: https`. For production behind a TLS-terminating proxy, ensure the proxy forwards this header.
</file>

</files>
